(function() {function k(){return function(){}}function s(a){return function(){return this[a]}}function aa(a){return function(){return a}}var t,ba=ba||{},u=this;function ca(a){a=a.split(".");for(var b=u,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function v(a){return void 0!==a}function w(a){return"array"==ea(a)}function x(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function z(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function C(a){return"number"==typeof a}function ga(a){return"function"==ea(a)}function D(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a[ia]||(a[ia]=++ja)}
var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function na(a,b,c){na=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return na.apply(null,arguments)}var oa=Date.now||function(){return+new Date};function pa(a,b){var c=a.split("."),d=u;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function G(a,b){function c(){}c.prototype=b.prototype;a.k=b.prototype;a.prototype=new c};function qa(a){Error.captureStackTrace?Error.captureStackTrace(this,qa):this.stack=Error().stack||"";a&&(this.message=String(a))}G(qa,Error);qa.prototype.name="CustomError";function ra(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function sa(a){return/^[\s\xa0]*$/.test(a)}function ta(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ya,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(za,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Aa,"&quot;"));return a}
var wa=/&/g,ya=/</g,za=/>/g,Aa=/\"/g,va=/[&<>\"]/;function Ba(a){return ta(a.replace(/  /g," &#160;"),void 0)}function Ca(a){for(var b=0;1>b;b++)if('"'==a.charAt(0)&&'"'==a.charAt(a.length-1))return a.substring(1,a.length-1);return a}var Da={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ea={"'":"\\'"};
function Fa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Da[d])){if(!(31<e&&127>e))if(d in Ea)d=Ea[d];else if(d in Da)d=Ea[d]=Da[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Ea[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Ga(a,b){b.unshift(a);qa.call(this,ra.apply(null,b));b.shift()}G(Ga,qa);Ga.prototype.name="AssertionError";function Ha(a,b){throw new Ga("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ia=Array.prototype,H=Ia.indexOf?function(a,b,c){return Ia.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(z(a))return z(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ja=Ia.forEach?function(a,b,c){Ia.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ka=Ia.map?function(a,b,c){return Ia.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
z(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},La=Ia.some?function(a,b,c){return Ia.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Ma=Ia.every?function(a,b,c){return Ia.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Na(a,b){var c=Oa(a,b,void 0);return 0>c?null:z(a)?a.charAt(c):a[c]}
function Oa(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Pa(a){if(!w(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Qa(a,b){var c=H(a,b),d;(d=0<=c)&&Ia.splice.call(a,c,1);return d}function Ra(a){return Ia.concat.apply(Ia,arguments)}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ta(a,b,c){return 2>=arguments.length?Ia.slice.call(a,b):Ia.slice.call(a,b,c)}function Ua(a,b){if(!x(a)||!x(b)||a.length!=b.length)return!1;for(var c=a.length,d=Va,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Va(a,b){return a===b};function Wa(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function I(a,b){this.f=[];this.G=b||null}t=I.prototype;t.Ba=!1;t.Ga=!1;t.Lb=!1;t.Bc=!1;t.tc=!1;t.Cc=0;t.lc=function(a,b){this.Lb=!1;Xa(this,a,b)};function Xa(a,b,c){a.Ba=!0;a.g=c;a.Ga=!b;Ya(a)}function Za(a){if(a.Ba){if(!a.tc)throw new $a;a.tc=!1}}t.n=function(a){Za(this);Xa(this,!0,a)};t.l=function(a){Za(this);Xa(this,!1,a)};t.U=function(a,b){return this.o(a,null,b)};t.Hb=function(a,b){return this.o(null,a,b)};t.Q=function(a,b){return this.o(a,a,b)};
t.o=function(a,b,c){this.f.push([a,b,c]);this.Ba&&Ya(this);return this};function ab(a){return La(a.f,function(a){return ga(a[1])})}
function Ya(a){a.h&&a.Ba&&ab(a)&&(u.clearTimeout(a.h),delete a.h);a.p&&(a.p.Cc--,delete a.p);for(var b=a.g,c=!1,d=!1;a.f.length&&!a.Lb;){var e=a.f.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ga?g:f)try{var h=f.call(e||a.G,b);v(h)&&(a.Ga=a.Ga&&(h==b||h instanceof Error),a.g=b=h);b instanceof I&&(d=!0,a.Lb=!0)}catch(l){b=l,a.Ga=!0,ab(a)||(c=!0)}}a.g=b;d&&(b.o(na(a.lc,a,!0),na(a.lc,a,!1)),b.Bc=!0);c&&(a.h=u.setTimeout(Wa(b),0))}function bb(a){var b=new I;b.n(a);return b}
function cb(a){Error.captureStackTrace?Error.captureStackTrace(this,cb):this.stack=Error().stack||"";a&&(this.message=String(a))}G(cb,Error);function $a(){cb.call(this)}G($a,cb);$a.prototype.message="Deferred has already fired";$a.prototype.name="AlreadyCalledError";function db(a,b){I.call(this,0,b);this.a=[]}G(db,I);function eb(a,b){for(var c=0;c<a.a.length;c++)a.a[c][0].call(a.a[c][1],b)}db.prototype.n=function(a){this.a.length=0;db.k.n.call(this,a)};db.prototype.l=function(a){this.a.length=0;db.k.l.call(this,a)};var gb={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},hb=u.IDBRequest&&"LOADING"in u.IDBRequest?u.IDBTransaction:u.webkitIDBRequest&&"LOADING"in u.webkitIDBRequest&&1===u.webkitIDBTransaction.READ_WRITE?u.webkitIDBTransaction:gb,ib=hb.READ_ONLY,J=hb.READ_WRITE,jb=hb.VERSION_CHANGE,kb=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.moz_indexedDB||u.msIndexedDB;I.prototype.done=I.prototype.U;I.prototype.fail=I.prototype.Hb;I.prototype.then=I.prototype.o;I.prototype.always=I.prototype.Q;function lb(a,b){var c,d;2==arguments.length&&z(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=x(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],v(a));c++);return a}var mb={};
function nb(a){var b=[a];a=new ob;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(mb);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),pb(a,e);else if(e instanceof Date)c+=2,a.write(c),pb(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===mb)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function rb(a){for(var b=[],c=b,d=[],e,f,g=new sb(a);null!=tb(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)tb(g);else break}while(1);1===a?c.push(ub(g)):2===a?c.push(new Date(ub(g))):3===a?c.push(vb(g)):0===a&&(c=d.pop())}return b[0]}
function pb(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function ub(a){var b=tb(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=tb(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(tb(a)|0):tb(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function vb(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=tb(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function sb(a){this.a=null;this.b=a;this.d=this.b.length-1;this.index=-1}function tb(a){return a.a=a.index<a.d?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function ob(){this.a=[];this.b=void 0}
ob.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};ob.prototype.toString=function(){return this.a.length?this.a.join(""):""};function wb(a,b){var c=nb(a),d=nb(b);return c>d?1:c==d?0:-1};var xb=kb&&kb.cmp?na(kb.cmp,kb):wb,yb=[];function zb(){0!=Ab&&(Bb[ha(this)]=this)}var Ab=0,Bb={};zb.prototype.da=!1;zb.prototype.ba=function(){if(!this.da&&(this.da=!0,this.w(),0!=Ab)){var a=ha(this);delete Bb[a]}};zb.prototype.w=function(){if(this.tb)for(;this.tb.length;)this.tb.shift()()};function Cb(a,b){this.type=a;this.a=this.target=b}Cb.prototype.ba=k();Cb.prototype.b=!1;Cb.prototype.e=!0;Cb.prototype.preventDefault=function(){this.e=!1};function Db(a,b){Cb.call(this,a,b)}G(Db,Cb);Db.prototype.f=s("d");function Eb(a,b,c,d,e){Cb.call(this,a,b);this.version=c;this.wc=d;this.rc=e}G(Eb,Db);t=Eb.prototype;t.name="ReadyEvent";t.version=NaN;t.wc=NaN;t.rc=null;t.Xc=s("version");t.Ic=s("wc");t.Hc=s("rc");function Fb(a,b,c){Cb.call(this,c||"error",a);this.error=b}G(Fb,Db);Fb.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};Fb.prototype.name="ErrorEvent";Fb.prototype.error=null;Fb.prototype.g=s("error");
function Gb(a,b){Fb.call(this,a,b,"fail")}G(Gb,Fb);Gb.prototype.name="FailEvent";function Hb(a,b,c,d,e){Cb.call(this,a,b);this.d=c;this.key=d;this.value=e}G(Hb,Db);Hb.prototype.name="RecordEvent";Hb.prototype.g=s("key");Hb.prototype.h=s("value");function Ib(a,b,c,d,e){Cb.call(this,a,b);this.d=c;this.keys=d;this.O=e}G(Ib,Db);Ib.prototype.name="StoreEvent";Ib.prototype.F=s("keys");Ib.prototype.v=s("O");function K(a,b,c){var d;if(D(a))d=a.store,b=a.id,null!=a.parent&&(c=new K(a.parent));else if(v(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new K(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!v(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}t=K.prototype;t.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};t.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};
t.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};t.Tc=s("a");t.Rc=s("id");t.Sc=s("parent");function Jb(a){if(x(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function L(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}L.prototype.lower=void 0;L.prototype.upper=void 0;L.prototype.toJSON=function(){var a;a=this||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}};function Kb(a){return Mb(a)}L.only=function(a){return new L(a,a,!1,!1)};L.bound=function(a,b,c,d){return new L(a,b,c,d)};L.upperBound=function(a,b){return new L(void 0,a,void 0,!!b)};
L.lowerBound=function(a,b){return new L(a,void 0,!!b,void 0)};function Mb(a){return null!=a?null!=a.upper&&null!=a.lower?Nb.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Nb.upperBound(a.upper,a.upperOpen):null!=a.lower?Nb.lowerBound(a.lower,a.lowerOpen):null:null}
function Ob(a){if(a instanceof L)return"";if(null!=a){if(D(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=H(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
function Pb(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==xb(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Qb(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Qb(c.upper,b)))}else d.push(a+" = ?"),e.push(Qb(c.lower,b))}var Nb=u.IDBKeyRange||u.webkitIDBKeyRange||L;function Rb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Sb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Tb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ub(a,b){for(var c=x(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],v(a));c++);return a}var Vb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Wb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Vb.length;f++)c=Vb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Xb(a){if("function"==typeof a.v)return a.v();if(z(a))return a.split("");if(x(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Sb(a)}function Yb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(x(a)||z(a))Ja(a,b,c);else{var d;if("function"==typeof a.F)d=a.F();else if("function"!=typeof a.v)if(x(a)||z(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Tb(a);else d=void 0;for(var e=Xb(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var Zb="StopIteration"in u?u.StopIteration:Error("StopIteration");function $b(){}$b.prototype.next=function(){throw Zb;};$b.prototype.ya=function(){return this};function ac(a){if(a instanceof $b)return a;if("function"==typeof a.ya)return a.ya(!1);if(x(a)){var b=0,c=new $b;c.next=function(){for(;;){if(b>=a.length)throw Zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function bc(a,b){if(x(a))try{Ja(a,b,void 0)}catch(c){if(c!==Zb)throw c;}else{a=ac(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==Zb)throw d;}}};function cc(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)dc(this,arguments[d],arguments[d+1])}else if(a){a instanceof cc?(c=a.F(),d=a.v()):(c=Tb(a),d=Sb(a));for(var e=0;e<c.length;e++)dc(this,c[e],d[e])}}t=cc.prototype;t.j=0;t.Fa=0;t.s=s("j");t.v=function(){ec(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};t.F=function(){ec(this);return this.a.concat()};t.X=function(){return 0==this.j};
t.clear=function(){this.b={};this.Fa=this.j=this.a.length=0};function fc(a,b){return gc(a.b,b)?(delete a.b[b],a.j--,a.Fa++,a.a.length>2*a.j&&ec(a),!0):!1}function ec(a){if(a.j!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];gc(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.j!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],gc(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}t.get=function(a,b){return gc(this.b,a)?this.b[a]:b};
function dc(a,b,c){gc(a.b,b)||(a.j++,a.a.push(b),a.Fa++);a.b[b]=c}t.clone=function(){return new cc(this)};t.ya=function(a){ec(this);var b=0,c=this.a,d=this.b,e=this.Fa,f=this,g=new $b;g.next=function(){for(;;){if(e!=f.Fa)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Zb;var g=c[b++];return a?g:d[g]}};return g};function gc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function hc(a){this.a=new cc;if(a){a=Xb(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function ic(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ha(a):b.substr(0,1)+a}t=hc.prototype;t.s=function(){return this.a.s()};t.add=function(a){dc(this.a,ic(a),a)};t.Ea=function(a){return fc(this.a,ic(a))};t.clear=function(){this.a.clear()};t.X=function(){return this.a.X()};t.contains=function(a){a=ic(a);return gc(this.a.b,a)};t.v=function(){return this.a.v()};t.clone=function(){return new hc(this)};
t.ya=function(){return this.a.ya(!1)};var jc,kc,lc,mc;function nc(){return u.navigator?u.navigator.userAgent:null}mc=lc=kc=jc=!1;var oc;if(oc=nc()){var pc=u.navigator;jc=0==oc.indexOf("Opera");kc=!jc&&-1!=oc.indexOf("MSIE");lc=!jc&&-1!=oc.indexOf("WebKit");mc=!jc&&!lc&&"Gecko"==pc.product}var qc=jc,rc=kc,sc=mc,tc=lc;function uc(){var a=u.document;return a?a.documentMode:void 0}var vc;
a:{var wc="",xc;if(qc&&u.opera)var yc=u.opera.version,wc="function"==typeof yc?yc():yc;else if(sc?xc=/rv\:([^\);]+)(\)|;)/:rc?xc=/MSIE\s+([^\);]+)(\)|;)/:tc&&(xc=/WebKit\/(\S+)/),xc)var zc=xc.exec(nc()),wc=zc?zc[1]:"";if(rc){var Ac=uc();if(Ac>parseFloat(wc)){vc=String(Ac);break a}}vc=wc}var Bc={};
function Cc(a){var b;if(!(b=Bc[a])){b=0;for(var c=String(vc).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=l.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==n[2].length)<(0==p[2].length)?-1:(0==n[2].length)>(0==p[2].length)?1:0)||(n[2]<p[2]?-1:n[2]>p[2]?1:0)}while(0==b)}b=Bc[a]=0<=b}return b}var Dc=u.document,Ec=Dc&&rc?uc()||("CSS1Compat"==Dc.compatMode?parseInt(vc,10):5):void 0;function Fc(a){return Gc(a||arguments.callee.caller,[])}
function Gc(a,b){var c=[];if(0<=H(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Hc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Hc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Gc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Hc(a){if(Ic[a])return Ic[a];a=String(a);if(!Ic[a]){var b=/function ([^\(]+)/.exec(a);Ic[a]=b?b[1]:"[Anonymous]"}return Ic[a]}var Ic={};function Jc(a,b,c,d,e){"number"==typeof e||Kc++;this.g=d||oa();this.f=a;this.e=b;this.d=c;delete this.b;delete this.a}Jc.prototype.b=null;Jc.prototype.a=null;var Kc=0;function Lc(a){this.f=a}Lc.prototype.d=null;Lc.prototype.b=null;Lc.prototype.e=null;Lc.prototype.a=null;function Mc(a,b){this.name=a;this.value=b}Mc.prototype.toString=s("name");var Nc=new Mc("SHOUT",1200),Oc=new Mc("SEVERE",1E3),Pc=new Mc("WARNING",900),Qc=new Mc("INFO",800),Rc=new Mc("CONFIG",700),Sc=new Mc("FINE",500),Tc=new Mc("FINER",400),Uc=new Mc("FINEST",300),Vc=[new Mc("OFF",Infinity),Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,new Mc("ALL",0)],Wc=null;Lc.prototype.getName=s("f");
function Xc(a){if(a.b)return a.b;if(a.d)return Xc(a.d);Ha("Root logger has no level set.");return null}Lc.prototype.log=function(a,b,c){if(a.value>=Xc(this).value)for(a=this.g(a,b,c),b="log:"+a.e,u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b)),u.msWriteProfilerMark&&u.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.d}};
Lc.prototype.g=function(a,b,c){var d=new Jc(a,String(b),this.f);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=ca("window.location.href");if(z(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var l,m,n=!1;try{l=c.lineNumber||c.fd||"Not available"}catch(p){l="Not available",n=!0}try{m=c.fileName||c.filename||c.sourceURL||u.$googDebugFname||h}catch(q){m="Not available",n=!0}g=!n&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:l,fileName:m,stack:c.stack||"Not available"}}e="Message: "+ua(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ua(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ua(Fc(f)+"-> ")}catch(r){e="Exception trying to expose exception! You win, we lose. "+r}d.a=e}return d};function Yc(a,b){a.log(Oc,b,void 0)}function M(a,b){a.log(Pc,b,void 0)}function N(a,b){a.log(Sc,b,void 0)}
function O(a,b){a.log(Tc,b,void 0)}function P(a,b){a.log(Uc,b,void 0)}var Zc={},$c=null;function ad(){$c||($c=new Lc(""),Zc[""]=$c,$c.b=Rc)}function bd(){ad();return $c}function R(a){ad();var b;if(!(b=Zc[a])){b=new Lc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=R(a.substr(0,c));c.e||(c.e={});c.e[d]=b;b.d=c;Zc[a]=b}return b};function cd(a,b,c){I.call(this,0,c);this.e=a;this.d=[];this.b=[];this.u=[];this.a=null;this.fa="";this.i=0}G(cd,I);t=cd.prototype;t.fa="";t.c=R("ydn.db.Request");function dd(a,b,c){a.a=b;a.fa=c;O(a.c,a+" BEGIN");if(b){for(c=0;c<a.b.length;c++)a.b[c][0].call(a.b[c][1],b);a.b.length=0}O(a.c,a+" END")}function ed(a){var b=new cd(a.e);a.i++;dd(b,a.a,a.fa+"C"+a.i);return b}t.Sb=s("e");t.Dc=function(){return!!this.a};
t.abort=function(){if(this.a)if(O(this.c,this+" aborting"),ga(this.a.abort))this.a.abort();else if(ga(this.a.executeSql))this.a.executeSql("ABORT",[],k(),aa(!0));else throw new fd;else throw new gd("No active transaction");};function S(a,b,c){var d=a.u.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){S(a,b,c)}):c?a.l(b):a.n(b)}function hd(a,b,c){a.u.push([b,c])}function T(a,b,c){a.a?b.call(c,a.a):a.b.push([b,c])}t.Uc=function(a,b){this.d.push([a,b]);return this};
function id(a,b){for(var c=0;c<a.d.length;c++)a.d[c][0].call(a.d[c][1],b)}t.n=function(a){O(this.c,this+" SUCCESS");cd.k.n.call(this,a);jd(this)};t.l=function(a){O(this.c,this+" ERROR");cd.k.l.call(this,a);jd(this)};function jd(a){a.d.length=0;a.a=null;a.fa=a.fa}function U(a){var b="";a.fa&&(b=a.a?"*":"",b="["+a.fa+b+"]");return a.e+b}function kd(a,b){var c=new cd(a);S(c,b);return c}t.Vc=function(){return this};t.toString=function(){return"Request:"+U(this)};
t.toJSON=function(){var a=(this.fa||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.e?this.e.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};function V(a){qa.call(this,a);this.name="ydn.error.ArgumentException"}G(V,qa);function fd(a){qa.call(this,a);this.name="ydn.error.NotSupportedException"}G(fd,qa);function ld(a){qa.call(this,a);this.name="ydn.error.NotImplementedException"}G(ld,qa);function md(a){qa.call(this,a);this.name="ydn.error.InvalidOperationException"}G(md,qa);
function nd(a){Error.captureStackTrace?Error.captureStackTrace(this,nd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}G(nd,Error);nd.prototype.name="ydn.error.InternalError";function od(a,b,c,d,e,f){v(e)||(e=w(a)?a.join(", "):a);if(null!=a&&!z(a)&&!x(a))throw new V("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);w(a)&&Object.freeze&&Object.freeze(a);!v(a)&&v(e)&&(a=e);this.keyPath=a;this.g=x(this.keyPath);this.a=e;this.type=pd(b);if(v(b)){if(!v(this.type))throw new V("type invalid in index: "+this.a);if(w(this.keyPath))throw new V('composite key for store "'+this.a+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.h=z(this.type)?
this.type:qd;this.e=z(e)?e:w(a)?this.keyPath.join(","):a;this.d=Fa(this.e);this.b=this.g||this.multiEntry?null:this.keyPath.split(".");this.f=f||null}function rd(a,b){if(null!=b){if(x(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=lb(b,a.keyPath[d]);c[d]=f}return c}return lb(b,a.keyPath)}}function sd(a,b,c){for(var d=0;d<a.b.length;d++)d==a.b.length-1?b[a.b[d]]=c:D(b[a.b[d]])||(b[a.b[d]]={})}var qd="TEXT";
function Qb(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:nb(a)}function td(a,b){return"DATE"==b?new Date(a):v(b)?a:rb(a)}var ud=["BLOB","DATE","INTEGER","NUMERIC",qd];function pd(a){if(z(a))return a=H(ud,a),ud[a]}t=od.prototype;t.getName=s("a");t.toJSON=function(){return{name:this.a,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
t.clone=function(){var a=w(this.keyPath)?Sa(this.keyPath):this.keyPath;return new od(a,this.type,this.unique,this.multiEntry,this.a,this.f)};function vd(a,b){return null!=a||null!=b?null!=a?null!=b?x(a)&&x(b)?Ua(a,b)?null:"expect: "+a+", but: "+b:wd(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
t.hint=function(a){if(!a)return this;var b=w(this.keyPath)?Sa(this.keyPath):this.keyPath,c=this.type;v(a.type)||"TEXT"!=c||(c=void 0);return new od(b,c,this.unique,this.multiEntry,a.a)};function xd(a,b){a.f=b}t.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.b&&1<this.b.length&&(a+="Compound");return a+"Index:"+this.a};function yd(a,b,c,d,e,f,g){this.e=a;if(!z(this.e))throw new V("store name must be a string");this.keyPath=v(b)?b:null;this.p=x(this.keyPath);if(null!==this.keyPath&&!z(this.keyPath)&&!this.p)throw new V("keyPath must be a string or array");this.d=c;var h;if(null!=d){h=pd(d);if(!v(h))throw new V('type "'+d+'" for primary key in store "'+this.e+'" is invalid.');if(this.p)throw new V('composite key for store "'+this.e+'" must not specified type');}this.type=null!=h?h:this.d?"INTEGER":void 0;this.g=z(this.keyPath)?
this.keyPath.split("."):[];this.a=e||[];this.ga=!!f;this.Bb=!!g;this.u=z(this.type)?this.type:qd;this.h=w(this.keyPath)?this.keyPath.join(","):z(this.keyPath)?this.keyPath:"_ROWID_";this.f=Fa(this.h);this.i=[]}t=yd.prototype;t.ga=!1;t.Bb=!1;t.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.e,keyPath:this.keyPath,autoIncrement:this.d,type:this.type,indexes:a}};
function zd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==H(b,c))throw new V('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(w(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==H(f,g))throw new V("Unknown field: "+g+" in "+W(e));e=new od(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);v(e.keyPath)&&
e.keyPath===a.keyPath||b.push(e)}return new yd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Ad(a,b,c,d,e,f,g){a=Bd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Ca;a.A&&(b+=" WHERE "+a.A);a.group&&(b+=" GROUP BY "+a.group);a.ja&&(b+=" ORDER BY "+a.ja);return b}
function Bd(a,b,c,d,e,f,g){var h={select:"",Ca:"",A:"",group:"",ja:""},l=a.h,m=a.f,n=null;d!==l&&z(d)&&(n=Cd(a,d));var p=!!n,q=d||l,r=Fa(q),y=p?n.type:a.type,A=p&&n.multiEntry;h.Ca=Dd(a);6===c?h.select="COUNT("+m+")":3===c||1===c||2===c?(h.select=m,null!=d&&d!=l&&(h.select+=", "+r)):h.select="*";d=g?"DISTINCT ":"";l=[];A?(A=Fa("ydn.db.me:"+a.getName()+":"+n.getName()),h.select=6===c?"COUNT("+d+A+"."+r+")":3===c||1===c||2===c?"DISTINCT "+Dd(a)+"."+m+", "+A+"."+r+" AS "+q:"DISTINCT "+Dd(a)+".*, "+A+
"."+r+" AS "+q,h.Ca=A+" INNER JOIN "+Dd(a)+" USING ("+m+")",null!=e&&(Pb(A+"."+r,y,e,l,b),0<l.length&&(h.A=h.A?h.A+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(Pb(r,y,e,l,b),0<l.length&&(h.A=h.A?h.A+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&g&&(h.group=r);a=f?"DESC":"ASC";h.ja=r+" "+a;p&&(h.ja+=", "+m+" "+a);return h}
function Ed(a,b,c,d,e,f,g,h){var l,m,n,p;null!=e?(l=e.lower,m=e.upper,n=e.lowerOpen,p=e.upperOpen,f?null!=m?(e=xb(h,m),-1==e?(m=h,p=!0):0==e&&(p=!0)):(m=h,p=!0):null!=l?(e=xb(h,l),1==e?(l=h,n=!0):0==e&&(n=!0)):(l=h,n=!0)):f?(m=h,p=!0):(l=h,n=!0);e=new L(l,m,!!n,!!p);d=d?Cd(a,d):null;b=Bd(a,c,b,d?d.e:a.h,e,f,g);b="SELECT "+b.select+" FROM "+b.Ca+(b.A?" WHERE "+b.A:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.ja;d&&(b+=", "+a.f+(f?"DESC":"ASC"));return b}
function Fd(a,b,c,d,e,f,g,h,l){var m=Cd(a,d),n=m.e;d=m.d;var p=a.f,q;q=(h?" <":" >")+" ";m=Qb(f,m.type);g=Qb(g,a.type);var r="";e?(a=Bd(a,c,b,n,e,h,l),a.A+=" AND ",r=d+q+"?",c.push(m)):(e=h?L.upperBound(f,!0):L.lowerBound(f,!0),a=Bd(a,c,b,n,e,h,l),r=a.A,a.A="");a.A+="("+r+" OR ("+d+" = ? AND "+p+q+"?))";c.push(m);c.push(g);return"SELECT "+a.select+" FROM "+a.Ca+" WHERE "+a.A+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.ja}t.clone=function(){return zd(this.toJSON())};
t.index=function(a){return this.a[a]||null};function Cd(a,b){return Na(a.a,function(a){return a.getName()==b})}function Gd(a){for(var b=0;b<a.a.length;b++)if(!vd(a.a[b].keyPath,"updated.$t"))return a.a[b];return null}function Hd(a,b){return b===a.keyPath?!0:La(a.a,function(a){return a.getName()==b})}function Dd(a){return Fa(a.e)}
t.hint=function(a){if(!a)return this;var b=this.d,c=w(this.keyPath)?Sa(this.keyPath):this.keyPath,d=this.type,e=Ka(this.a,function(a){return a.clone()});v(a.type)||"TEXT"!=d||(d=void 0);w(a.keyPath)&&z(c)&&c==a.keyPath.join(",")&&(c=Sa(a.keyPath));for(var f=0,g=a.a.length;f<g;f++)if(a.a[f].g)for(var h=a.a[f].getName(),l=e.length-1;0<=l;l--)if(0<=h.indexOf(e[l].getName())){e[l]=a.a[f].clone();break}for(f=0;f<e.length;f++)(g=Cd(a,e[f].getName()))&&(e[f]=e[f].hint(g));return new yd(a.e,c,b,d,e)};
t.getName=s("e");function Id(a){return!!a.keyPath}function Jd(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.p){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(lb(b,a.keyPath[d]));return c}if(a.keyPath)return Ub(b,a.g)}function Kd(a,b,c){for(var d=0;d<a.g.length;d++){var e=a.g[d];if(d==a.g.length-1){b[e]=c;break}v(b[e])||(b[e]={});b=b[e]}}
function Ld(a,b,c){var d=[],e=[];c=v(c)?c:Jd(a,b);v(c)&&(e.push(a.f),d.push(Qb(c,a.type)));for(var f=0;f<a.a.length;f++){var g=a.a[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var h=rd(g,b);null!=h&&(d.push(Qb(h,g.type)),e.push(g.d))}}a.Bb||(d.push(W(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Fc:e,Oc:a,O:d,key:c}}
function Nd(a,b){if(!b)return"missing store: "+a.e;if(a.e!=b.e)return"store name, expect: "+a.e+", but: "+b.e;var c=vd(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(v(a.d)&&v(b.d)&&a.d!=b.d)return"autoIncrement, expect:  "+a.d+", but: "+b.d;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(v(a.type)&&v(b.type)&&(x(a.type)?!Ua(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=Cd(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.a!=d.a)e="name, expect: "+e.a+", but: "+d.a;else{var f=vd(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:v(e.type)&&v(d.type)&&(x(e.type)?!Ua(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.a;if(0<e.length)return'index "'+
a.a[c].getName()+'" '+e}return""}function Od(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.f){var f=d.f(e),g=typeof f;if("string"==g||"number"==g||"array"==g||"undefined"==g||f instanceof Date){for(g=0;g<d.b.length-1;g++)D(e[d.b[g]])||(e[d.b[g]]={});e[d.b[d.b.length-1]]=f}}}}function Pd(a,b){a.i.push(b)}function Qd(a,b,c){for(var d=0;d<a.i.length;d++)if(void 0!==d)a.i[d](b,c)}t.toString=function(){return"Store:"+this.e+"["+this.a.length+"index]"};R("ydn");function Rd(a){return!z(a)||sa(a)?{}:JSON.parse(a)}function Sd(a){var b;try{b=W(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function W(a){return JSON.stringify(a,void 0,void 0)};function Td(a,b){if(!a||sa(a))throw new V("store_name must be provided for primary full text index");if(!b||sa(b))throw new V("index_name must be provided for primary full text index");this.a=a};function Ud(a,b,c){this.name=a;this.a=b;this.b=c||"";if(-1==["","en","fr"].indexOf(this.b))throw new V('Unsupported lang "'+c+" for full text search index "+a);}Ud.prototype.getName=s("name");Ud.prototype.count=function(){return this.a.length};Ud.prototype.index=function(a){return this.a[a]};
function Vd(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==H(b,c))throw new V("Unknown field: "+c+" in "+W(a));if(!w(a.sources))throw new V("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==H(b,c))throw new V("Unknown field: "+c+" in "+Sd(a));return new Td(a.storeName,a.keyPath)});return new Ud(a.name,
b,a.lang)};function Wd(a,b){var c,d,e=b;if(D(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==H(c,f))throw new V("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!w(g))throw new V("stores must be array");for(f=0;f<g.length;f++){var h=zd(g[f]);if(-1!=Oa(e,function(a){return a.name==h.getName()}))throw new V('duplicate store name "'+h.getName()+'".');e.push(h)}}else z(a)?c=0==a.length?void 0:parseFloat(a):C(a)&&(c=a);if(v(c)){if(!C(c)||0>c)throw new V("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(v(b)&&(!w(b)||0<b.length&&!(b[0]instanceof yd)))throw new V("stores");this.version=c;this.d=!v(this.version);this.a=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Vd(d.fullTextCatalogs[f]),c[f]=e,X(this,e.getName())||(g=[new od("k",qd),new od("v",qd)],e=new yd(e.getName(),"id",!1,void 0,g),this.a.push(e));this.e=c}
Wd.prototype.toJSON=function(){var a=Ka(this.a,function(a){return a.toJSON()}),b={};b.stores=a;v(this.version)&&(b.version=this.version);return b};Wd.prototype.d=!1;Wd.prototype.b=aa(!1);function Xd(a){return Ka(a.a,function(a){return a.getName()})}Wd.prototype.count=function(){return this.a.length};function X(a,b){return Na(a.a,function(a){return a.getName()==b})}function Yd(a,b){return La(a.a,function(a){return a.getName()==b})}
function Zd(a,b,c){if(!b||a.a.length!=b.a.length)return"Number of store: "+a.a.length+" vs "+b.a.length;for(var d=0;d<a.a.length;d++){var e=X(b,a.a[d].getName()),e=e&&c?e.hint(a.a[d]):e,e=Nd(a.a[d],e);if(0<e.length)return'store: "'+a.a[d].getName()+'" '+e}return""};function $d(a,b){Wd.call(this,a,b)}G($d,Wd);$d.prototype.b=aa(!0);function ae(a,b){a.a.push(b)};function be(a){Error.captureStackTrace?Error.captureStackTrace(this,be):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}G(be,Error);G(be,Error);function ce(a){Error.captureStackTrace?Error.captureStackTrace(this,ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}G(ce,Error);ce.prototype.name="ydn.InternalError";
function de(a){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}G(de,Error);de.prototype.name="ydn.error.ConstraintError";function ee(a){Error.captureStackTrace?Error.captureStackTrace(this,ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}G(be,Error);function wd(a,b){var c;c=c||{};if(null!=a&&null!=b){if(x(a)&&x(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Na(b,function(b){return wd(b,a[d])}))return!1;return!0}if(x(a))return 1==a.length&&wd(a[0],b);if(x(b))return 1==b.length&&wd(b[0],a);if(D(a)&&D(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=wd(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=wd(a[e],b[e]),!f))return!1;return!0}return a===b}return!1};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function fe(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==H(d,e))throw new V('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!w(c.mechanisms))throw new V("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=H(ge,c.mechanisms[e])))throw new V('Invalid mechanism "'+c.mechanisms[e]+'"');}this.G=c.mechanisms||ge;this.u=c.size;this.L=v(c.connectionTimeout)?
c.connectionTimeout:3E4;this.vc=v(c.vc)?c.vc:!1;this.b=null;this.e=[];this.eb=!1;if(b instanceof Wd)c=b;else if(D(b))for(c=c.autoSchema||!v(b.stores)?new $d(b):new Wd(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=X(c,b.stores[e].name);b.stores[e].Sync&&this.jc(f,b.stores[e].Sync)}else c=new $d;this.d=c;v(a)&&this.p(a);this.g=null;this.f=new I}fe.prototype.c=R("ydn.db.con.Storage");
fe.prototype.T=function(a){if(v(a)){var b=function(b){a(b.toJSON())};if(this.b)this.b.P(b);else{var c=this;this.Pa(function(a){c.b.P(b,a)},null,ib)}}return this.d?this.d.toJSON():null};fe.prototype.p=function(a){if(this.b)throw new md("Already connected with "+this.h);this.h=a;he(this)};fe.prototype.getName=s("h");var ge="indexeddb websql localstorage sessionstorage userdata memory".split(" ");t=fe.prototype;t.Qb=aa(null);
function he(a){function b(b,e){b?(P(a.c,a+": ready."),a.pc=NaN,d.Ia=function(b){a.I(new Fb(a,b))},d.ib=function(b){a.I(new Gb(a,b));a.b=null},d.jb=function(b){a.I(b)},setTimeout(function(){ie(a,e);je(a)},10),c.n(e)):(M(a.c,a+": database connection fail "+e.name),setTimeout(function(){ie(a,new Gb(a,e));if(a.e){a.c.log(Qc,"Purging "+a.e.length+" transactions request.",void 0);for(var b;b=a.e.shift();)b.K&&b.K("error",e)}},10),c.l(e))}for(var c=new I,d=null,e=a.G,f=0;f<e.length;f++){var g=e[f].toLowerCase();
if(d=a.Qb(g)){d=a.Qb(g);break}}null===d?(e=new de("No storage mechanism found."),b(!1,new Gb(a,e))):d.ta(a.h,a.d).o(function(a){this.b=d;b(!0,new Eb("ready",this,parseFloat(d.yb()),parseFloat(a),null))},function(a){M(this.c,this+": opening fail");b(!1,a)},a)}t.Qa=function(){if(this.b)return this.b.ua()};t.Kc=function(a,b){this.f.Q(a,b)};function ie(a,b){b instanceof Fb?a.f.l(b.error):a.f.n();a.I(b)}function ke(a){return!!a.b&&a.b.zb()}
t.Wc=function(){this.b&&(this.b.xb(),this.b=null,P(this.c,this+" closed"))};t.pc=NaN;function je(a){var b=a.e.shift();b&&(P(a.c,"pop tx queue["+(a.e.length+1)+"]"),a.Pa(b.Ya,b.Nc,b.mode,b.K));a.pc=oa()}function le(a,b,c,d,e){P(a.c,"push tx queue["+a.e.length+"]");a.e.push({Ya:b,Nc:c,mode:d,K:e});100<a.e.length&&0==a.e.length%100&&M(a.c,"Transaction queue stack size is "+a.e.length+". It is too large, possibility due to incorrect usage.")}t.eb=!1;
t.Pa=function(a,b,c,d){var e=b;if(z(b))e=[b];else if(null!=b)if(x(b)){if(0==b.length)throw new V("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!z(b[f]))throw new V("store name at "+f+" must be string but found "+typeof b[f]);}else throw new V("store names must be an array");else e=null;if(this.b&&this.b.zb()&&!this.eb){var g=this,h=v(c)?c:ib;h==jb&&(this.eb=!0);this.b.Xa(function(b){a(b);a=null},e,h,function(a,b){ga(d)&&(d(a,b),d=void 0);h==jb&&(g.eb=!1);je(g)})}else le(this,
a,e,c,d)};t.jc=function(a){M(this.c,"Synchronization option for "+a.getName()+" ignored.")};t.I=k();t.toString=function(){return"Storage:"+this.b};fe.prototype.close=fe.prototype.Wc;fe.prototype.getType=fe.prototype.Qa;fe.prototype.getName=fe.prototype.getName;fe.prototype.getSchema=fe.prototype.T;fe.prototype.onReady=fe.prototype.Kc;fe.prototype.setName=fe.prototype.p;fe.prototype.transaction=fe.prototype.Pa;pa("ydn.db.version","0.8.7");pa("ydn.db.cmp",xb);pa("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<yb.length;d++){var e=yb[d](a,b);e&&(c=e)}return c||kd("IDBVersionChangeEvent ",null)});Eb.prototype.name=Eb.prototype.name;
Eb.prototype.getVersion=Eb.prototype.Xc;Eb.prototype.getOldVersion=Eb.prototype.Ic;Eb.prototype.getOldSchema=Eb.prototype.Hc;Fb.prototype.getError=Fb.prototype.g;cd.prototype.abort=cd.prototype.abort;cd.prototype.canAbort=cd.prototype.Dc;cd.prototype.progress=cd.prototype.Uc;cd.prototype.promise=cd.prototype.Vc;function me(a){Error.captureStackTrace?Error.captureStackTrace(this,me):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}G(me,Error);me.prototype.name="ConstraintError";function ne(a){Error.captureStackTrace?Error.captureStackTrace(this,ne):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}G(ne,Error);
function oe(a){Error.captureStackTrace?Error.captureStackTrace(this,oe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}G(oe,Error);oe.prototype.name="ydn.db.VersionError";function gd(a){Error.captureStackTrace?Error.captureStackTrace(this,gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}G(gd,Error);
function pe(a){Error.captureStackTrace?Error.captureStackTrace(this,pe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}G(pe,Error);function qe(a){Error.captureStackTrace?Error.captureStackTrace(this,qe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}G(qe,Error);qe.prototype.name="NotFoundError";
function re(a,b){Error.captureStackTrace?Error.captureStackTrace(this,re):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}G(re,Error);function se(a,b){Error.captureStackTrace?Error.captureStackTrace(this,se):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}G(se,Error);
function te(a){Error.captureStackTrace?Error.captureStackTrace(this,te):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}G(te,Error);function ue(a,b){this.a=b}ue.prototype.c=R("ydn.db.crud.req.RequestExecuto");ue.prototype.toString=aa("RequestExecutor");function ve(a){if(a)if(ga(a.abort))a.abort();else if(ga(a.executeSql))a.executeSql("ABORT",[],k(),aa(!0));else throw new fd;else throw new gd("No active transaction");};function we(a){this.e=a;this.a=null;this.b=0}we.prototype.c=R("ydn.db.tr.Mutex");we.prototype.N=null;we.prototype.K=null;we.prototype.toString=function(){return"Mutex:"+("B"+this.e+"T"+this.b)+(this.a?"*":"")};function xe(a,b,c,d,e,f){this.h=a;this.d=0;this.p=d;this.g=c||"single";this.b=[];this.e=[];this.f=null;this.a=new we(b);this.Fb=f||0;this.i=!1}t=xe.prototype;t.Fb=0;t.c=R("ydn.db.tr.Serial");t.Sa=function(){return this.a.b};
function ye(a,b,c){if("multi"==a.g)a:if(a=a.a,!a.N||!a.mode||c!=a.mode&&(a.mode!=J||c!=ib)||b.length>a.N.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.N.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.g)a:if(a=a.a,a.N&&a.mode&&c==a.mode&&a.N.length==b.length){for(c=0;c<b.length;c++)if(-1==a.N.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.g?!0:!1;return b}t.m=s("h");t.type=function(){return this.h.Qa()};
function ze(a){var b=0<a.b.length?a.b[0].N:null,c=0<a.b.length?a.b[0].mode:null;return null!=b&&null!=c?ye(a,b,c):!1}function Ae(a,b,c,d,e){P(a.c,"push tx queue["+a.b.length+"]");a.b.push({Ya:b,N:c,mode:d,K:e})}t.abort=function(){O(this.c,this+": aborting");ve(this.f)};
t.ka=function(a,b,c,d){var e=z(b)?[b]:b;if(x(e)){if(0==e.length)throw new V("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!z(e[f]))throw new V("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.p&&!(0<=H(this.p,e[f])))throw new V('store name "'+f+e[f]+'" in scope of '+this);}}else throw new V("store names must be an array");var g=v(c)?c:ib,h=this;if(this.a.a||!ke(this.m())&&this.i)Ae(this,a,b,g,d);else{var l=this.H();d&&this.e.push(d);
if(this.Fb&&this.Sa()>=this.Fb)throw new md("Exceed maximum number of transactions of "+this.Fb);this.i=!0;this.h.Pa(function(c){var d=h.a;d.a=c;d.d=!1;d.N=b;d.mode=g;d.b++;d.K=null;l=h.H();N(h.c,l+" BEGIN "+W(b)+" "+g);a(h);for(a=null;ze(h);)c=h.b.shift(),c.K&&h.e.push(c.K),P(h.c,"pop tx queue"+(h.b.length+1)+" reusing T"+h.Sa()),c.Ya()},e,g,function(a,b){N(h.c,l+" "+a);var c=h.a;c.a?(c.a=null,c.N=null,c.mode=null,ga(c.K)&&c.K(a,b),c.K=null):M(c.c,c+" has no TX to be unlocked for "+a);for(c=0;c<
h.e.length;c++)(0,h.e[c])(a,b);h.e.length=0;(c=h.b.shift())&&h.ka(c.Ya,c.N,c.mode,c.K);h.d=0})}};t.H=function(){return"B"+this.a.e+"T"+this.a.b};t.request=function(a,b,c,d){var e=new cd(a);a=c||ib;var f=this;this.a.a&&!this.a.d&&ye(this,b,a)?(b=this.a.a,this.d++,dd(e,b,this.H()+"R"+this.d),d&&this.e.push(d)):f.ka(function(){var a=f.a.a;f.d++;dd(e,a,f.H()+"R"+f.d)},b,a,d);return e};
t.wa=function(a,b,c,d,e){d=d||ib;var f=this,g;if(f.a.a&&!f.a.d&&ye(this,c,d)){var h=f.a.a;f.d++;g=f.H()+"R"+f.d;O(f.c,g+" BEGIN");b(h,g,function(b,c){f.f=h;c?(O(f.c,g+" ERROR"),a.l(b)):(O(f.c,g+" SUCCESS"),a.n(b));f.f=null});O(f.c,g+" END");b=null}else f.ka(function(){var c=f.a.a;f.d++;g=f.H()+"R"+f.d;O(f.c,g+" BEGIN");b(c,g,function(b,d){f.f=c;d?(O(f.c,g+" ERROR"),a.l(b)):(O(f.c,g+" SUCCESS"),a.n(b));f.f=null});O(f.c,g+" END");b=null},c,d,e)};t.getName=function(){return this.m().getName()};
t.toString=function(){return"Serial:"+this.H()+(this.f?"*":"")};function Be(a,b){xe.call(this,a,b)}G(Be,xe);Be.prototype.c=R("ydn.db.tr.AtomicSerial");Be.prototype.request=function(a,b,c){var d,e,f,g=Be.k.request.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new te;S(g,c,!0)}});hd(g,function(a,b,c){f=b;e=a;d=c});return g};
Be.prototype.wa=function(a,b,c,d,e){var f,g,h=new I;h.o(function(a){g=!1;f=a},function(a){g=!0;f=a});Be.k.wa.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.l(c);else if(!0===g)a.l(f);else if(!1===g)a.n(f);else{var d=new te;a.l(d)}e&&(e(b,c),e=void 0)})};Be.prototype.toString=function(){return"Atomic"+Be.k.toString.call(this)};function Ce(a,b,c,d){this.f=a;this.a=b;this.b=c;this.d=d;this.e=null}t=Ce.prototype;t.c=R("ydn.db.tr.DbOperator");t.yc=function(){return this.b.Sa()};t.abort=function(){this.b.abort()};function Y(a){if(!a.e){var b;b=a.f;var c=b.Qa();if("indexeddb"==c)b=new De(0,b.d);else if("websql"==c)b=new Ee(0,b.d);else if("memory"==c||"localstorage"==c||"sessionstorage"==c)b=new Fe(0,b.d);else throw new nd("No executor for "+c);a.e=b}return a.e}t.m=s("f");
function Ge(a,b){var c=a.m(),d=b instanceof yd?b:zd(b),e=b.name,f=X(c.d,e);if(0==Nd(d,f).length)bb(!1);else if(f=f?"update":"add",c.d instanceof $d)ae(c.d,d),c.b?(c.b.xb(),c.b=null,he(c)):bb(!1);else throw new de("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}t.toString=function(){return"TxStorage:"+this.m().getName()};function He(a,b,c,d){Ce.call(this,a,b,c,d)}G(He,Ce);t=He.prototype;t.c=R("ydn.db.crud.DbOperator");
t.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(w(a)){if(v(c)||v(b))throw new V("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!Yd(this.a,f[l]))throw new V('store name "'+f[l]+'" at '+l+" not found.");O(this.c,"countStores: "+W(f));e=this.b.request("count",f);T(e,function(){Y(this).Wa(e,f)},this)}else if(z(a)){l=X(this.a,a);if(!l)throw new V('store name "'+a+'" not found.');if(v(d)&&!fa(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(z(b))if(g=
b,D(c)){var m=Ob(c);if(m)throw new V("invalid key range: "+Sd(c)+" "+m);h=Mb(c)}else{if(null!=c)throw new V("invalid key range: "+Sd(c)+" of type "+typeof c);h=null}else if(D(b)||null==b)if(D(b)){if(m=Ob(b))throw new V("invalid key range: "+Sd(b)+" "+m);h=Mb(b)}else{if(null!=b)throw new V("key range must be  an object but found "+Sd(b)+" of type "+typeof b);h=null}else throw new V('invalid second argument for count "'+Sd(c)+'" of type '+typeof b);O(this.c,"countKeyRange: "+a+" "+(g?g:"")+W(h));e=
this.b.request("count",f);Qd(l,e,arguments);T(e,function(){Y(this).Pb(e,f[0],h,g,!!d)},this)}else throw new V("Invalid store name or store names.");else M(this.c,"count method requires store name(s)"),l=Xd(this.a),e=this.b.request("count",l),hd(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),T(e,function(){Y(this).Wa(e,f)},this);return e};
t.get=function(a,b){var c;if(a instanceof K){var d=a,e=d.a,f=X(this.a,e);if(!f){if(this.a.b())return kd("get",void 0);throw new V("Store: "+e+" not found.");}var g=d.id;O(this.c,"getByKey: "+e+":"+g);c=this.b.request("get",[e]);Qd(f,c,arguments);T(c,function(){Y(this).$a(c,e,g)},this)}else if(z(a)&&v(b)){var h=a,f=X(this.a,h);if(!f){if(this.a.b())return kd("get",void 0);throw new V('Store name "'+h+'" not found.');}var l=b;O(this.c,"getById: "+h+":"+l);c=this.b.request("get",[h]);Qd(f,c,arguments);
T(c,function(){Y(this).$a(c,h,l)},this)}else throw new V("get require valid input arguments.");return c};
t.keys=function(a,b,c,d,e,f,g){var h,l,m=null,n=!1,p=!1,q=a,r=X(this.a,q);if(!z(q))throw new V("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.a.b()){if(!r)throw new V('store name "'+q+'" not found.');if(z(b)&&!Cd(r,b))throw new V('index "'+b+'" not found in store "'+q+'".');}if(this.a.b()&&!r)return kd("keys",[]);var y;if(z(b)){var A=b,B=Ob(c);if(B)throw new V("invalid key range: "+c+" "+B);m=Mb(c);if(C(d))h=d;else{if(v(d))throw new V("limit must be a number");h=100}if(C(e))l=
e;else{if(v(e))throw new V("offset must be a number");l=0}if(v(f))if(fa(f))n=f;else throw new V("reverse must be a boolean");if(v(g))if(fa(g))p=g;else throw new V("unique must be a boolean");O(this.c,"keysByIndexKeyRange: "+q);y=this.b.request("keys:iter:index",[q]);Qd(r,y,arguments);T(y,function(){Y(this).list(y,2,q,A,m,n,h,l,p)},this)}else{if(D(b)){if(B=Ob(b))throw new V("invalid key range: "+Sd(b)+" "+B);m=Mb(b)}else{if(null!=b)throw new TypeError("invalid key range: "+Sd(b)+" of type "+typeof b);
m=null}if(C(c))h=c;else{if(v(c))throw new V("limit must be a number");h=100}if(C(d))l=d;else{if(v(d))throw new V("offset must be a number");l=0}if(v(e))if(fa(e))n=e;else throw new V("reverse must be a boolean");O(this.c,"keysByKeyRange: "+q);y=this.b.request("keys",[q]);Qd(r,y,arguments);T(y,function(){Y(this).list(y,2,q,null,m,n,h,l,!1)},this)}return y};
t.O=function(a,b,c,d,e,f){var g,h,l,m=!1;if(z(a)){var n=a,p=X(this.a,n);if(!p){if(this.a.b())return kd("get",[]);throw new qe(n);}if(w(b)){if(v(c)||v(d))throw new V("too many input arguments");var q=b;O(this.c,"listByIds: "+n+" "+q.length+" ids");g=this.b.request("values:array",[n]);Qd(p,g,arguments);T(g,function(){Y(this).Yb(g,n,q)},this)}else if(z(b)){var r=b;if(!Hd(p,r))throw new V('index "'+r+'" not found in store "'+n+'"');var y=Ob(c);if(y)throw new V("invalid key range: "+c+" "+y);var A=Mb(c);
if(v(d))if(C(d))h=d;else throw new V("limit must be a number.");else h=100;if(v(e))if(C(e))l=e;else throw new V("offset must be a number.");else l=0;if(fa(f))m=f;else if(v(f))throw new V("reverse must be a boolean, but "+f);O(this.c,"listByIndexKeyRange: "+n+":"+r);g=this.b.request("values:iter:index",[n]);Qd(p,g,arguments);T(g,function(){Y(this).list(g,4,n,r,A,m,h,l,!1)},this)}else{A=null;if(D(b)){if(y=Ob(b))throw new V("invalid key range: "+b+" "+y);A=Mb(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+
Sd(b)+'" of type '+typeof b);if(v(c))if(C(c))h=c;else throw new V("limit must be a number, but "+c+" is "+typeof c);else h=100;if(v(d))if(C(d))l=d;else throw new V("offset must be a number, but "+d+" is "+typeof d);else l=0;if(v(e))if(fa(e))m=e;else throw new V("reverse must be a boolean, but "+e+" is "+typeof e);O(this.c,(A?"listByKeyRange: ":"listByStore: ")+n);g=this.b.request("values",[n]);Qd(p,g,arguments);T(g,function(){Y(this).list(g,4,n,null,A,m,h,l,!1)},this)}}else if(w(a))if(a[0]instanceof
K){for(var p=[],B=a,y=0;y<B.length;y++){var E=B[y].a;if(!Yd(this.a,E)){if(this.a.b())return p=[],p[B.length-1]=void 0,kd("get",p);throw new V("Store: "+E+" not found.");}0<=H(p,E)||p.push(E)}O(this.c,"listByKeys: "+W(p)+" "+B.length+" keys");g=this.b.request("values:keys",p);T(g,function(){Y(this).fb(g,B)},this)}else throw new V("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new V("first argument "+a+" is invalid.");return g};
t.list=function(a,b,c,d,e,f,g,h,l){var m=X(this.a,b);if(!m){if(this.a.b())return kd("get",[]);throw new qe(b);}var n;if(c&&!Hd(m,c))throw new V('index "'+c+'" not found in store "'+b+'"');if(m=Ob(d))throw new V("invalid key range: "+d+" "+m);var p=Mb(d),q=100;if(C(f))q=f;else if(null!=f)throw new V('limit must be a number but "'+f+'" of type '+typeof f+" found.");var r=0;if(C(g))r=g;else if(null!=g)throw new V('offset must be a number but "'+g+'" of type '+typeof g+" found.");var y=!1;if(fa(e))y=
e;else if(null!=e)throw new V('reverse must be a boolean but "'+e+'" of type '+typeof e+" found.");var A=!1;if(fa(h))A=h;else if(null!=h)throw new V('unique must be a boolean but "'+h+'" of type '+typeof h+" found.");if(r&&l&&v(l[0]))throw new V("offset must not given when initial cursor position is defined");O(this.c,a+": "+b+":"+c);n=this.b.request("values:iter:index",[b]);T(n,function(){Y(this).list(n,a,b,c||null,p,y,q,r,A,l)},this);return n};
t.add=function(a,b,c){var d=z(a)?a:D(a)?a.name:void 0;if(!z(d))throw new V("store name "+d+" must be a string, but "+typeof d);var e=X(this.a,d);if(!e){if(!this.a.b())throw new V('store name "'+d+'" not found.');e=zd(D(a)?a:{name:d});O(this.c,"Adding object store: "+d);Ge(this,e)}else if(this.a.b()&&D(a)&&(a=zd(a),a=Nd(e,a)))throw new fd(a);var f;if(!e)throw new V('store name "'+d+'" not found.');if(z(e.keyPath)&&v(c))throw new V("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.d&&!v(c))throw new V("out-of-line key must be provided.");if(w(b)){O(this.c,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Od(e,b[a]);f=this.b.request("add:array",[d],J);T(f,function(){Y(this).Kb(f,d,b,c)},this);e.ga&&f.U(function(a){a=new Ib("created",this.m(),e.getName(),a,b);this.m().I(a)},this)}else if(D(b))a="store: "+d+" key: "+Jd(e,b,c),O(this.c,"addObject: "+a),Od(e,b),f=this.b.request("add",[d],J),T(f,function(){Y(this).Jb(f,d,b,c)},this),e.ga&&f.U(function(a){a=new Hb("created",
this.m(),e.getName(),a,b);this.m().I(a)},this);else throw new V("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function Ie(a,b){var c=z(b)?b:D(b)?b.name:void 0;if(!z(c))throw new V("store name must be a string");var d=X(a.a,c);if(!d){if(!a.a.b())throw new qe(c);d=zd(D(b)?b:{name:c});O(a.c,"Adding object store: "+c);Ge(a,d)}else if(a.a.b()&&D(b)){var e=zd(b);if(e=Nd(d,e))throw new fd(e);}if(!d)throw new qe(c);return d}
t.load=function(a,b,c){var d=c||",",e=Ie(this,a).getName();a=new db;var f=this;this.b.wa(a,function(a,c,l){Y(f).ec(a,c,l,e,b,d)},[e],J);return a};
t.put=function(a,b,c){var d,e=this;if(a instanceof K){var f=a,g=f.a,h=X(this.a,g);if(!h)throw new V('store "'+g+'" not found.');if(h.keyPath){var l=Jd(h,b);if(null!=l){if(0!=xb(l,f.id))throw new V("Inline key must be "+f+" but "+l+" found.");}else Kd(h,b,f.id);return this.put(g,b)}return this.put(g,b,f.id)}if(w(a)){if(v(c))throw new V("too many arguments");var m=a;if(!v(b))throw new V("record values required");for(var n=b,f=[],g=0,h=m.length;g<h;g++){l=m[g].a;-1==H(f,l)&&f.push(l);var p=X(this.a,
l);if(!p)throw new V('store "'+l+'" not found.');p.keyPath&&Kd(p,n[g],m[g].id)}O(this.c,"putByKeys: to "+W(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)Od(p,n[g]);d=this.b.request("put:keys",f,J);Qd(p,d,arguments);T(d,function(){Y(e).mb(d,n,m)},this)}else if(z(a)||D(a)){var p=Ie(this,a),q=p.getName();if(p.keyPath&&v(c))throw new V("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.d&&!v(c))throw new V("out-of-line key must be provided.");if(w(b)){var r=b,y=c;O(this.c,
"putObjects: "+q+" "+r.length+" objects");for(g=0;g<r.length;g++)Od(p,r[g]);d=this.b.request("put:array",[q],J);Qd(p,d,arguments);T(d,function(){Y(this).nb(d,q,r,y)},this);p.ga&&d.U(function(a){a=new Ib("updated",this.m(),q,a,r);this.m().I(a)},this)}else if(D(b)){var A=b,B=c;O(this.c,"putObject: "+q+" "+B);Od(p,A);d=this.b.request("put",[q],J);Qd(p,d,arguments);T(d,function(){Y(e).fc(d,q,A,B)},this);p.ga&&d.U(function(a){a=new Hb("updated",this.m(),q,a,A);this.m().I(a)},this)}else throw new V("put record value must be Object or array of Objects");
}else throw new V("the first argument of put must be store name, store schema or array of keys.");return d};
function Je(a,b,c,d){var e=a.d,f,g;if(z(b)){var h=X(a.a,b);if(h){if(!h.keyPath&&!h.d&&null==d)throw new V('key required for store "'+b+'"');}else throw new qe(b);for(var l=0;l<c.length;l++)Od(h,c[l]);f=[b]}else{g=b;f=[];for(var l=0,m=g.length;l<m;l++){var n=g[l].a,h=X(a.a,n);-1==H(f,n)&&f.push(n);if(!h)throw new qe(n);Od(h,c[l])}}var p;z(b)?(h=X(a.a,b),p=e.request("put:array",f,J),T(p,function(){Y(this).nb(p,b,c,d)},a)):(p=e.request("put:keys",f,J),T(p,function(){Y(this).mb(p,c,g)},a));return p}
function Ke(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].a;-1==H(c,f)&&c.push(f);if(!Yd(a.a,f))throw new qe(f);}var g=a.d.request("rm:keys",c,J);T(g,function(){Y(this).sb(g,b)},a);return g}
function Le(a,b,c,d,e,f,g){var h,l=g||0;if(g=X(a.a,b)){if(c&&!Hd(g,c))throw new qe('index "'+c+'" in store "'+b+'"');}else throw new qe(b);var m=Mb(d);z(c)?(h=a.d.request("values:iter:index",[b]),T(h,function(){Y(this).list(h,4,b,c,m,e,f,l,!1)},a)):(h=a.d.request("values",[b]),T(h,function(){Y(this).list(h,4,b,null,m,e,f,l,!1)},a));return h}
function Me(a,b){var c=[],d=b.length;if(0==d)return kd("keys",[]);for(var e=0;e<d;e++){var f=b[e].a;-1==H(c,f)&&c.push(f);if(!Yd(a.a,f))throw new qe(f);}var g=a.d.request("keys",c);T(g,function(){Y(a).fb(g,b)},a);return g}
function Ne(a,b,c,d,e,f,g,h){var l,m=X(a.a,b);if(m){if(c&&!Hd(m,c))throw new qe('index "'+c+'" in store "'+b+'"');}else throw new qe(b);z(c)?(l=a.d.request("keys:iter:index",[b]),T(l,function(){Y(this).list(l,2,b,c,d,e,f,g,h)},a)):(l=a.d.request("keys",[b]),T(l,function(){Y(this).list(l,2,b,null,d,e,f,g,h)},a));return l}
t.clear=function(a,b,c){if(v(c))throw new V("too many input arguments");var d;if(z(a)){c=X(this.a,a);if(!c)throw new V('store name "'+a+'" not found.');if(D(b)){var e=Mb(b);if(null===e)throw new V("clear method requires a valid non-null KeyRange object.");O(this.c,"clearByKeyRange: "+a+":"+W(e));d=this.b.request("clear",[a],J);Qd(c,d,[a,e]);T(d,function(){Y(this).Mb(d,a,e)},this)}else{if(v(b))throw new V("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);O(this.c,"clearByStore: "+a);d=this.b.request("clear",[a],J);T(d,function(){Y(this).Va(d,[a])},this)}}else if(!v(a)||w(a)&&z(a[0])){var f=a||Xd(this.a);O(this.c,"clearByStores: "+W(f));d=this.b.request("clear",f,J);T(d,function(){Y(this).Va(d,f)},this)}else throw new V('first argument "'+a+'" is invalid.');return d};
t.Ab=function(a,b,c){var d;if(z(a)){var e=X(this.a,a);if(!e)throw new V('store name "'+a+'" not found.');if(v(c))if(z(b)){var f=Cd(e,b);if(!f)throw new V("index: "+b+" not found in "+a);if(D(c)||null===c){var g=Mb(c);O(this.c,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.b.request("rm:iter:index",[a],J);T(d,function(){Y(this).gc(d,a,f.getName(),g)},this)}else throw new V("key range "+c+' is invalid type "'+typeof c+'".');}else throw new V('index name "'+b+'" must be a string, but '+typeof b+
" found.");else if(z(b)||C(b)||x(b)||b instanceof Date)O(this.c,"removeById: "+a+":"+b),d=this.b.request("rm",[a],J),Qd(e,d,[a,b]),T(d,function(){Y(this).qb(d,a,b)},this),e.ga&&d.U(function(b){b=new Hb("deleted",this.m(),a,b,void 0);this.m().I(b)},this);else if(D(b))g=Mb(b),O(this.c,"removeByKeyRange: "+a+":"+W(g)),d=this.b.request("rm:iter",[a],J),Qd(e,d,[a,g]),T(d,function(){Y(this).rb(d,a,g)},this),e.ga&&d.U(function(b){b=new Ib("deleted",this.m(),a,b,void 0);this.m().I(b)},this);else throw new V('Invalid key or key range "'+
b+'" of type '+typeof b);}else if(a instanceof K){var h=a.a,e=X(this.a,h);d=this.b.request("rm",[h],J);Qd(e,d,[h,a.id]);T(d,function(){Y(this).qb(d,h,a.id)},this)}else if(w(a)){c=[];for(var e=0,l=a.length;e<l;e++){if(!(a[e]instanceof K))throw new V("key list element at "+e+" of "+l+' must be yn.db.Key, but "'+Sd(a[e])+'" ('+ea(a[e])+") is not ydn.db.Key.");var m=a[e].a;-1==H(c,m)&&c.push(m)}if(1>c.length)throw new V('at least one valid key required in key list "'+Sd(a)+'"');d=this.b.request("rm:keys",
c,J);T(d,function(){Y(this).sb(d,a)},this)}else throw new V('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Sd(a)+'" ('+ea(a)+") found.");return d};t.toString=function(){return"DbOperator:"+this.m().getName()};function Oe(a,b,c,d){this.e=a;this.f=b;this.a=Sa(c);this.b=d;this.d=[]}Oe.prototype.e=null;function Pe(a,b,c){if(a.e)c&&a.d.push(c),b(a.e);else throw new nd("tx committed on ParallelTxExecutor");}Oe.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.f+" mode:"+this.b+" scopes:"+W(this.a)};function Qe(a,b,c,d,e,f){this.d=a;this.g=b;this.a=this.xa=0;this.Ja=this.ea=null;this.e=d;this.f=e;this.b=c||"single";this.Eb=f||0}t=Qe.prototype;t.xa=0;t.Eb=0;t.ea=null;t.Ja=null;t.c=R("ydn.db.tr.Parallel");t.Sa=s("xa");t.type=function(){return this.d.Qa()};t.m=s("d");t.abort=function(){O(this.c,this+": aborting");ve(this.Ja)};
t.zc=function(a,b){var c;if("multi"==this.b)a:if(c=this.ea,!c.a||!c.b||b!=c.b&&(c.b!=J||b!=ib)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.b)a:if(c=this.ea,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.b?!0:!1;return c};
t.ka=function(a,b,c,d){function e(c){l.xa++;m=new Oe(c,l.xa,b,h);g=l.H();N(l.c,g+" BEGIN "+W(b)+" "+h);l.ea=m;Pe(l.ea,a,d)}function f(a,b){N(l.c,g+" "+a);if(m){for(var c=m,d=0;d<c.d.length;d++)c.d[d](a,b);c.d.length=0;c.e=null;c.a=null;c.d=null}l.a=0}var g;this.e&&(b=this.e);this.f&&(c=this.f);var h=v(c)?c:ib,l=this,m;if(this.ea&&this.ea.e&&this.zc(b,h))Pe(this.ea,a,d);else{if(this.Eb&&this.xa>=this.Eb)throw new md("Exceed maximum number of transactions of "+this.Eb);this.d.Pa(e,b,h,f)}};
t.request=function(a,b,c,d){var e=new cd(a),f=this;this.ka(function(a){f.a++;dd(e,a,f.H()+"R"+f.a)},b,c||ib,d);return e};t.wa=function(a,b,c,d,e){var f=this,g;this.ka(function(c){f.a++;g=f.H()+"R"+f.a;O(f.c,g+" BEGIN");b(c,g,function(b,d){f.Ja=c;g=f.H()+"R"+f.a;d?(O(f.c,g+" ERROR"),a.l(b)):(O(f.c,g+" SUCCESS"),a.n(b));f.Ja=null});b=null;O(f.c,g+" END")},c,d,e)};t.H=function(){return"B"+this.g+"T"+this.xa};t.toString=function(){return"Parallel:"+this.b+":"+this.H()+(this.Ja?"*":"")};function Re(a,b){Qe.call(this,a,b,"single")}G(Re,Qe);t=Re.prototype;t.c=R("ydn.db.tr.AtomicParallel");t.zc=aa(!1);t.request=function(a,b,c){var d,e,f,g=this,h=Re.k.request.call(this,a,b,c,function(a,b){h.a=null;O(g.c,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new te;S(h,c,!0)}});hd(h,function(a,b,c){f=b;e=a;d=c});return h};
t.wa=function(a,b,c,d,e){var f,g,h=new I;h.o(function(a){g=!1;f=a},function(a){g=!0;f=a});Re.k.wa.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.l(c);else if(!0===g)a.l(f);else if(!1===g)a.n(f);else{var d=new te;a.l(d)}e&&(e(b,c),e=void 0)})};t.toString=function(){return"Atomic"+Re.k.toString.call(this)};function Se(a,b,c){fe.call(this,a,b,c);this.pa=0;a=!0;b="single";c&&(v(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=Te(this,b,a);this.i=Te(this,"atomic",!1);this.a=this.hb(c,this.i)}G(Se,fe);t=Se.prototype;t.pa=0;t.Ac=function(a,b,c,d,e){var f;"readonly"==d?f=ib:"readwrite"==d&&(f=J);a=Te(this,a,b,c,f,e);return this.hb(a,this.i)};t.hb=function(a,b){return new Ce(this,this.d,a,b)};
function Te(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new xe(a,a.pa++,b,d,0,f);if("atomic"==b)return new Be(a,a.pa++);throw new V('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new Qe(a,a.pa++,b,d,e,f);if("atomic"==b)return new Re(a,a.pa++);throw new V('Invalid requestType "'+b+'"');}
t.Mc=function(a,b,c){if(3<arguments.length)throw new V("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.pa++;var d=b||Xd(this.d),e=ib;if(c)if("readwrite"==c)e=J;else if("readonly"!=c)throw new V('Invalid transaction mode "'+c+'"');var f=Te(this,"all",!1,d,e,1),g=this.hb(f,this.i),h=new cd("run"),l=this;f.ka(function(b){P(l.c,"executing run in transaction on "+f);dd(h,b,f.H()+"R0");a(g)},d,e,function(a){h.a=null;S(h,f.Sa(),"complete"!==a)});
return h};t.Yc=function(){return this.a?this.a.yc():NaN};Se.prototype.branch=Se.prototype.Ac;Se.prototype.run=Se.prototype.Mc;Se.prototype.getTxNo=Se.prototype.Yc;Ce.prototype.getTxNo=Ce.prototype.yc;function Z(a,b,c){Se.call(this,a,b,c);a=this.d;for(b=0;b<a.e.length;b++){c=a.e[b];var d=X(a,c.getName());if(d){if(!Hd(d,"k"))throw new V('full text index store "'+d.getName()+'" must have "keyword" index');if(!Hd(d,"v"))throw new V('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new V('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new V('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=X(a,e.a);if(f)M(this.c,"Full text indexer option for "+f.getName()+" ignored.");else throw new V('full text source store "'+e.a+'" does not exist for full text index "'+c.getName()+'"');}}}G(Z,Se);t=Z.prototype;t.hb=function(a,b){return new He(this,this.d,a,b)};t.add=function(a,b,c){return this.a.add(a,b,c)};t.count=function(a,b,c,d){return this.a.count(a,b,c,d)};t.get=function(a,b){return this.a.get(a,b)};t.keys=function(a,b,c,d,e,f,g){return this.a.keys(a,b,c,d,e,f,g)};
t.O=function(a,b,c,d,e,f){return this.a.O(a,b,c,d,e,f)};t.list=function(a,b,c,d,e,f,g,h,l){return this.a.list(a,b,c,d,e,f,g,h,l)};t.load=function(a,b,c){return this.a.load(a,b,c)};t.put=function(a,b,c){return this.a.put(a,b,c)};t.clear=function(a,b,c){return this.a.clear(a,b,c)};t.Ab=function(a,b,c){return this.a.Ab(a,b,c)};t.toString=function(){var a="Storage:"+this.getName();ke(this)&&(a+=" ["+this.Qa()+"]");return a};function De(a,b){this.a=b}G(De,ue);t=De.prototype;t.c=R("ydn.db.crud.req.IndexedDb");t.Wa=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?S(a,d):c(e)};f.onerror=function(b){b.preventDefault();S(a,f.error,!0)}}var d=[];0==b.length?S(a,[]):c(0)};t.Jb=function(a,b,c,d){Ue(this,a,!1,!0,b,[c],v(d)?[d]:void 0)};t.fc=function(a,b,c,d){Ue(this,a,!0,!0,b,[c],v(d)?[d]:void 0)};t.Kb=function(a,b,c,d){Ue(this,a,!1,!1,b,c,d)};
function Ue(a,b,c,d,e,f,g){function h(r){if(null==f[r])if(P(a.c,"empty object at "+r+" of "+f.length),m++,m==f.length)S(b,l,n);else{var A=r+10;A<f.length&&h(A)}var B,A=f[r];B=null!=g?c?q.put(A,g[r]):q.add(A,g[r]):c?q.put(A):q.add(A);B.onsuccess=function(a){m++;l[r]=a.target.result;m==f.length?S(b,d?l[0]:l,n):(a=r+10,a<f.length&&h(a))};B.onerror=function(c){m++;var g=B.error;P(a.c,U(b)+p+' request to "'+e+'" cause '+g.name+' for object "'+Sd(f[r])+'" at index '+r+" of "+f.length+" objects.");l[r]=
g;n=!0;c.preventDefault();m==f.length?S(b,d?l[0]:l,n):(c=r+10,c<f.length&&h(c))}}var l=[],m=0,n=!1,p=c?"put":"add",q=b.a.objectStore(e);P(a.c,U(b)+" "+p+" "+f.length+' objects to store "'+e+'"');if(0<f.length)for(var r=0;10>r&&r<f.length;r++)h(r);else S(b,[])}t.nb=function(a,b,c,d){Ue(this,a,!0,!1,b,c,d)};
t.mb=function(a,b,c){function d(l){var n=c[l],p=n.a,q=a.a.objectStore(p),r;r=null===q.keyPath?q.put(b[l],n.id):q.put(b[l]);r.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?S(a,e,g):(c=l+10,c<b.length&&d(c))};r.onerror=function(c){f++;M(h.c,"request result "+c.name+' error when put keys to "'+p+'" for object "'+Sd(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=r.error;g=!0;c.preventDefault();f==b.length?S(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;P(this.c,U(a)+
" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else S(a,e,g)};
t.ec=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,r;-1==b?(d=!0,r=e.substring(n)):(r=e.substring(n,b),n=b+1);for(var b=r.split(f),F=0;F<p.length;F++){var Q=b[F];q[F]&&(q[F]==qd?Q=Ca(Q):"INTEGER"==q[F]?Q=parseInt(Q,10):"NUMERIC"==q[F]&&(Q=parseFloat(Q)));a[p[F]]=Q}var xa=l.put(a);xa.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};xa.onerror=function(a){"DataError"==a.name&&(a=new ne(h+": "+r.substring(0,70)));a.preventDefault();c(xa.error,!0)}}var h=X(this.a,d),l=
a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),q=[];for(a=0;a<p.length;a++){var r=Cd(h,p[a]);r?q[a]=r.type:p[a]==h.keyPath&&(q[a]=h.type)}n++;P(this.c,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
t.qb=function(a,b,c){var d=a.a.objectStore(b);P(this.c,U(a)+" clearById: "+b+" "+c);var e=d.openCursor(Nb.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){S(a,1)};c.onerror=function(){S(a,c.error,!0)}}else S(a,0)};e.onerror=function(b){b.preventDefault();S(a,e.error,!0)}};
t.sb=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?S(a,g,!0):S(a,d);else{b[h].a!=e&&(e=b[h].a,f=a.a.objectStore(e));var l=f["delete"](b[h].id);l.onsuccess=function(){d++;c(h)};l.onerror=function(a){a.preventDefault();g[h]=l.error;c(h)}}}var d=0,e,f;P(this.c,U(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
t.rb=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);P(this.c,U(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){S(a,e)};h.onerror=function(){S(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();S(a,e.error,!0)}};t.Mb=function(a,b,c){var d=a.a.objectStore(b);P(this.c,U(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){S(a,void 0)};e.onerror=function(b){b.preventDefault();S(a,e.error,!0)}};
t.gc=function(a,b,c,d){var e=a.a.objectStore(b).index(c);P(this.c,U(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?S(a,f,!0):S(a,h)};g.onerror=function(b){b.preventDefault();S(a,g.error,!0)}};
t.Va=function(a,b){var c=b.length,d=0;P(this.c,U(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&S(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&S(a,f.error,!0)}}};t.$a=function(a,b,c){var d=this;P(this.c,U(a)+b+":"+c);var e=a.a.objectStore(b).get(c);e.onsuccess=function(b){P(d.c,U(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");S(a,b.target.result)};e.onerror=function(b){b.preventDefault();S(a,e.error,!0)}};
t.Yb=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)S(a,e);else{var m=b+10;m<h&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==h?S(a,e):(c=b+10,c<h&&d(c))};n.onerror=function(b){f++;b.preventDefault();S(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;P(this.c,U(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else S(a,[])};
t.fb=function(a,b){function c(f){var h=b[f],l=a.a.objectStore(h.a).get(h.id);l.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?S(a,d):(h=f+10,h<b.length&&c(h))};l.onerror=function(b){e++;b.preventDefault();S(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;P(this.c,U(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else S(a,[])};
t.Pb=function(a,b,c,d,e){if(d&&e)throw new ee("unique count not available in IndexedDB");e=a.a.objectStore(b);b=U(a)+" "+b+(d?":"+d:"")+(c?":"+W(c):"");P(this.c,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){S(a,b.target.result)};f.onerror=function(b){b.preventDefault();S(a,f.error,!0)}};
t.list=function(a,b,c,d,e,f,g,h,l,m){var n=[],p=a.a.objectStore(c),q=f?l?"prevunique":"prev":l?"nextunique":"next";c=U(a)+" "+b+" "+c+(d?":"+d:"")+(e?W(e):"");f&&(c+=" reverse");l&&(c+=" unique");if(m&&v(m[0])){l=d?!v(m[1]):!0;var r=m[0],y=e?e.lower:void 0,A=e?e.upper:void 0,B=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=Kb(f?new L(y,r,B,l):new L(r,A,l,e));c+=" starting from "+W(m[0]);v(m[1])&&(c+=", "+W(m[1]))}P(this.c,c);var E;E=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,q):d?
p.index(d).openCursor(e,q):p.openCursor(e,q);var F=!1;E.onsuccess=function(c){if(c=c.target.result){if(!F){if(0<h){F=!0;c.advance(h);return}if(m&&d&&v(m[0]))if(v(m[1])){var e=kb.cmp(c.key,m[0]),l=f?-1:1;if(0==e){e=kb.cmp(c.primaryKey,m[1]);if(0==e){F=!0;c["continue"]();return}if(e==l)F=!0;else{c["continue"]();return}}else F=!0}else F=!0;else F=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?n.push(c.value):
n.push([c.key,c.primaryKey,c.value]);if(n.length<g)c["continue"]();else m&&(m[0]=Jb(c.key),m[1]=Jb(c.primaryKey)),S(a,n)}else m&&(m[0]=void 0,m[1]=void 0),S(a,n)};E.onerror=function(b){b.preventDefault();S(a,E.error,!0)}};function Ve(a,b,c){a=["ydn.db",a];v(b)&&(a.push(b),v(c)&&(a.push(c),v(void 0)&&a.push(nb(void 0))));return a.join("^|")};function We(a,b){this.key=a;this.a=b}We.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function Xe(a,b){var c=xb(a.key,b.key);return 0===c?null!=a.a?null!=b.a?xb(a.a,b.a):1:null!=b.a?-1:0:c};function Ye(a){this.J=a||Ze}function Ze(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}t=Ye.prototype;t.C=null;t.J=null;t.Z=null;t.Y=null;
t.add=function(a){if(null==this.C)return this.Y=this.Z=this.C=new $e(a),!0;var b=null;af(this,function(c){var d=null;0<this.J(c.value,a)?(d=c.left,null==c.left&&(b=new $e(a,c),c.left=b,c==this.Z&&(this.Z=b))):0>this.J(c.value,a)&&(d=c.right,null==c.right&&(b=new $e(a,c),c.right=b,c==this.Y&&(this.Y=b)));return d});b&&(af(this,function(a){a.count++;return a.parent},b.parent),cf(this,b.parent));return!!b};
t.Ea=function(a){var b=null;af(this,function(c){var d=null;0<this.J(c.value,a)?d=c.left:0>this.J(c.value,a)?d=c.right:(b=c.value,df(this,c));return d});return b};t.clear=function(){this.Y=this.Z=this.C=null};t.contains=function(a){var b=!1;af(this,function(c){var d=null;0<this.J(c.value,a)?d=c.left:0>this.J(c.value,a)?d=c.right:b=!0;return d});return b};t.s=function(){return this.C?this.C.count:0};t.v=function(){var a=[];ef(this,function(b){a.push(b)});return a};
function ef(a,b){if(a.C){var c,d=c=ff(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function af(a,b,c){for(c=c?c:a.C;c&&null!=c;)c=b.call(a,c)}
function cf(a,b){af(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&gf(this,a.left),hf(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&hf(this,a.right),gf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function gf(a,b){jf(b)?(b.parent.left=b.right,b.right.parent=b.parent):kf(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.C=b.right,a.C.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function hf(a,b){jf(b)?(b.parent.left=b.left,b.left.parent=b.parent):kf(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.C=b.left,a.C.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function df(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=lf(a,b.left);af(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Y&&(a.Y=d)}else{d=ff(a,b.right);af(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.Z&&(a.Z=d)}d.count=b.count;jf(b)?b.parent.left=d:kf(b)?b.parent.right=d:a.C=d;cf(a,c?c:d)}else af(a,function(a){a.count--;return a.parent},b.parent),jf(b)?(b.parent.left=null,b==a.Z&&(a.Z=b.parent),cf(a,b.parent)):kf(b)?(b.parent.right=null,b==a.Y&&(a.Y=b.parent),cf(a,b.parent)):a.clear()}function ff(a,b){if(!b)return a.Z;var c=b;af(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function lf(a,b){if(!b)return a.Y;var c=b;af(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function $e(a,b){this.value=a;this.parent=b?b:null;this.count=1}$e.prototype.left=null;$e.prototype.right=null;$e.prototype.height=1;function kf(a){return!!a.parent&&a.parent.right==a}function jf(a){return!!a.parent&&a.parent.left==a};function mf(a){this.J=a||Ze}G(mf,Ye);function nf(a,b,c){if(a.C){var d;if(c instanceof $e)d=c;else if(c){if(af(a,function(a){var b=null;0<this.J(a.value,c)?(b=a.left,d=a):0>this.J(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=ff(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function of(a,b,c){if(a.C){var d;if(c instanceof $e)d=c;else if(c){if(af(a,na(function(a){var b=null;0<this.J(a.value,c)?b=a.left:(0>this.J(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=lf(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function pf(a,b,c){this.f=a;this.storage=b;this.b=c;this.a={};a=this.b.keyPath;this.d=w(a)?a.join(","):a||"_ROWID_";this.a[this.d]=null;this.e=Ve(this.f,this.b.getName(),this.d)+"^|"}
function qf(a,b){var c=b||a.d;if(!a.a[c]){a.a[c]=new mf(Xe);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&0==f.lastIndexOf(a.e,0)){var g=rb(f.substr(a.e.length));if(c==a.d)a.a[c].add(new We(g));else{var h=a.storage.getItem(f);if(null!==h)if(f=Cd(a.b,c),h=Rd(h),h=rd(f,h),f.multiEntry){if(w(h))for(f=0;f<h.length;f++)a.a[c].add(new We(h[f],g))}else a.a[c].add(new We(h,g))}}}}return a.a[c]}
function rf(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.d)e.Ea(new We(b));else{var f=Cd(a.b,d),f=lb(c,f.keyPath);e.Ea(new We(b,f))}}}function sf(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function tf(a,b,c,d){if(null==b&&(a.b.keyPath&&(b=Jd(a.b,c)),a.b.d&&null==b)){b=a.e+nb(void 0);var e=Rd(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,W(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.e+nb(b)));if(d)return null;a.storage.setItem(a.e+nb(b),W(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.d)e.add(new We(d));else{var g=Cd(a.b,f),g=lb(c,g.keyPath);null!=g&&e.add(new We(d,g))}return b}
function uf(a,b){var c=a.e+nb(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=Rd(d);rf(a,b,c);return 1}pf.prototype.clear=function(){sf(this);vf(this)};function wf(a,b){var c=a.storage.getItem(a.e+nb(b)),d=void 0;if(null!==c)for(var d=Rd(c),c=0,e=a.b.a.length;c<e;c++){var f=a.b.index(c);if("DATE"==f.type){var g=rd(f,d);g&&sd(f,d,new Date(g))}}return d}pf.prototype.getName=function(){return this.b.getName()};
function xf(a,b,c){b=b||a.d;a=qf(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new We(c.lower)),null!=c.upper&&(e=new We(c.upper)),g=c.lowerOpen,h=c.upperOpen);nf(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=xb(a.key,d.key))){if(null!=e&&(a=xb(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function vf(a,b){var c=qf(a,a.d),d=null,e=null,f=0,g=[],h=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new We(b.lower)),null!=b.upper&&(e=new We(b.upper)),l=b.lowerOpen,m=b.upperOpen);nf(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=Xe(b,d))){if(null!=e){var c=Xe(b,e);if(1===c||0===c&&m)return!0}var c=a.e+nb(b.key),q=a.storage.getItem(c);null!==q&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(Rd(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)rf(a,g[c],h[c]);else sf(a);return f}
function yf(a,b,c,d,e,f,g,h,l){function m(c){if(c&&(B++,!(B<g))){var d=c.value;if(e){if(F&&null!=A&&(c=q?Xe(d,A):xb(d.key,A.key),0==c))return;if(null!=y&&(c=q?Xe(d,y):xb(d.key,y.key),-1==c||0==c&&E))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(E&&null!=y&&(c=q?Xe(d,y):xb(d.key,y.key),0==c))return;if(null!=A&&(c=q?Xe(d,A):xb(d.key,A.key),1==c||0==c&&F))return l&&(l[0]=void 0,l[1]=void 0),!0}c=d.key;if(!h||!r||null==p||0!=xb(p,c)){d=r?d.a:c;if(2==b)n.push(d);else if(1==b)n.push(c);else if(3==b)n.push([c,
d]);else if(4==b){var m=wf(a,d);n.push(m)}else n.push([c,d,wf(a,d)]);l&&(l[0]=c,l[1]=d)}p=c;if(v(f)&&n.length>=f)return!0}}var n=[],p,q=!!l&&null!=l[0];c=c||a.d;var r=c!=a.d;c=qf(a,c);var y=null,A=null;v(g)||(g=0);var B=-1,E=!1,F=!1;null!=d&&(null!=d.lower&&(y=r&&e?new We(d.lower,"\uffff"):new We(d.lower)),null!=d.upper&&(A=r&&!e?new We(d.upper,"\uffff"):new We(d.upper)),E=!!d.lowerOpen,F=!!d.upperOpen);if(q){e?F=!0:E=!0;d=l[0];var Q=v(l[1])?l[1]:"\uffff";e?A=r?new We(d,Q):new We(d):y=r?new We(d,
Q):new We(d)}e?of(c,m,A):nf(c,m,y);return n}pf.prototype.F=function(a,b,c,d,e){return yf(this,2,a,b,c,d,e)};pf.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.f+":"+this.b.getName()};function zf(){this.clear()}t=zf.prototype;t.Ob=function(){return this};t.setItem=function(a,b){v(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};t.getItem=function(a){return v(this.a[a])?this.a[a]:null};t.removeItem=function(a){delete this.a[a];Qa(this.keys,a.toString());this.length=this.keys.length};t.length=0;t.key=function(a){a=this.keys[a];return v(a)?this.a[a]:null};t.clear=function(){this.a={};this.keys=[];this.length=0};function Af(a){this.g=a||new zf;this.f={}}function Bf(a,b){var c=X(a.a,b);if(c)a.f[b]||(a.f[b]=new pf(a.d,a.e,c));else throw new nd('store name "'+b+'" not found.');return a.f[b]}Af.prototype.P=function(a){var b=this;setTimeout(function(){var c=Ve(b.d),c=b.e.getItem(c),c=new Wd(c);a(c)},10)};function Cf(a,b){this.b=a;this.a=b}Cf.prototype.m=function(a,b){var c=this.b;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.a("complete",null);d.a=null;d.b=null}};function Fe(a,b){this.a=b}G(Fe,ue);t=Fe.prototype;t.c=R("ydn.db.crud.req.SimpleStore");t.mb=function(a,b,c){Df(this,a,null,b,c,!0,!1)};
function Df(a,b,c,d,e,f,g){P(a.c,U(b)+" "+(f?"put":"add")+"Object"+(g?"":"s "+d.length+" objects"));var h=b.a.m(function(a){var m;if(g)m=Bf(a,c),a=tf(m,e,d,!f),null!=a?S(b,a):(a=Sd(a),a=new me(a),S(b,a,!0));else{for(var n=c,p=[],q=!1,r=e||{},y=0;y<d.length;y++){var A;c?A=r[y]:(n=e[y],A=n.id,n=n.a);m&&m.getName()==n||(m=Bf(a,n));A=tf(m,A,d[y],!f);null!=A?p.push(A):(q=!0,p.push(new me))}S(b,p,q)}h();h=null},a)}t.Jb=function(a,b,c,d){Df(this,a,b,c,d,!1,!0)};
t.fc=function(a,b,c,d){Df(this,a,b,c,d,!0,!0)};t.Kb=function(a,b,c,d){Df(this,a,b,c,d,!1,!1)};t.ec=function(){throw new ld("putData");};t.nb=function(a,b,c,d){Df(this,a,b,c,d,!0,!1)};t.$a=function(a,b,c){var d=a.a.m(function(e){e=wf(Bf(e,b),c);S(a,e);d();d=null},this)};function Ef(a,b,c,d){var e=b.a.m(function(a){for(var g=[],h=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof K&&(h=n,n=h.id,h=h.a);l&&l.getName()==h||(l=Bf(a,h));n=wf(l,n);g[m]=n}S(b,g,!1);e();e=null},a)}
t.Yb=function(a,b,c){Ef(this,a,b,c)};t.fb=function(a,b){Ef(this,a,null,b)};t.qb=function(a,b,c){var d=U(a)+" removeById "+b+" "+c;P(this.c,d);var e=this,f=a.a.m(function(g){g=uf(Bf(g,b),c);O(e.c,"success "+d+(0==g?" [not found]":""));S(a,g);f();f=null},this)};t.sb=function(a,b){P(this.c,U(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.a.m(function(f){for(var g=0;g<b.length;g++){var h=b[g].a,l=b[g].id;c&&c.getName()==h||(c=Bf(f,h));d+=uf(c,l)}S(a,d);e();e=null},this)};
t.Mb=function(a,b,c){this.rb(a,b,c)};t.rb=function(a,b,c){var d=U(a)+" removeByKeyRange "+(c?W(c):"");P(this.c,d);var e=this,f=a.a.m(function(g){g=vf(Bf(g,b),c);O(e.c,d+" deleted "+g+" records.");S(a,g);f();f=null},this)};t.gc=function(a,b,c,d){var e=U(a)+" removeByIndexKeyRange "+(d?W(d):"");P(this.c,e);var f=a.a.m(function(e){e=Bf(e,b);for(var h=e.F(c,d),l=h.length,m=0;m<l;m++)uf(e,h[m]);S(a,l);f();f=null},this)};
t.Va=function(a,b){var c=U(a)+" clearByStores";P(this.c,c);var d=a.a.m(function(e){for(var f=0;f<b.length;f++)Bf(e,b[f]).clear();O(this.c,"success "+c);S(a,b.length);d();d=null},this)};t.Wa=function(a,b){var c=a.a.m(function(d){for(var e=[],f=0;f<b.length;f++){var g=Bf(d,b[f]);e.push(xf(g))}S(a,e);c();c=null},this)};
t.Pb=function(a,b,c,d){var e=U(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");P(this.c,e);var f=a.a.m(function(g){g=xf(Bf(g,b),d,c);O(this.c,"success "+e);S(a,g);f();f=null},this)};t.list=function(a,b,c,d,e,f,g,h,l,m){var n=U(a)+" "+c+" "+(e?Sd(e):"");P(this.c,n);var p=a.a.m(function(q){q=yf(Bf(q,c),b,d,e,f,g,h,l,m);O(this.c,n+" "+q.length+" records found.");S(a,q);p();p=null},this)};function Ee(a,b){this.a=b}G(Ee,ue);t=Ee.prototype;t.c=R("ydn.db.crud.req.WebSql");function Ff(a,b){var c=a._default_?Rd(a._default_):{};if(null!=b.keyPath){var d=td(a[b.keyPath],b.type);null!=d&&Kd(b,c,d)}for(d=0;d<b.a.length;d++){var e=b.a[d],f=e.e;"_default_"==f||e.g||e.multiEntry||"DATE"!=e.type&&!b.Bb||(f=td(a[f],e.type),v(f)&&sd(e,c,f))}return c}t.Jb=function(a,b,c,d){Gf(this,a,!0,!0,b,[c],[d])};t.ec=function(){throw"not impl";};t.fc=function(a,b,c,d){Gf(this,a,!1,!0,b,[c],[d])};
t.Kb=function(a,b,c,d){Gf(this,a,!0,!1,b,c,d)};
function Gf(a,b,c,d,e,f,g){function h(c,e){if(null==f[c])if(P(a.c,"empty object at "+c+" of "+f.length),p++,p==f.length)O(a.c,q+" success "+q),S(b,n,r);else{var B=c+2;B<f.length&&h(B,e)}var E;E=v(g)?Ld(l,f[c],g[c]):Ld(l,f[c]);B=m+Dd(l)+" ("+E.Fc.join(", ")+") VALUES ("+E.Oc.join(", ")+");";P(a.c,U(b)+" SQL: "+B+" PARAMS: "+E.O+" REQ: "+c+" of "+f.length);e.executeSql(B,E.O,function(g,q){function B(c,d){var f="ydn.db.me:"+l.getName()+":"+c.getName(),f=m+Fa(f)+" ("+l.f+", "+c.d+") VALUES (?, ?)",g=
[Qb(ka,l.type),Qb(d,c.type)];P(a.c,U(b)+" multiEntry "+f+" "+g);e.executeSql(f,g,k(),function(b,c){M(a.c,"multiEntry index insert error: "+c.message);return!1})}p++;var ka=v(E.key)?E.key:q.insertId;1>q.rowsAffected&&(r=!0,ka=new me(ka+" no-op"));for(var fb=0,Md=l.a.length;fb<Md;fb++){var qb=l.index(fb);if(qb.multiEntry)for(var Lb=lb(f[c],qb.keyPath),Ii=(Lb?Lb.length:0)||0,bf=0;bf<Ii;bf++)B(qb,Lb[bf])}d?S(b,ka):(n[c]=ka,p==f.length?S(b,n,r):(fb=c+2,fb<f.length&&h(fb,g)))},function(e,g){p++;r=!0;6==
g.code?g.name="ConstraintError":M(a.c,"error: "+g.message+" "+q);if(d)S(b,g,!0);else if(n[c]=g,p==f.length)P(a.c,"success "+q),S(b,n,r);else{var l=c+2;l<f.length&&h(l,e)}return!1})}var l=X(a.a,e),m=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";c=b.a;var n=[],p=0,q=U(b)+" inserting "+f.length+" objects.",r=!1;if(0<f.length)for(e=0;2>e&&e<f.length;e++)h(e,c);else O(a.c,"success"),S(b,[])}t.nb=function(a,b,c,d){Gf(this,a,!1,!1,b,c,d)};
t.mb=function(a,b,c){if(0==c.length)S(a,[]);else{for(var d=[],e=0,f=0,g=this,h=function(h,l){var m=[];P(g.c,"put "+l.length+" objects to "+h);for(var n=Id(X(g.a,h)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].id);n=ed(a);n.o(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&S(a,d)},function(){e++;e==f&&S(a,d,!0)});Gf(g,n,!1,!1,h,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var q=c[p].a,r=c[p].id;q!=l?(f++,0<m.length&&h(l,m),m=[p],n=[r],l=q):(m.push(p),n.push(r))}0<m.length&&
h(l,m)}};t.$a=function(a,b,c){var d=a.a,e=X(this.a,b),f=this;b=e.f;c=[Qb(c,e.type)];b="SELECT * FROM "+Dd(e)+" WHERE "+b+" = ?";var g=U(a)+" SQL: "+b+" PARAMS: "+c;P(this.c,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=Ff(d,e),S(a,d)):(O(f.c,"success no result: "+g),S(a,void 0))}else O(f.c,"success no result: "+g),S(a,void 0)},function(b,c){M(f.c,"error: "+g+" "+c.message);S(a,c,!0);return!1})};
t.Yb=function(a,b,c){function d(b,e){var p=l.f,q=[Qb(c[b],l.type)],r="SELECT * FROM "+Dd(l)+" WHERE "+p+" = ?";P(f.c,"SQL: "+r+" PARAMS: "+q);e.executeSql(r,q,function(e,f){h++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=Ff(n,l))}else g[b]=void 0;h==c.length?S(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,l){h++;M(f.c,"error: "+r+" "+l.message);if(h==c.length)S(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.a,f=this,g=[],h=0,l=X(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,
e);else O(f.c,"success"),S(a,[])};
t.fb=function(a,b){function c(d,h){var n=b[d],p=X(e.a,n.a),q=w(n.id)?n.id.join("^|"):n.id instanceof Date?+n.id:n.id,n=p.f,q=[Qb(q,p.type)],r="SELECT * FROM "+Dd(p)+" WHERE "+n+" = ?";P(e.c,"SQL: "+r+" PARAMS: "+q);h.executeSql(r,q,function(h,n){g++;if(0<n.rows.length){var m=n.rows.item(0);null!=m&&(f[d]=Ff(m,p))}else f[d]=void 0;g==b.length?(P(e.c,"success "+r),S(a,f)):(m=d+10,m<b.length&&c(m,h))},function(b,c){S(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,
d);else P(this.c,"success"),S(a,[])};
t.Va=function(a,b){function c(d,g){function h(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Fa(a);P(e.c,"SQL: "+a);g.executeSql(a,[])}var l=X(e.a,b[d]),m="DELETE FROM  "+Dd(l);P(e.c,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(P(e.c,"success "+m),S(a,b.length)):c(d+1,g)},function(b,c){S(a,c,!0);return!1});for(var n=0,p=l.a.length;n<p;n++){var q=l.index(n);q.multiEntry&&h(q)}}var d=a.a,e=this;0<b.length?c(0,d):(P(this.c,"success"),S(a,0))};
t.sb=function(a,b){function c(h){if(h>=b.length)S(a,f,g);else{var l=X(e.a,b[h].a),m=Qb(b[h].id,l.type),n=" WHERE "+l.f+" = ?",p="DELETE FROM "+Dd(l)+n,q=U(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(h)},function(a,b){M(e.c,"error: "+q+b.message);g=!0;c(h);return!1});h++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+n;P(e.c,U(a)+NaN+b);d.executeSql(b,[m])},r=0,y=l.a.length;r<y;r++){var A=l.index(r);A.multiEntry&&p(A)}}}var d=a.a,e=this,
f=0,g=!1;P(this.c,U(a)+" removeByKeys: "+b.length+" keys");c(0)};t.qb=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+l;P(h.c,U(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=X(this.a,b),g=Qb(c,f.type),h=this,l=" WHERE "+f.f+" = ?";b="DELETE FROM "+Dd(f)+l;P(this.c,U(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){S(a,c.rowsAffected)},function(b,c){S(a,c,!0);return!1});b=0;for(c=f.a.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};
t.Mb=function(a,b,c){Hf(this,a,b,void 0,c)};t.rb=function(a,b,c){Hf(this,a,b,void 0,c)};t.gc=function(a,b,c,d){Hf(this,a,b,c,d)};
function Hf(a,b,c,d,e){function f(c){c="ydn.db.me:"+h.getName()+":"+c.getName();c="DELETE FROM  "+Fa(c)+n;P(a.c,U(b)+NaN+c);g.executeSql(c,m)}var g=b.a,h=X(a.a,c);c="DELETE FROM "+Dd(h);var l=[],m=[],n="";null!=e&&(v(d)?(d=Cd(h,d),Pb(d.d,d.type,e,m,l)):Pb(h.f,h.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=U(b)+" SQL: "+c+" PARAMS: "+l;P(a.c,p);g.executeSql(c,l,function(c,d){P(a.c,"success "+p);S(b,d.rowsAffected)},function(c,d){M(a.c,"error: "+p+d.message);S(b,d,!0);return!1});e=0;for(d=h.a.length;e<
d;e++)c=h.index(e),c.multiEntry&&f(c)}t.Wa=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Fa(b[g]);P(e.c,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?S(a,f):c(g)},function(b,c){S(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(P(this.c,"success"),S(a,0)):c(0)};
t.Pb=function(a,b,c,d,e){var f=[];b=Ad(X(this.a,b),f,6,d,c,!1,e);P(this.c,U(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d;a:{if(d=c.rows.item(0))for(var e in d)if(d.hasOwnProperty(e)){d=d[e];break a}d=void 0}S(a,d)},function(b,c){S(a,c,!0);return!1})};
t.list=function(a,b,c,d,e,f,g,h,l,m){var n=this,p=[],q=X(this.a,c),r=q.h,y=q.type,A=y,B=null!=d&&d!==r?Cd(q,d):null,E=d||r;B&&(A=B.type);c=[];if(m&&v(m[0])){var F=m[0];B&&v(m[1])?(d=m[1],e=Fd(q,b,c,B.getName(),e,F,d,f,l)):e=Ed(q,b,c,d,e,f,l,F)}else e=Ad(q,c,b,E,e,f,l);C(g)&&(e+=" LIMIT "+g);C(h)&&(e+=" OFFSET "+h);var Q=a+" SQL: "+e+" ;params= "+W(c);P(this.c,Q);a.a.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=td(f[r],y):1==b?p[g]=td(f[E],A):3==b?p[g]=
[td(f[E],A),td(f[r],y)]:null!=f&&(p[g]=Ff(f,q));O(n.c,"success "+a);m&&f&&(m[0]=td(f[E],A),m[1]=td(f[r],y));S(a,p)},function(b,c){M(n.c,"error: "+Q+c.message);S(a,c,!0);return!1})};function If(a,b){v(a)&&5242880<a&&M(this.c,"storage size request ignored, use Quota Management API instead");this.q=null;this.Ma=b||NaN}t=If.prototype;
t.ta=function(a,b){function c(a,c,d){O(e.c,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.a.length;d++)Jf(e,a,c,b.a[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)Yd(b,c[d])||(a.deleteObjectStore(c[d]),O(e.c,"store: "+c[d]+" deleted."))}function d(a,b){f.Ba?M(e.c,"database already set."):v(b)?(M(e.c,b?b.message:"Error received."),e.q=null,f.l(b)):(e.q=a,e.q.onabort=function(a){P(e.c,e+": abort");e.Ia(a.target.error)},e.q.onerror=function(a){P(e.c,e+": error");
e.Ia(a.target.error)},e.q.onversionchange=function(a){P(e.c,e+" closing connection for onversionchange to: "+a.version);if(e.q&&(e.q.onabort=null,e.q.onblocked=null,e.q.onerror=null,e.q.onversionchange=null,e.jb(a),!a.defaultPrevented)){e.q.close();e.q=null;var b=Error();b.name=a.type;e.ib(b)}},f.n(parseFloat(g)))}var e=this,f=new I,g=void 0,h=b.version;O(e.c,"Opening database: "+a+" ver: "+(b.d?"auto":h));var l;l=v(h)?kb.open(a,h):kb.open(a);l.onsuccess=function(f){var h=f.target.result;v(g)||(g=
h.version);O(e.c,"Database: "+h.name+", ver: "+h.version+" opened.");if(b.d)e.P(function(f){if(b instanceof $d)for(var g=0;g<f.a.length;g++)Yd(b,f.a[g].getName())||ae(b,f.a[g].clone());f=Zd(b,f);if(0<f.length){O(e.c,"Schema change require for difference in "+f);var l=C(h.version)?h.version+1:1;if("IDBOpenDBRequest"in u){h.close();var m=kb.open(a,l);m.onupgradeneeded=function(a){a=a.target.result;O(e.c,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};
m.onerror=function(){O(e.c,e+": fail.");d(null)}}else{var p=h.setVersion(l+"");p.a=function(a){M(e.c,"migrating from "+h.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=E;c(h,p.transaction,!0)};var E=function(){var b=kb.open(a);b.onsuccess=function(a){a=a.target.result;O(e.c,e+": OK.");d(a)};b.onerror=function(){O(e.c,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=E)}}else d(h)},void 0,h);else if(b.version>h.version){var l=h.setVersion(b.version);
l.a=function(a){M(e.c,"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(h,l.transaction,!0)}}else b.version==h.version?O(e.c,"database version "+h.version+" ready to go"):M(e.c,"connected database version "+h.version+" is higher than requested version."),e.P(function(a){a=Zd(b,a);0<a.length?(O(e.c,a),d(null,new de("different schema: "+a))):d(h)},void 0,h)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;O(e.c,"upgrade needed for version "+a.version);
c(a,l.transaction,!1)};l.onerror=function(c){Yc(e.c,'open request to database "'+a+'" '+(v(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){Yc(e.c,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};C(this.Ma)&&!isNaN(this.Ma)&&setTimeout(function(){"done"!=l.readyState&&(Yc(e.c,e+": database state is still "+l.readyState),d(null,new te("connection timeout after "+e.Ma)))},this.Ma);return f};t.Ma=18E4;t.ib=k();
t.Ia=k();t.jb=k();t.ua=aa("indexeddb");t.zb=function(){return!!this.q};t.c=R("ydn.db.con.IndexedDb");t.q=null;t.yb=function(){return this.q?parseFloat(this.q.version):void 0};
t.P=function(a,b,c){c=c||this.q;if(v(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Wd(c.version));return}throw new ce;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Wd(c.version));return}b=c.transaction(b,ib)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),l=[],m=0,n=h.indexNames.length;m<n;m++){var p=h.index(h.indexNames[m]);l[m]=new od(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new yd(h.name,h.keyPath,h.autoIncrement,void 0,l)}b=new Wd(c.version,f);a(b)};
function Jf(a,b,c,d){function e(){var a={autoIncrement:!!d.d};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new pe("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.d);if("ConstraintError"==c.name)throw new de("creating store for "+d.getName());throw c;}}P(a.c,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=c.objectStore(d.getName()),
vd(d.keyPath||"",c.keyPath||""))b.deleteObjectStore(d.getName()),M(a.c,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(fa(c.autoIncrement)&&fa(d.d)&&c.autoIncrement!=d.d)b.deleteObjectStore(d.getName()),M(a.c,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,l=0,m=0;m<d.a.length;m++){var n=d.a[m],p=!1;if(f.contains(n.getName())){var q=c.index(n.getName()),r=null!=q.unique&&null!=n.unique&&q.unique!=n.unique,y=null!=q.multiEntry&&
null!=n.multiEntry&&q.multiEntry!=n.multiEntry,q=null!=q.keyPath&&null!=n.keyPath&&!!vd(q.keyPath,n.keyPath);if(r||y||q)c.deleteIndex(n.getName()),p=!0,g--,l++}else p=!0;p&&(n.unique||n.multiEntry?(p={unique:n.unique,multiEntry:n.multiEntry},c.createIndex(n.getName(),n.keyPath,p)):c.createIndex(n.getName(),n.keyPath),g++)}for(m=0;m<f.length;m++)Hd(d,f[m])||(c.deleteIndex(f[m]),h++);P(a.c,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted, "+l+" modified.")}else{c=e();for(m=0;m<d.a.length;m++)n=
d.a[m],"BLOB"==n.type?a.c.log(Qc,"Index "+n+" of blob data type ignored.",void 0):(P(a.c,"Creating index: "+n),n.unique||n.multiEntry?(p={unique:n.unique,multiEntry:n.multiEntry},c.createIndex(n.getName(),n.keyPath,p)):c.createIndex(n.getName(),n.keyPath));P(a.c,"Created store: "+c)}}
t.Xa=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};t.xb=function(){P(this.c,this+" closing connection");this.q.close()};t.toString=function(){return"IndexedDB:"+(this.q?this.q.name+":"+this.q.version:"")};
yb.push(function(a,b){if(!kb||b&&"indexeddb"!=b)return null;var c=kb.deleteDatabase(a),d=new cd("IDBVersionChangeEvent ");c.onblocked=function(a){id(d,a)};c.onerror=function(a){d.l(a)};c.onsuccess=function(a){d.n(a)};return d});function Kf(a){Af.call(this,a);this.b=NaN}G(Kf,Af);t=Kf.prototype;t.c=R("ydn.db.con.SimpleStorage");t.yb=s("b");
t.ta=function(a,b){function c(a,b){setTimeout(function(){b?(O(d.c,d+" opening fail"),e.l(b)):(O(d.c,d+" version "+d.yb()+" open"),e.n(a))},10)}var d=this,e=new I;this.e=this.g.Ob(a);this.d=a;this.a=b;var f=Ve(this.d);this.b=NaN;var g=Rd(this.e.getItem(f));v(g.version)&&!C(g.version)&&(g.version=NaN);if(g)if(g=new Wd(g),Zd(this.a,g))if(!this.a.d&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new oe("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;this.b=
v(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var l=this.a.a[h]||null;if(this.a instanceof $d)for(h=0;h<g.count();h++)l=g.a[h]||null,ae(this.a,l);h=this.a.toJSON();h.version=this.b||NaN;this.e.setItem(f,W(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)l=this.a.a[h]||null;this.b=g.version||NaN;c(this.b)}else g=b.toJSON(),this.b=1,g.version=this.b,this.e.setItem(f,W(g)),c(NaN);return e};t.zb=function(){return!!this.d};t.ib=k();t.Ia=k();t.jb=k();t.ua=aa("memory");t.xb=k();
t.Xa=function(a,b,c,d){a(new Cf(this,function(a,b){d(a,b)}))};t.toString=function(){return"SimpleStorage:"+this.ua()+":"+(this.d+":"+this.b)};function Lf(){Kf.call(this,this)}G(Lf,Kf);Lf.prototype.Ob=function(){return window.localStorage};Lf.prototype.ua=aa("localstorage");yb.push(function(a,b){if(!b||"localstorage"==b){var c=new Lf,d=new $d;c.ta(a,d);c.P(function(a){for(var b=0;b<a.a.length;b++)Bf(c,a.a[b].getName()).clear()})}});function Mf(){Kf.call(this,this)}G(Mf,Kf);Mf.prototype.Ob=function(){return window.sessionStorage};Mf.prototype.ua=aa("sessionstorage");
yb.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Mf,d=new $d;c.ta(a,d);c.P(function(a){for(var b=0;b<a.a.length;b++)Bf(c,a.a[b].getName()).clear()})}});function Nf(a){this.a=v(a)?a:4194304}t=Nf.prototype;
t.ta=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.d?isNaN(f)?1:f+1:c.version;N(e.c,a+": changing version from "+b.version+" to "+g);var h=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.P(function(b){h=!0;for(var d=0;d<c.count();d++){var f=X(b,(c.a[d]||null).getName()),f=f?f.hint(c.a[d]||null):null;Of(e,a,c.a[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.a[d]||null,Yd(c,f.getName())||(c instanceof $d?ae(c,f):(f="DROP TABLE "+Dd(f),O(e.c,f),a.executeSql(f,
[],k(),function(a,b){throw b;})))},a,b)},function(c){Yc(e.c,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a);throw c;},function(){if(h){var f=".";l!=c.a.length&&(f=" but unexpected stores exists.");P(e.c,a+":"+b.version+" ready"+f);d(b)}else M(e.c,a+": changing version voided.")})}function d(a,b){v(b)?(e.D=null,g.l(b)):(e.D=a,g.n(parseFloat(f)))}var e=this,f=NaN,g=new I,h=null;try{h=u.openDatabase(a,"",a,this.a)}catch(l){if("SECURITY_ERR"==l.name)M(this.c,
"SECURITY_ERR for opening "+a),h=null,this.Xb=new se(l);else throw l;}if(h){var f=h.version,m="database "+a+(0==h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?(N(e.c,"Existing "+m+" opened as requested."),d(h)):this.P(function(a){(a=Zd(b,a,!0))?(0==h.version.length?N(e.c,"New "+m+" created."):b.d?N(e.c,"Existing "+m+" opened and schema change for "+a):N(e.c,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(N(e.c,"Existing "+m+" with same schema opened."),
d(h))},null,h)}else d(null,this.Xb);return g};t.ua=aa("websql");t.Xb=null;t.D=null;t.c=R("ydn.db.con.WebSql");t.ib=k();t.Ia=k();
function Pf(a){var b=a.u,c="CREATE TABLE IF NOT EXISTS "+Dd(a)+" (",d=a.f,c=c+(d+" "+b+" PRIMARY KEY ");a.d&&(c+=" AUTOINCREMENT ");a.Bb||(c+=" ,_default_ BLOB");for(var e=[],f=[d],g=0,h=a.a.length;g<h;g++){var l=a.index(g),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Fa(m)+" ("+d+" "+b+", "+l.d+" "+l.h+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=l.type&&z(n)&&(n="CREATE "+m+" INDEX IF NOT EXISTS "+
Fa(a.getName()+"-"+l.getName())+" ON "+Dd(a)+" ("+Fa(n)+")",e.push(n)),n=l.d,-1==f.indexOf(n)&&(c+=", "+n+" "+l.h+m,f.push(n))}e.unshift(c+")");return e}t.yb=function(){return this.D?parseFloat(this.D.version):void 0};
t.P=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;P(f.c,"Parsing table schema from SQL: "+q);for(var r=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),y=void 0,A,q=[],B=!1,E=!1,F=0;F<r.length;F++){var Q=r[F].match(/\w+|"[^"]+"/g),xa=Ka(Q,function(a){return a.toUpperCase()}),ka=Ca(Q[0]),
Q=pd(xa[1]);if(-1!=xa.indexOf("PRIMARY")&&-1!=xa.indexOf("KEY")){A=Q;if(z(ka)&&!sa(ka)&&"_ROWID_"!=ka){var fb=ka.split(","),y=ka;1<fb.length&&(y=fb,A=void 0)}-1!=xa.indexOf("AUTOINCREMENT")&&(B=!0)}else if("_ROWID_"!=ka)if("_default_"==ka)E=!0;else{var Md="UNIQUE"==xa[2];0==ka.lastIndexOf(e.tbl_name+"-",0)&&(ka=ka.substr(e.tbl_name.length+1));xa=new od(ka,Q,Md);q.push(xa)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var qb=e.name.split(":");if(3<=qb.length){var Lb=qb[1],y=new od(qb[2],Q,Md,!0),r=Oa(q,
function(a){return a.getName()==qb[2]});0<=r?q[r]=y:q.push(y);r=Oa(h,function(a){return a.getName()===Lb});0<=r?(F=h[r],h[r]=new yd(F.getName(),F.keyPath,B,A,q,void 0,!E)):h.push(new yd(Lb,void 0,!1,void 0,[y]));P(f.c,'multi entry index "'+y.getName()+'" found in '+Lb+(-1==r?"*":""))}else M(f.c,'Invalid multiEntry store name "'+e.name+'"')}else F=Oa(h,function(a){return a.getName()===e.name}),0<=F?(r=h[F].index(0),q.push(r),h[F]=new yd(e.name,y,B,A,q,void 0,!E)):(q=new yd(e.name,y,B,A,q,void 0,!E),
h.push(q))}}d=new Wd(g,h);a(d)}}var f=this,g=(c=c||this.D)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.P(a,b,c)},function(a){Yc(f.c,"opening tx: "+a.message);throw a;},e)};
function Of(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new re(e,f);})}var g=0,h=Pf(c),l="Create";if(e){e=Nd(c,e);if(0==e.length){P(a.c,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";M(a.c,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Fa(c.getName()))}P(a.c,l+" table: "+c.getName()+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}t.zb=function(){return!!this.D};t.xb=function(){this.D=null};t.Xa=function(a,b,c,d){function e(a){P(h.c,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.D&&(a(null),d("abort",this.Xb));c==ib?this.D.readTransaction(g,e,f):c==jb?this.D.changeVersion(this.D.version,this.D.version+1+"",g,e,f):this.D.transaction(g,e,f)};
yb.push(function(a,b){if(!b||"websql"==b){var c=new Nf,d=new $d;O(c.c,"deleting websql database: "+a);var d=c.ta(a,d),e=function(){c.c.log(Qc,"all tables in "+a+" deleted.",void 0)};d.U(function(){c.Xa(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,P(c.c,"deleting table: "+p.name),b.executeSql("DROP TABLE "+
p.name))}O(c.c,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],J,e)});d.Hb(function(){M(c.c,"Connecting "+a+" failed.")})}});Nf.prototype.jb=k();Nf.prototype.toString=function(){return"WebSql:"+(this.D?":"+this.D.version:"")};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
Se.prototype.Qb=function(a){return"indexeddb"==a&&kb?new If(this.u,this.L):"websql"==a&&ga(u.openDatabase)?new Nf(this.u):"localstorage"==a&&window.localStorage?new Lf:"sessionstorage"==a&&window.sessionStorage?new Mf:"memory"==a?new Kf:null};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
Z.prototype.branch=Z.prototype.Ac;Z.prototype.add=Z.prototype.add;Z.prototype.get=Z.prototype.get;Z.prototype.keys=Z.prototype.keys;Z.prototype.values=Z.prototype.O;Z.prototype.put=Z.prototype.put;Z.prototype.clear=Z.prototype.clear;Z.prototype.remove=Z.prototype.Ab;Z.prototype.count=Z.prototype.count;He.prototype.add=He.prototype.add;He.prototype.get=He.prototype.get;He.prototype.keys=He.prototype.keys;He.prototype.values=He.prototype.O;He.prototype.put=He.prototype.put;He.prototype.clear=He.prototype.clear;
He.prototype.remove=He.prototype.Ab;He.prototype.count=He.prototype.count;pa("ydn.db.Key",K);K.prototype.id=K.prototype.Rc;K.prototype.parent=K.prototype.Sc;K.prototype.storeName=K.prototype.Tc;pa("ydn.db.KeyRange",L);L.upperBound=L.upperBound;L.lowerBound=L.lowerBound;L.bound=L.bound;L.only=L.only;L.starts=function(a){var b;if(w(a))b=Sa(a),b.push("\uffff");else if(z(a))b=a+"\uffff";else return L.only(a);return L.bound(a,b,!1,!0)};Db.prototype.store_name=Db.prototype.d;Db.prototype.getStoreName=Db.prototype.f;
Hb.prototype.name=Hb.prototype.name;Hb.prototype.getKey=Hb.prototype.g;Hb.prototype.getValue=Hb.prototype.h;Ib.prototype.name=Ib.prototype.name;Ib.prototype.getKeys=Ib.prototype.F;Ib.prototype.getValues=Ib.prototype.v;var Qf=!rc||rc&&9<=Ec,Rf=rc&&!Cc("9");!tc||Cc("528");sc&&Cc("1.9b")||rc&&Cc("8")||qc&&Cc("9.5")||tc&&Cc("528");sc&&!Cc("8")||rc&&Cc("9");function Sf(a){Sf[" "](a);return a}Sf[" "]=da;function Tf(a,b){a&&Uf(this,a,b)}G(Tf,Cb);t=Tf.prototype;t.target=null;t.clientX=0;t.clientY=0;t.mc=null;function Uf(a,b,c){var d=a.type=b.type;Cb.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&sc)try{Sf(c.nodeName)}catch(e){}a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.mc=b;b.defaultPrevented&&a.preventDefault();delete a.b}
t.preventDefault=function(){Tf.k.preventDefault.call(this);var a=this.mc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Rf)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Vf="closure_listenable_"+(1E6*Math.random()|0);function Wf(a){return!(!a||!a[Vf])}var Xf=0;function Yf(a,b,c,d,e,f){this.S=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.ia=f;this.key=++Xf;this.M=this.na=!1};var Zf={},$f={},ag={},bg={};function cg(a,b,c,d,e){if(w(b)){for(var f=0;f<b.length;f++)cg(a,b[f],c,d,e);return null}c=dg(c);return Wf(a)?a.$b(b,c,d,e):eg(a,b,c,!1,d,e)}
function eg(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=$f;b in g||(g[b]={j:0,aa:0});g=g[b];e in g||(g[e]={j:0,aa:0},g.j++);var g=g[e],h=ha(a),l;g.aa++;if(g[h]){l=g[h];for(var m=0;m<l.length;m++)if(g=l[m],g.S==c&&g.ia==f){if(g.M)break;d||(l[m].na=!1);return l[m]}}else l=g[h]=[],g.j++;m=fg();g=new Yf(c,m,a,b,e,f);g.na=d;m.src=a;m.S=g;l.push(g);ag[h]||(ag[h]=[]);ag[h].push(g);a.addEventListener?a.addEventListener(b,m,e):a.attachEvent(b in bg?bg[b]:bg[b]="on"+b,m);return Zf[g.key]=
g}function fg(){var a=gg,b=Qf?function(c){return a.call(b.src,b.S,c)}:function(c){c=a.call(b.src,b.S,c);if(!c)return c};return b}function hg(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)hg(a,b[f],c,d,e);else c=dg(c),Wf(a)?ig(a,b,c,!0,d,e):eg(a,b,c,!0,d,e)}function jg(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)jg(a,b[f],c,d,e);else if(c=dg(c),Wf(a))a.Na(b,c,d,e);else if(d=!!d,a=kg(a,b,d))for(f=0;f<a.length;f++)if(a[f].S==c&&a[f].capture==d&&a[f].ia==e){lg(a[f]);break}}
function lg(a){if(C(a)||!a||a.M)return!1;var b=a.src;if(Wf(b))return mg(b,a);var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in bg?bg[c]:bg[c]="on"+c,d);b=ha(b);ag[b]&&(d=ag[b],Qa(d,a),0==d.length&&delete ag[b]);a.M=!0;a.S=null;a.a=null;a.src=null;a.ia=null;if(d=$f[c][e][b])d.qc=!0,ng(c,e,b,d);delete Zf[a.key];return!0}
function ng(a,b,c,d){if(!d.gb&&d.qc){for(var e=0,f=0;e<d.length;e++)d[e].M||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.qc=!1;0==f&&(delete $f[a][b][c],$f[a][b].j--,0==$f[a][b].j&&(delete $f[a][b],$f[a].j--),0==$f[a].j&&delete $f[a])}}function kg(a,b,c){var d=$f;return b in d&&(d=d[b],c in d&&(d=d[c],a=ha(a),d[a]))?d[a]:null}
function og(a,b,c,d,e){var f=1;b=ha(b);if(a[b]){var g=--a.aa,h=a[b];h.gb?h.gb++:h.gb=1;try{for(var l=h.length,m=0;m<l;m++){var n=h[m];n&&!n.M&&(f&=!1!==pg(n,e))}}finally{a.aa=Math.max(g,a.aa),h.gb--,ng(c,d,b,h)}}return Boolean(f)}function pg(a,b){var c=a.S,d=a.ia||a.src;a.na&&lg(a);return c.call(d,b)}
function gg(a,b){if(a.M)return!0;var c=a.type,d=$f;if(!(c in d))return!0;var d=d[c],e,f;if(!Qf){e=b||ca("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(m){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new Tf;Uf(l,e,this);e=!0;try{if(g){for(var n=[],p=l.a;p;p=p.parentNode)n.push(p);f=d[!0];f.aa=f.j;for(var q=n.length-1;!l.b&&0<=q&&f.aa;q--)l.a=n[q],e&=og(f,n[q],c,!0,l);if(h)for(f=d[!1],f.aa=
f.j,q=0;!l.b&&q<n.length&&f.aa;q++)l.a=n[q],e&=og(f,n[q],c,!1,l)}else e=pg(a,l)}finally{n&&(n.length=0)}return e}c=new Tf(b,this);return e=pg(a,c)}var qg="__closure_events_fn_"+(1E9*Math.random()>>>0);function dg(a){return ga(a)?a:a[qg]||(a[qg]=function(b){return a.handleEvent(b)})};function rg(){zb.call(this);this.d={};this.hc=this}G(rg,zb);rg.prototype[Vf]=!0;t=rg.prototype;t.cc=null;t.removeEventListener=function(a,b,c,d){jg(this,a,b,c,d)};
function sg(a,b){var c,d=a.cc;if(d)for(c=[];d;d=d.cc)c.push(d);var d=a.hc,e=b,f=e.type||e;if(z(e))e=new Cb(e,d);else if(e instanceof Cb)e.target=e.target||d;else{var g=e,e=new Cb(f,d);Wb(e,g)}var g=!0,h;if(c)for(var l=c.length-1;!e.b&&0<=l;l--)h=e.a=c[l],g=tg(h,f,!0,e)&&g;e.b||(h=e.a=d,g=tg(h,f,!0,e)&&g,e.b||(g=tg(h,f,!1,e)&&g));if(c)for(l=0;!e.b&&l<c.length;l++)h=e.a=c[l],g=tg(h,f,!1,e)&&g}
t.w=function(){rg.k.w.call(this);var a=0,b;for(b in this.d){for(var c=this.d[b],d=0;d<c.length;d++)++a,delete Zf[c[d].key],c[d].M=!0;c.length=0}this.cc=null};t.$b=function(a,b,c,d){return ig(this,a,b,!1,c,d)};function ig(a,b,c,d,e,f){var g=a.d[b]||(a.d[b]=[]),h=ug(g,c,e,f);if(-1<h)return a=g[h],d||(a.na=!1),a;a=new Yf(c,null,a,b,!!e,f);a.na=d;g.push(a);return a}
t.Na=function(a,b,c,d){if(!(a in this.d))return!1;a=this.d[a];b=ug(a,b,c,d);return-1<b?(c=a[b],delete Zf[c.key],c.M=!0,1==Ia.splice.call(a,b,1).length):!1};function mg(a,b){var c=b.type;if(!(c in a.d))return!1;if(c=Qa(a.d[c],b))delete Zf[b.key],b.M=!0;return c}function tg(a,b,c,d){if(!(b in a.d))return!0;var e=!0;b=Sa(a.d[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.M&&g.capture==c){var h=g.S,l=g.ia||g.src;g.na&&mg(a,g);e=!1!==h.call(l,d)&&e}}return e&&!1!=d.e}
function ug(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.S==b&&f.capture==!!c&&f.ia==d)return e}return-1};function vg(a){zb.call(this);this.b=a;this.a={}}G(vg,zb);var wg=[];vg.prototype.$b=function(a,b,c,d,e){w(b)||(wg[0]=b,b=wg);for(var f=0;f<b.length;f++){var g=cg(a,b[f],c||this,d||!1,e||this.b||this);if(!g)break;this.a[g.key]=g}return this};
vg.prototype.Na=function(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)this.Na(a,b[f],c,d,e);else{a:if(e=e||this.b||this,d=!!d,c=dg(c||this),Wf(a))a=a.d[b],b=-1,a&&(b=ug(a,c,d,e)),e=-1<b?a[b]:null;else{if(a=kg(a,b,d))for(b=0;b<a.length;b++)if(!a[b].M&&a[b].S==c&&a[b].capture==d&&a[b].ia==e){e=a[b];break a}e=null}e&&(lg(e),delete this.a[e.key])}return this};vg.prototype.w=function(){vg.k.w.call(this);Rb(this.a,lg);this.a={}};
vg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function xg(){}xg.prototype.a=null;var yg;function zg(){}G(zg,xg);function Ag(a){return(a=Bg(a))?new ActiveXObject(a):new XMLHttpRequest}function Cg(a){var b={};Bg(a)&&(b[0]=!0,b[1]=!0);return b}
function Bg(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b}yg=new zg;var Dg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Eg(a){rg.call(this);this.headers=new cc;this.p=a||null;this.e=!1;this.$=this.a=null;this.ob=this.T="";this.i=0;this.G="";this.f=this.La=this.L=this.oa=!1;this.u=0;this.g=null;this.h=Fg;this.vb=!1}G(Eg,rg);var Fg="";Eg.prototype.b=R("goog.net.XhrIo");var Gg=/^https?$/i,Hg=["POST","PUT","DELETE"];t=Eg.prototype;t.oc=s("h");
function Ig(a,b,c,d,e){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.T+"; newUri="+b);c=c?c.toUpperCase():"GET";a.T=b;a.G="";a.i=0;a.ob=c;a.oa=!1;a.e=!0;a.a=a.p?Ag(a.p):Ag(yg);a.$=a.p?a.p.a||(a.p.a=Cg(a.p)):yg.a||(yg.a=Cg(yg));a.a.onreadystatechange=na(a.sc,a);try{N(a.b,Jg(a,"Opening Xhr")),a.La=!0,a.a.open(c,b,!0),a.La=!1}catch(f){N(a.b,Jg(a,"Error opening Xhr: "+f.message));Kg(a,f);return}b=d||"";var g=a.headers.clone();e&&Yb(e,function(a,b){dc(g,b,a)});e=Na(g.F(),
Lg);d=u.FormData&&b instanceof u.FormData;!(0<=H(Hg,c))||e||d||dc(g,"Content-Type","application/x-www-form-urlencoded;charset=utf-8");Yb(g,function(a,b){this.a.setRequestHeader(b,a)},a);a.h&&(a.a.responseType=a.h);"withCredentials"in a.a&&(a.a.withCredentials=a.vb);try{a.g&&(u.clearTimeout(a.g),a.g=null),0<a.u&&(N(a.b,Jg(a,"Will abort after "+a.u+"ms if incomplete")),a.g=u.setTimeout(na(a.Pc,a),a.u)),N(a.b,Jg(a,"Sending request")),a.L=!0,a.a.send(b),a.L=!1}catch(h){N(a.b,Jg(a,"Send error: "+h.message)),
Kg(a,h)}}function Lg(a){return"content-type"==a.toLowerCase()}t.Pc=function(){"undefined"!=typeof ba&&this.a&&(this.G="Timed out after "+this.u+"ms, aborting",this.i=8,N(this.b,Jg(this,this.G)),sg(this,"timeout"),this.abort(8))};function Kg(a,b){a.e=!1;a.a&&(a.f=!0,a.a.abort(),a.f=!1);a.G=b;a.i=5;Mg(a);Ng(a)}function Mg(a){a.oa||(a.oa=!0,sg(a,"complete"),sg(a,"error"))}
t.abort=function(a){this.a&&this.e&&(N(this.b,Jg(this,"Aborting")),this.e=!1,this.f=!0,this.a.abort(),this.f=!1,this.i=a||7,sg(this,"complete"),sg(this,"abort"),Ng(this))};t.w=function(){this.a&&(this.e&&(this.e=!1,this.f=!0,this.a.abort(),this.f=!1),Ng(this,!0));Eg.k.w.call(this)};t.sc=function(){this.La||this.L||this.f?Og(this):this.Lc()};t.Lc=function(){Og(this)};
function Og(a){if(a.e&&"undefined"!=typeof ba)if(a.$[1]&&4==Pg(a)&&2==Qg(a))N(a.b,Jg(a,"Local request error detected and ignored"));else if(a.L&&4==Pg(a))u.setTimeout(na(a.sc,a),0);else if(sg(a,"readystatechange"),4==Pg(a)){N(a.b,Jg(a,"Request complete"));a.e=!1;try{Rg(a)?(sg(a,"complete"),sg(a,"success")):(a.i=6,a.G=Sg(a)+" ["+Qg(a)+"]",Mg(a))}finally{Ng(a)}}}
function Ng(a,b){if(a.a){var c=a.a,d=a.$[0]?da:null;a.a=null;a.$=null;a.g&&(u.clearTimeout(a.g),a.g=null);b||sg(a,"ready");try{c.onreadystatechange=d}catch(e){Yc(a.b,"Problem encountered resetting onreadystatechange: "+e.message)}}}
function Rg(a){var b=Qg(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.T).match(Dg)[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Gg.test(a?a.toLowerCase():"");c=b}return c}function Pg(a){return a.a?a.a.readyState:0}function Qg(a){try{return 2<Pg(a)?a.a.status:-1}catch(b){return M(a.b,"Can not get status: "+b.message),-1}}
function Sg(a){try{return 2<Pg(a)?a.a.statusText:""}catch(b){return N(a.b,"Can not get status: "+b.message),""}}function Tg(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.h){case Fg:case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}Yc(a.b,"Response type "+a.h+" is not supported on this browser");return null}catch(b){return N(a.b,"Can not get response: "+b.message),null}}
function Jg(a,b){return b+" ["+a.ob+" "+a.T+" "+Qg(a)+"]"};function Ug(){this.a=[]}t=Ug.prototype;t.ca=0;t.ma=0;function Vg(a){if(a.ca!=a.ma){var b=a.a[a.ca];delete a.a[a.ca];a.ca++;return b}}t.s=function(){return this.ma-this.ca};t.X=function(){return 0==this.ma-this.ca};t.clear=function(){this.ma=this.ca=this.a.length=0};t.contains=function(a){return 0<=H(this.a,a)};t.v=function(){return this.a.slice(this.ca,this.ma)};function Wg(a,b){zb.call(this);this.g=a||0;this.d=b||10;if(this.g>this.d)throw Error(Xg);this.a=new Ug;this.b=new hc;this.f=null;this.Ta()}G(Wg,zb);var Xg="[goog.structs.Pool] Min can not be greater than max";t=Wg.prototype;t.cb=function(){var a=oa();if(!(null!=this.f&&0>a-this.f)){for(var b;0<this.a.s()&&(b=Vg(this.a),!this.bc(b));)this.Ta();!b&&this.s()<this.d&&(b=this.Ub());b&&(this.f=a,this.b.add(b));return b}};t.pb=function(a){return this.b.Ea(a)?(this.Ib(a),!0):!1};
t.Ib=function(a){this.b.Ea(a);if(this.bc(a)&&this.s()<this.d){var b=this.a;b.a[b.ma++]=a}else Yg(a)};t.Ta=function(){for(var a=this.a;this.s()<this.g;){var b=this.Ub();a.a[a.ma++]=b}for(;this.s()>this.d&&0<this.a.s();)Yg(Vg(a))};t.Ub=function(){return{}};function Yg(a){if("function"==typeof a.ba)a.ba();else for(var b in a)a[b]=null}t.bc=function(a){return"function"==typeof a.Ec?a.Ec():!0};t.contains=function(a){return this.a.contains(a)||this.b.contains(a)};t.s=function(){return this.a.s()+this.b.s()};
t.X=function(){return this.a.X()&&this.b.X()};t.w=function(){Wg.k.w.call(this);if(0<this.b.s())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var a=this.a;!a.X();)Yg(Vg(a));delete this.a};function Zg(a,b){this.a=a;this.b=b}Zg.prototype.clone=function(){return new Zg(this.a,this.b)};function $g(a){this.a=[];if(a)a:{var b,c;if(a instanceof $g){if(b=a.F(),c=a.v(),0>=a.s()){a=this.a;for(var d=0;d<b.length;d++)a.push(new Zg(b[d],c[d]));break a}}else b=Tb(a),c=Sb(a);for(d=0;d<b.length;d++)ah(this,b[d],c[d])}}function ah(a,b,c){var d=a.a;d.push(new Zg(b,c));b=d.length-1;a=a.a;for(c=a[b];0<b;)if(d=b-1>>1,a[d].a>c.a)a[b]=a[d],b=d;else break;a[b]=c}t=$g.prototype;t.v=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].b);return b};
t.F=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].a);return b};t.clone=function(){return new $g(this)};t.s=function(){return this.a.length};t.X=function(){return 0==this.a.length};t.clear=function(){Pa(this.a)};function bh(){$g.call(this)}G(bh,$g);function ch(a,b){this.e=new bh;Wg.call(this,a,b)}G(ch,Wg);t=ch.prototype;t.cb=function(a,b){if(!a)return ch.k.cb.call(this);ah(this.e,v(b)?b:100,a);this.Vb()};t.Vb=function(){for(var a=this.e;0<a.s();){var b=this.cb();if(b){var c;var d=a,e=d.a,f=e.length;c=e[0];if(0>=f)c=void 0;else{if(1==f)Pa(e);else{e[0]=e.pop();for(var e=0,d=d.a,f=d.length,g=d[e];e<f>>1;){var h=2*e+1,l=2*e+2,h=l<f&&d[l].a<d[h].a?l:h;if(d[h].a>g.a)break;d[e]=d[h];e=h}d[e]=g}c=c.b}c.apply(this,[b])}else break}};
t.Ib=function(a){ch.k.Ib.call(this,a);this.Vb()};t.Ta=function(){ch.k.Ta.call(this);this.Vb()};t.w=function(){ch.k.w.call(this);u.clearTimeout(this.i);this.e.clear();this.e=null};function dh(a,b,c){ch.call(this,b,c);this.h=a}G(dh,ch);dh.prototype.Ub=function(){var a=new Eg,b=this.h;b&&Yb(b,function(b,d){dc(a.headers,d,b)});return a};dh.prototype.bc=function(a){return!a.da&&!a.a};function eh(a,b,c,d,e){rg.call(this);this.e=v(a)?a:1;this.f=v(e)?Math.max(0,e):0;this.sa=new dh(b,c,d);this.a=new cc;this.b=new vg(this)}G(eh,rg);var fh="ready complete success error abort timeout".split(" ");function gh(a,b,c,d,e,f,g){if(a.a.get(b))throw Error("[goog.net.XhrManager] ID in use");c=new hh(c,na(a.h,a,b),d,e,f,g,v(void 0)?void 0:a.e,void 0,void 0);dc(a.a,b,c);b=na(a.g,a,b);a.sa.cb(b,void 0)}
eh.prototype.abort=function(a,b){var c=this.a.get(a);if(c){var d=c.Oa;c.ic=!0;b&&(this.b.Na(d,fh,c.wb),hg(d,"ready",function(){this.sa.pb(d)},!1,this),fc(this.a,a));d&&d.abort()}};eh.prototype.g=function(a,b){var c=this.a.get(a);c&&!c.Oa?(this.b.$b(b,fh,c.wb),b.u=Math.max(0,this.f),b.h=c.oc(),c.Oa=c.hd=b,c.Oa.vb=c.vb,sg(this,new ih("ready",this,a,b)),jh(this,a,b),c.ic&&b.abort()):this.sa.pb(b)};
eh.prototype.h=function(a,b){var c=b.target;switch(b.type){case "ready":jh(this,a,c);break;case "complete":a:{var d=this.a.get(a);if(7==c.i||Rg(c)||d.Ua>d.Tb)if(sg(this,new ih("complete",this,a,c)),d&&(d.kc=!0,d.Nb)){c=d.Nb.call(c,b);break a}c=null}return c;case "success":sg(this,new ih("success",this,a,c));break;case "timeout":case "error":d=this.a.get(a);d.Ua>d.Tb&&sg(this,new ih("error",this,a,c));break;case "abort":sg(this,new ih("abort",this,a,c))}return null};
function jh(a,b,c){var d=a.a.get(b);!d||d.kc||d.Ua>d.Tb?(d&&(a.b.Na(c,fh,d.wb),fc(a.a,b)),a.sa.pb(c)):(d.Ua++,Ig(c,d.Qc,d.Sb(),d.ab(),d.Da()))}eh.prototype.w=function(){eh.k.w.call(this);this.sa.ba();this.sa=null;this.b.ba();this.b=null;var a=this.a;Yb(a,function(a){a.ba()});a.clear();this.a=null};function ih(a,b,c,d){Cb.call(this,a,b);this.id=c;this.Oa=d}G(ih,Cb);
function hh(a,b,c,d,e,f,g,h,l){zb.call(this);this.vb=!!l;this.Qc=a;this.d=c||"GET";this.a=d;this.b=e||null;this.Tb=v(g)?g:1;this.Ua=0;this.ic=this.kc=!1;this.wb=b;this.Nb=f;this.e=h||Fg;this.Oa=null}G(hh,zb);t=hh.prototype;t.Sb=s("d");t.ab=s("a");t.Da=s("b");t.oc=s("e");t.w=function(){hh.k.w.call(this);delete this.wb;delete this.Nb};var kh;function lh(){kh||(kh=new eh);return kh}function mh(a,b,c){z(a)?this.qa=a:(this.qa=null,this.status=a,this.body=b,this.headers=c||{})}function nh(a){if(a.qa){var b=Rd(a.qa);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.headers=b.headers;a.body=b.body;a.qa=null}}function oh(a){nh(a);return a.status}function ph(a){nh(a);return a.body}mh.prototype.Da=function(){nh(this);return this.headers};function qh(a){nh(a);var b=a.body;return z(b)?JSON.parse(b):a.body}
function rh(a){return a instanceof mh?a:z(a)?new mh(a):new mh(a.status,a.body,a.headers)}function sh(a,b,c,d){this.path=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=void 0};function th(a,b){this.a=a;this.data=b}th.prototype.data=null;function uh(a,b,c,d){Cb.call(this,a,b);this.status=c;this.g=d}G(uh,Cb);uh.prototype.status=NaN;uh.prototype.h=s("status");uh.prototype.R=function(){return this.g.R()};function vh(a,b,c){uh.call(this,"conflict",a,b,c.a);this.d=c}G(vh,uh);vh.prototype.f=function(){return this.d.data};function wh(a,b,c,d){this.key=a;this.a=(this.a=d?b.opt_prefix:b)||{};this.b=c}var xh={bd:"key",Zc:"date",cd:"modified",ad:"expires",$c:"etag",dd:"updated",ed:"uri",NEXT:"next"};t=wh.prototype;t.Ra=function(){return null!=this.key?this.key:Ub(this.a,this.b.key)};t.xc=function(){return Ub(this.a,this.b.date)};t.bb=function(){return Ub(this.a,this.b.expires)};t.va=function(){return Ub(this.a,this.b.updated)};t.Cb=function(){return Ub(this.a,this.b.etag)};
function yh(a){var b={},c=a.va();c&&(b["if-modified-since"]=c);(a=a.Cb())&&1<a.length&&(b["if-none-match"]=a);return b}t.toJSON=function(){var a={};a.key=this.Ra();var b=this.xc();b&&(a.date=b);(b=this.bb())&&(a.expires=b);(b=this.va())&&(a.updated=b);(b=this.Cb())&&(a.etag=b);return a};function zh(a,b){this.key=a;this.headers=b}G(zh,wh);t=zh.prototype;t.Ra=s("key");t.xc=aa(NaN);t.bb=function(){return this.headers.expires};t.va=function(){return this.headers["last-updated"]};t.Cb=function(){return this.headers.etag};function Ah(a,b,c){this.a=a;this.g=c||null;this.d=this.b=null;this.key=b}t=Ah.prototype;t.c=R("ydn.db.sync.entry.Rest");t.R=function(){if(this.d&&this.a.G&&this.e){var a=this.a.u;this.a.$||delete this.d[a]}return this.d||null};t.Db=function(){return this.a.Wb(this.key)};t.nc=function(a,b){return a||qh(b)};t.save=function(a){var b=this.key;if(a&&!this.a.G)return oa(),Bh(this.a,[this.e]);var c=this.d;if(a&&!c)return bb();Ch(this.a,c,b);null!=this.e&&oa();return Dh(this.a,[c],void 0,[b])};
t.la=function(a,b){if(this.a.L&&D(this.b))a.call(b,304);else{var c=this;Eh(this,function(d){if(d){var e=d.bb();if(e&&e>oa()){a.call(b,304);return}}d=c.Ha(c.Db(),"GET",d);c.a.t().request(d).execute(function(d,e){c.e=new zh(c.key,e.Da());c.d=c.nc(d,e);a.call(b,oh(e))})})}};
t.Ha=function(a,b,c,d){a=new sh(a,b);if(c){var e;"POST"==a.method||"PUT"==a.method||"DELETE"==a.method?(e={},(b=c.va())&&(e["if-unmodified-since"]=b),(c=c.Cb())&&1<c.length&&(e["if-match"]=c),c=e):c=yh(c);e=c;a.headers?Wb(a.headers,e):a.headers=e}a.body=D(d)?JSON.stringify(d):d;P(this.c,this+" "+a.method+" "+a.path+" "+Sd(e));return a};
function Fh(a,b){Eh(a,function(a){a=this.Ha(this.Db(),"PUT",a,this.g);this.a.t().request(a).execute(function(a,c){this.e=new zh(this.key,c.Da());this.d=a;b.call(void 0,oh(c))},this)},a)}function Eh(a,b,c){a.f?b.call(c,a.f):Gh(a.a,a.key,function(d){a.f=d;b.call(c,d)})}t.load=function(a){if(this.b&&this.f)a.call(this,this.b);else{var b=this;this.a.load(this.key,function(c,d){b.b=c;var e=b.a.u;b.b&&e&&b.b[e]&&(b.f=new wh(b.key,b.b,b.a.g,e),b.a.$||delete b.b[e]);b.b=c;b.f=d;a.call(b,c)})}};
function Hh(a,b){var c=a.Db(),d=a.a.t();Eh(a,function(a){a=this.Ha(c,"DELETE",a);d.request(a).execute(function(a,d){P(this.c,"deleted "+c+" "+oh(d));b.call(this,oh(d))},this)},a)}t.toString=function(){return"sync.entry{"+this.a.a+":"+this.key+"}"};function Ih(a,b,c){this.storage=a;this.e=b;this.a=b.getName();a="format readRequestTimeout writeRequestTimeout transport Options fetchStrategies baseUri immutable keepMeta metaStoreName metaDataName prefetch prefetchRefractoryPeriod".split(" ");for(var d in c)if(-1==H(a,d))throw new V('Unknown Sync attribute "'+d+'"  in Sync.');this.L=!!c.immutable;this.d=c.baseUri;a=c.Options;this.b=c.metaStoreName==this.a?void 0:c.metaStoreName;this.u=c.metaDataName;this.tb=a.delimiter||"";this.h=a.prefix||"";this.$=
!!c.keepMeta;this.oa=c.prefetch||null;this.La=C(c.prefetchRefractoryPeriod)?c.prefetchRefractoryPeriod:5E3;b=this.W();for(d in a)if(-1==H(b,d))throw new V('Unknown Sync.Options attribute "'+d+'" in Sync.Options');this.f=Jh(c.transport);this.G=!this.b;c={};for(var e in xh)c[e]=xh[e];this.g=c;if(a.metaData)for(d in a.metaData)this.g[d]=a.metaData[d];this.p=null;this.T=NaN}t=Ih.prototype;t.W=function(){return["metaStoreName","metaData","delimiter","prefix"]};t.c=R("ydn.db.sync.Rest");t.V=s("d");
t.t=function(){this.f||(this.f=new Kh);return this.f};t.toString=function(){return"sync:"+this.a};function Bh(a,b){return Je(a.storage.a,a.b,b).Hb(function(a){throw a;})}function Ch(a,b,c){if(a.e.keyPath&&null==Jd(a.e,b)&&null!=c&&(a=a.e.keyPath,b))if(-1==a.indexOf("."))b[a]=c;else{a=a.split(".");for(var d=a.pop(),e;e=a.shift();)D(b[e])||(b[e]={}),b=b[e];b[d]=c}}
function Dh(a,b,c,d){d=a.e.keyPath?void 0:d;if(c){if(a.b){if(b){for(var e=[],f=b.concat(c),g=0;g<b.length;g++)e.push(new K(a.a,a.e.keyPath?NaN:d[g]));for(g=0;g<c.length;g++)e.push(new K(a.b,NaN));return Je(a.storage.a,e,f)}return Je(a.storage.a,a.b,c)}for(g=0;g<b.length;g++)null!=c[g]&&Wb(b[g],c[g])}return Je(a.storage.a,a.a,b,d)}function Lh(a,b){var c=[new K(a.a,b)];a.b&&c.push(new K(a.b,b));return Ke(a.storage.a,c)}t.Wb=function(a){return this.V()+a};
t.add=function(a,b,c){null!=c?Ch(this,b,c):this.e.keyPath&&(c=Jd(this.e,b));var d=this.B(c,b),e=this;Fh(d,function(a){201==a||200==a?(P(e.c,d+" created"),d.save(!0)):M(e.c,"Unexpected respond "+a+" for add "+d)})};function Gh(a,b,c){var d=new K(z(a.b)?a.b:a.a,b);Me(a.storage.a,[d]).o(function(a){c.call(void 0,new wh(b,a[0],this.g,this.u))},function(a){M(this.c,this+" error loading meta data "+a);c.call(void 0,null)},a)}
t.ac=function(a,b){var c=z(this.b)?this.b:this.a,d=a.map(function(a){return new K(c,a)});Me(this.storage.a,d).o(function(c){for(var d=[],g=0;g<a.length;g++)d[g]=new wh(a[g],c[g],this.g,this.u);b(d)},function(a){M(this.c,this+" error loading meta data "+a);b([])},this)};
t.load=function(a,b){var c=this.b,d=!1,e=[new K(this.a,a)];z(c)&&(e.push(new K(c,a)),d=!0);Me(this.storage.a,e).o(function(c){var e=c[0];b(e,new wh(a,d?c[1]:e,this.g,this.u))},function(a){M(this.c,this+" error loading meta data "+a);b(null,null)},this)};
t.get=function(a,b){var c,d=this.c;hd(a,function(e,f,g){if(f)g(e,f);else{id(a,e);var h=v(e);if(h&&this.L)g(e);else{var l=this.B(b,e);c=l.b||null;Eh(l,function(a){if(a&&(a=a.bb())&&~(a>oa())){P(d,l+" not expired");g(c);return}l.la(function(a){if(304==a){if(g(c),!h)throw new nd(l+" not modified, but not exist in server");}else if(200==a)l.save().Q(function(){g(l.R())});else if(404==a)Lh(l.a,l.key).Q(function(){g(l.R())});else throw g(l.R()),new md("Invalid HTTP respond "+a+" for GET "+b);})})}}},this)};
function Mh(a,b,c,d,e,f){var g=[],h=a.c;O(a.c,d.length+", "+e.length+", "+f.length+", "+g.length+" records to fetch, update, delete, save");var l=d.length+e.length+f.length+g.length;if(0==l)b(c);else{for(var m=!1,n=function(){l--;0==l&&(b(c,m),b=null)},g=0;g<d.length;g++){var p=a.B(d[g]);p.index=g;p.la(function(a){200==a?(P(h,"A new "+this+" received from server"),this.save().o(function(){c[this.index]=this.R();n()},function(){m=!0;n()},this)):304==a?this.save(!0).o(function(){P(h,this+" expires date updated");
n()},function(){m=!0;n()},this):(M(h,"Invalid status "+a+" for fetching "+this),n())},p)}for(g=0;g<e.length;g++)p=a.B(e[g]),p.index=g,p.load(function(){this.la(function(a){200==a?(P(h,this+" updated from server"),this.save().o(function(){c[this.index]=this.R();n()},function(){m=!0;n()},this)):(M(h,"Invalid status "+a+" for fetching "+this),n())})});for(g=0;g<f.length;g++)p=a.B(f[g]),p.index=g,Lh(p.a,p.key).o(function(){c[this.index]=new th(p,null);n()},function(){m=!0;n()},p)}}
function Nh(a,b,c){hd(b,function(a,e,f){if(e)f(a,e);else if(Ma(a,function(a){return v(a)})&&this.L)f(a);else{id(b,a);var g=a.length;for(e=0;e<c.length;e++)if(this.L&&v(a[e]))g--,0==g&&f(a);else{var h=this.B(c[e],a[e]);h.index=e;h.la(function(b){200==b?(a[this.index]=this.R(),this.save()):404==b&&(a[this.index]=void 0);g--;0==g&&f(a)},h)}}},a)}t.B=function(a,b){return new Ah(this,a,b)};t.count=function(a){return a};t.Zb=k();
t.O=function(a,b,c){Oh(this)?(P(this.c,"prefetch queued"),hd(a,function(d,e,f){id(a,d);e?f(d,e):Ph(this,function(a){a?Le(this.storage.a,this.a,null,null,!1,b,c).o(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(){M(this.c,this+" prefetch fail");f(d)},this)},this)):this.Zb(a,b,c)};
t.keys=function(a,b,c,d,e,f,g){Oh(this)&&(P(this.c,"prefetch queued"),hd(a,function(h,l,m){id(a,h);l?m(h,l):Ph(this,function(a){a?Ne(this.storage.a,this.a,b,c,f,d,e,g).o(function(a){m(a)},function(a){m(a,!0)},this):m(h)},function(){M(this.c,this+" prefetch fail");m(h)},this)},this))};t.Rb=k();
t.put=function(a,b,c){this.e.keyPath&&(c=Jd(this.e,b));var d=this.B(c,b),e=this;T(a,function(){d.load(k())},this);hd(a,function(c,g,h){id(a,c);Fh(d,function(c){409==c?d.la(function(){var f=new th(d,b);id(a,f);e.storage.I(new vh(e.storage,c,f));h(void 0)}):200==c||201==c?(d.save(!0),h(b)):(M(e.c,"Unexpected response for PUT: "+c),h(null))})},this)};
function Qh(a,b,c){var d=a.B(c);d.load(function(){hd(b,function(e,f,g){Hh(d,function(f){if(409==f){f=new th(d,null);id(b,f);var l=new vh(a.storage,409,f);a.storage.I(l)}else 200==f?P(a.c,"Successfully deleted object "+c):(M(a.c,"Unexpected response for DELETE: "+f+" "+c),id(b,l));g(e)})})})}
t.za=function(){P(this.c,"starting prefetch");var a=new I;Le(this.storage.a,this.a,"updated.$t",null,!0,1).o(function(b){var c={};if(b=b[0])b=Ub(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new sh(this.V(),"GET",c);d.t().request(c).execute(function(b,c){if(200==oh(c)){if(!b){var g=ph(c);z(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?w(g)?g:[g]:[];0<g.length?Dh(d,g).Q(function(){a.n(!0)}):a.n(!1)}else 302==oh(c)?a.n():(g=d+": Invalid response status "+
oh(c)+" on prefetching",M(d.c,g),a.l(Error(g)))})},function(b){a.l(b)},this);return a};function Oh(a){return a.oa?a.T?oa()-a.T>a.La:!0:!1}function Ph(a,b,c,d){Oh(a)?a.p?a.p.o(b,c,d):(a.p=a.za(),a.T=oa(),a.p.o(b,c,d),a.p.o(function(a){P(this.c,"prefetch "+(a?"updated":"no update"));this.p=null},function(a){this.p=null;throw a;},a)):b.call(a,!1)};function Rh(a,b,c){Ih.call(this,a,b,c)}G(Rh,Ih);Rh.prototype.c=R("ydn.db.sync.Atom");Rh.prototype.W=function(){return Rh.k.W.call(this)};function Sh(a){this.data=a}Sh.prototype.ab=function(){return this.data.content||null};function Th(a,b,c){Ah.call(this,a,b,c)}G(Th,Ah);Th.prototype.c=R("ydn.db.sync.entry.S3");Th.prototype.getName=function(){return this.a.h+this.key};function Uh(a){this.data=a}G(Uh,Sh);R("ydn.gdata.base");var Vh,Wh=!rc||rc&&9<=Ec;!sc&&!rc||rc&&rc&&9<=Ec||sc&&Cc("1.9.1");rc&&Cc("9");function Xh(a,b){var c;c=a.className;c=z(c)&&c.match(/\S+/g)||[];for(var d=Ta(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=H(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function Yh(a,b){Rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Zh?a.setAttribute(Zh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Zh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function $h(a,b,c){function d(c){c&&b.appendChild(z(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!x(f)||D(f)&&0<f.nodeType?d(f):Ja(ai(f)?Sa(f):f,d)}}function ai(a){if(a&&"number"==typeof a.length){if(D(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}function bi(a){this.a=a||u.document||document}
function ci(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
bi.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Wh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var h={};Wb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(z(g)?f.className=g:w(g)?Xh.apply(null,[f].concat(g)):Yh(f,g));2<e.length&&$h(d,f,e);return f};bi.prototype.appendChild=function(a,b){a.appendChild(b)};
bi.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function di(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=ei();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function fi(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=ei();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function gi(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");}
function ei(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}}return a};var hi={atom:"http://www.w3.org/2005/Atom",ydn:"http://www.yathit.com/2012/ydn",app:"http://www.w3.org/2007/app",openSearch:"http://a9.com/-/spec/opensearch/1.1/",gAcl:"http://schemas.google.com/acl/2007",sites:"http://schemas.google.com/sites/2008",gs:"http://schemas.google.com/spreadsheets/2006",dc:"http://purl.org/dc/terms",batch:"http://schemas.google.com/gdata/batch",gd:"http://schemas.google.com/g/2005",gContact:"http://schemas.google.com/contact/2008",thr:"http://purl.org/syndication/thread/1.0",
xhtml:"http://www.w3.org/1999/xhtml"};R("ydn.xml");R("ydn");function ii(a,b,c){if(v(b))ji(this,b),v(c)||(c=a[b]);else for(var d in a)if(a.hasOwnProperty(d)&&D(a[d])&&z(a[d].xmlns)){this.Gb=[d].xmlns;ji(this,d);c=a[d];break}this.data=c;this.parent=a}t=ii.prototype;t.Gb="http://www.w3.org/2005/Atom";function ji(a,b){var c=b.split(":");1<c.length&&(a.Gb=hi[c[0]]||hi.xhtml||ii.prototype.Gb,b=c[1]);a.a=b}t.toString=function(){return"JsonElement:"+this.a};t.getName=s("a");t.setAttribute=function(a,b){a=a.replace(/:/,"$");this.data[a]=b};
t.appendChild=function(a){var b=a.getName();this.data[b]?(w(this.data[b])||(this.data[b]=[this.data[b]]),this.data[b].push(Rd(W(a.data)))):this.data[b]=Rd(W(a.data))};t.toJSON=function(){return{data:this.data,tagName:this.a}};
function ki(a){function b(a,g){d(g,a);var h,l;for(l in a)if(a.hasOwnProperty(l)&&!z(a[l]))if(z(a[l].$t)&&"xhtml"==a[l].type){h=c(l);d(h,a[l]);var m=fi(a[l].$t);e.importNode(m.documentElement,!0);h.appendChild(m.documentElement);g.appendChild(h)}else if(z(a[l].$t))h=c(l),h.textContent=a[l].$t,d(h,a[l]),g.appendChild(h);else if(w(a[l])&&z(a[l][0].$t))for(m=0;m<a[l].length;m++)h=c(l),h.textContent=a[l][m].$t,d(h,a[l][m]),g.appendChild(h);else if(w(a[l]))for(m=0;m<a[l].length;m++)h=c(l),g.appendChild(h),
b(a[l][m],h);else D(a[l])&&(h=c(l),g.appendChild(h),b(a[l],h))}function c(a){return e.createElement(a.replace("$",":"))}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&"$t"!=c&&z(b[c])&&a.setAttribute(c.replace("$",":"),b[c])}var e=di(a.getName(),a.Gb);b(a.data,e.documentElement);return gi(e.documentElement)}
t.clone=function(a){var b={};if(v(a))for(var c in this.data){var d=c.replace("$",":");z(this.data[c])?b[c]=this.data[c]:!0==a[d]&&(b[c]=Rd(W(this.data[c])))}else b=Rd(W(this.data));return new ii(null,this.a,b)};function li(a){var b;if(v(a.id))b=a.id.$t;else if(v(a.batch$id))b=a.batch$id.$t;else if(v(a.a))b=a.a.$t;else throw new be("id or batch:id required.");this.id=b;this.data=a}G(li,Uh);li.prototype.c=R("ydn.gdata.Entry");li.prototype.ab=Sh.prototype.ab;function mi(a,b,c){Ah.call(this,a,b,c)}G(mi,Ah);mi.prototype.Db=s("key");
mi.prototype.Ha=function(a,b,c,d){a=mi.k.Ha.call(this,a,b,c,d);this.a.uc(a.method)&&u.gapi&&u.gapi.auth&&(b=gapi.auth.getToken())&&b.access_token&&(a.headers.Authorization=b.token_type+" "+b.access_token);if("GET"==a.method)a.params.alt="json";else if("PUT"==a.method||"POST"==a.method){var e=new li(d);b=new ii(null,"entry",e.data);c=!1;b.xmlns||(b.xmlns="http://www.w3.org/2005/Atom",c=!0);d=["atom"];for(var f in e.data)if(e=f.match(/^(\w+)\$\w+/))e=e[1],e in hi&&(0<=H(d,e)||d.push(e));f=ki(b);c&&
delete b.xmlns;b=f.indexOf(" ");for(c=0;c<d.length;c++)e=d[c],e=(0==c?"xmlns":"xmlns:"+e)+'="'+hi[e]+'"',-1==f.indexOf(e)&&(f=f.substring(0,b+1)+e+" "+f.substr(b+1));a.body=f;a.headers["Content-Type"]="application/atom+xml"}return a};mi.prototype.nc=function(a,b){a=qh(b);a.feed&&(a=a.feed);a.entry&&(a=a.entry);return a};function ni(a,b,c){Ih.call(this,a,b,c);a=c.Options;this.i=a.kind;this.version=a.version;this.da=a.maxKeys;this.G=!0}G(ni,Rh);t=ni.prototype;t.version=null;t.c=R("ydn.db.sync.GData");t.B=function(a,b){return new mi(this,a,b)};t.W=function(){var a=ni.k.W.call(this);return a=a.concat("version projection kind prefetch prefetchRefractoryPeriod maxKeys".split(" "))};t.V=function(){return"https://www.googleapis.com/"+this.i+"/"};t.uc=aa(!1);
t.za=function(){P(this.c,"starting prefetch");var a=new I;Le(this.storage.a,this.a,"updated.$t",null,!0,1).o(function(b){var c={alt:"json",kind:this.i};this.da&&(c["max-results"]=this.da);if(b=b[0])b=Ub(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new sh(this.V(),"GET",c);d.t().request(c).execute(function(b,c){if(200==oh(c)){if(!b){var g=ph(c);z(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?w(g)?g:[g]:[];0<g.length?Dh(d,g).Q(function(){a.n(!0)}):a.n(!1)}else 302==
oh(c)?a.n():(g=d+": Invalid response status "+oh(c)+" on prefetching",M(d.c,g),a.l(Error(g)))})},function(b){a.l(b)},this);return a};
t.count=function(a){var b=Gd(this.e);if(!b)return a;var c=ed(a);a.o(function(a){id(c,a);Le(this.storage.a,this.a,b.getName(),null,!1,1).o(function(b){var f={alt:"json"};if(b=w(b)?b[0]:b)b=Ub(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),f["updated-min"]=b;var g=this,f=new sh(this.V(),"GET",f);this.t().request(f).execute(function(b,e){if(200==oh(e)){if(!b){var f=ph(e);z(f)&&(b=JSON.parse(f))}f=Ub(b.feed,"openSearch$totalResults");c.n(a+parseFloat(f||0))}else M(g.c,g+":Unexpected respond status "+
oh(e))})},function(a){c.l(a)},this)},function(a){c.l(a)},this);return c};t.get=function(a,b){if(Oh(this))P(this.c,"prefetch queued"),hd(a,function(c,d,e){id(a,c);Ph(this,function(a){a?(a=new K(this.a,b),Me(this.storage.a,[a]).o(function(a){e(a[0])},function(a){e(a,!0)},this)):e(c)},function(a){e(a,!0)},this)},this);else return ni.k.get.call(this,a,b)};function oi(a,b,c){Ah.call(this,a,b,c)}G(oi,mi);function pi(a,b,c){ni.call(this,a,b,c);this.d=this.d.substr(27);this.Ka=c.Options.prefix}G(pi,ni);pi.prototype.t=function(){this.f||(this.f=new qi(gapi.client));return this.f};pi.prototype.B=function(a,b){return new oi(this,a,b)};pi.prototype.V=function(){return this.d+this.Ka};
pi.prototype.za=function(){P(this.c,"starting prefetch");var a=new I;Le(this.storage.a,this.a,"updated",null,!0,1).o(function(b){var c={alt:"json"};if(b=b[0])b=Ub(b,"updated"),b=(new Date(1+ +new Date(b))).toISOString(),c.updatedMin=b;var d=this,c=new sh(this.V(),"GET",c);d.t().request(c).execute(function(b,c){if(b){var g=b.items||[];0<g.length?Dh(d,g).Q(function(){a.n(!0)}):a.n(!1)}else 302==oh(c)?a.n():(g=d+": Invalid response status "+oh(c)+" on prefetching",M(d.c,g),a.l(Error(g)))})},function(b){a.l(b)},
this);return a};function ri(a,b){this.a=a;this.prefix=si(this,"Prefix")[0];this.b=b.type}ri.prototype.s=function(){return this.a.documentElement.getElementsByTagName("Contents").length};ri.prototype.keys=function(){var a=si(this,"Key");if(this.prefix){var b=this.prefix.length,a=a.map(function(a){return a.substr(b)});"INTEGER"==this.b?a=a.map(function(a){return parseInt(a,10)}):"NUMERIC"==this.b&&(a=a.map(function(a){return parseFloat(a)}))}return a};
function si(a,b){for(var c=[],d=a.a.documentElement.getElementsByTagName(b),e=d.length,f=0;f<e;f++)c[f]=d[f].textContent;return c}function ti(a){return si(a,"LastModified").map(function(a){return(new Date(Date.parse(a))).toGMTString()})}
function ui(a){var b=a.a.documentElement.getElementsByTagName("NextMarker");return 1==b.length?b[0].textContent:"true"==a.a.documentElement.getElementsByTagName("IsTruncated")[0].textContent&&(a=a.a.documentElement.firstElementChild.lastElementChild)&&"Contents"==a.tagName?a.getElementsByTagName("Key")[0]:null};function vi(a,b,c){Ih.call(this,a,b,c);this.i=c.Options.bucket;if(!z(this.i)||sa(this.i))throw new V("bucket name required.");this.d||(this.d="https://"+this.i+".s3.amazonaws.com/");if(!0===b.d)throw new V('S3 object store "'+b.getName()+'" must not set autoIncrement to true.');}G(vi,Ih);t=vi.prototype;t.c=R("ydn.db.sync.S3");t.W=function(){var a=vi.k.W.call(this);return a=a.concat(["bucket","maxKeys","metaStoreName"])};t.t=function(){return vi.k.t.call(this)};
t.Wb=function(a){return this.d+this.h+a};t.B=function(a,b){return new Th(this,a,b)};
t.Zb=function(a,b){var c=this;hd(a,function(d,e,f){id(a,d);c.ac(d,function(a){var e={},l=a[0]?a[0].Ra():null;null!=l&&(e.marker=l);0<c.h.length&&(e.prefix=c.h);0<b&&(e["max-keys"]=b);P(c.c,c+" querying for newer entries starting from "+l);e=new sh(c.d,"GET",e);c.t().request(e).execute(function(b,e){if(200==oh(e)){for(var h=ph(e),h=h instanceof Document?h:fi(h),l=new ri(h,c.e),h=l.keys(),l=ti(l),r=[],y=[],A=[],B=0,E=0;B<=a.length&&E<h.length;){var F=a[B]?a[B].Ra():null,Q=h[E];if(B==a.length)y.push(Q),
E++;else{var xa=F?xb(F,Q):-1;0==xa?((Q=a[B].va())&&l[E]&&Q!=l[E]&&(l[E]>Q?A.push(F):M(c.c,'record "'+F+'" in database is more recent than server '+Q+" vs "+l[E])),B++,E++):1==xa?(r.push(F),B++):(y.push(Q),E++)}}Mh(c,f,d,y,A,r)}else M(c.c,"Invalid response status "+oh(e))})})},this)};
function wi(a,b){function c(f){null!=f&&(d.marker=f);P(a.c,a+" querying for newer entries starting from "+f);e.request(new sh(a.d,"GET",d)).execute(function(d,e){if(200==oh(e)){var f=ph(e),f=f instanceof Document?f:fi(f),f=new ri(f,a.e),m=ui(f),f=f.keys(),n=f.length;if(0==n)b([]),b=null;else for(var p=0,q=0;q<n;q++)a.B(f[q]).la(function(){p++;p==n&&(m?c(m):b&&(b([this.R()]),b=null))})}else M(a.c,"Invalid response status "+oh(e))})}var d={};0<a.h.length&&(d.prefix=a.h);var e=a.t();c();a.da=!0}
function xi(a,b){a.da||hd(b,function(a,b,e){v(a[0])?e(a):wi(this,e)},a)};function yi(a,b,c){Ah.call(this,a,b,c)}G(yi,Th);yi.prototype.c=R("ydn.db.sync.entry.Gcs");function zi(a,b,c){vi.call(this,a,b,c);this.d="https://"+this.i+".storage.googleapis.com/"}G(zi,vi);zi.prototype.c=R("ydn.db.sync.Gcs");zi.prototype.t=function(){return zi.k.t.call(this)};zi.prototype.B=function(a,b){return new yi(this,a,b)};function Ai(a,b){var c;if(a instanceof Ai)this.ha=v(b)?b:a.ha,Bi(this,a.ra),this.ub=a.ub,this.Aa=a.Aa,Ci(this,a.lb),this.kb=a.kb,Di(this,a.a.clone()),this.Za=a.Za;else if(a&&(c=String(a).match(Dg))){this.ha=!!b;Bi(this,c[1]||"",!0);var d=c[2]||"";this.ub=d?decodeURIComponent(d):"";this.Aa=(d=c[3]||"")?decodeURIComponent(d):"";Ci(this,c[4]);this.kb=(d=c[5]||"")?decodeURIComponent(d):"";Di(this,c[6]||"",!0);this.Za=(c=c[7]||"")?decodeURIComponent(c):""}else this.ha=!!b,this.a=new Ei(null,0,this.ha)}
t=Ai.prototype;t.ra="";t.ub="";t.Aa="";t.lb=null;t.kb="";t.Za="";t.ha=!1;t.toString=function(){var a=[],b=this.ra;b&&a.push(Fi(b,Gi),":");if(b=this.Aa){a.push("//");var c=this.ub;c&&a.push(Fi(c,Gi),"@");a.push(encodeURIComponent(String(b)));b=this.lb;null!=b&&a.push(":",String(b))}if(b=this.kb)this.Aa&&"/"!=b.charAt(0)&&a.push("/"),a.push(Fi(b,"/"==b.charAt(0)?Hi:Ji));(b=this.a.toString())&&a.push("?",b);(b=this.Za)&&a.push("#",Fi(b,Ki));return a.join("")};t.clone=function(){return new Ai(this)};
function Bi(a,b,c){a.ra=c?b?decodeURIComponent(b):"":b;a.ra&&(a.ra=a.ra.replace(/:$/,""))}function Ci(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.lb=b}else a.lb=null}function Di(a,b,c){b instanceof Ei?(a.a=b,Li(a.a,a.ha)):(c||(b=Fi(b,Mi)),a.a=new Ei(b,0,a.ha))}function Ni(a,b,c){a=a.a;Oi(a);a.a=null;b=Pi(a,b);Qi(a,b)&&(a.j-=a.r.get(b).length);dc(a.r,b,[c]);a.j++}function Fi(a,b){return z(a)?encodeURI(a).replace(b,Ri):null}
function Ri(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Gi=/[#\/\?@]/g,Ji=/[\#\?:]/g,Hi=/[\#\?]/g,Mi=/[\#\?@]/g,Ki=/#/g;function Ei(a,b,c){this.a=a||null;this.b=!!c}function Oi(a){if(!a.r&&(a.r=new cc,a.j=0,a.a))for(var b=a.a.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Pi(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=Ei.prototype;
t.r=null;t.j=null;t.s=function(){Oi(this);return this.j};t.add=function(a,b){Oi(this);this.a=null;a=Pi(this,a);var c=this.r.get(a);c||dc(this.r,a,c=[]);c.push(b);this.j++;return this};function Si(a,b){Oi(a);b=Pi(a,b);gc(a.r.b,b)&&(a.a=null,a.j-=a.r.get(b).length,fc(a.r,b))}t.clear=function(){this.r=this.a=null;this.j=0};t.X=function(){Oi(this);return 0==this.j};function Qi(a,b){Oi(a);b=Pi(a,b);return gc(a.r.b,b)}
t.F=function(){Oi(this);for(var a=this.r.v(),b=this.r.F(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.v=function(a){Oi(this);var b=[];if(a)Qi(this,a)&&(b=Ra(b,this.r.get(Pi(this,a))));else{a=this.r.v();for(var c=0;c<a.length;c++)b=Ra(b,a[c])}return b};t.get=function(a,b){var c=a?this.v(a):[];return 0<c.length?String(c[0]):b};
t.toString=function(){if(this.a)return this.a;if(!this.r)return"";for(var a=[],b=this.r.F(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.v(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.a=a.join("&")};t.clone=function(){var a=new Ei;a.a=this.a;this.r&&(a.r=this.r.clone(),a.j=this.j);return a};function Pi(a,b){var c=String(b);a.b&&(c=c.toLowerCase());return c}
function Li(a,b){b&&!a.b&&(Oi(a),a.a=null,Yb(a.r,function(a,b){var e=b.toLowerCase();b!=e&&(Si(this,b),Si(this,e),0<a.length&&(this.a=null,dc(this.r,Pi(this,e),Sa(a)),this.j+=a.length))},a));a.b=b};function Ti(a,b){this.b=v(b)?b:lh();this.a="r"+Ui++;this.d=a}var Ui=0;
Ti.prototype.execute=function(a,b){var c=this.d,d=new Ai(c.path),e;for(e in c.params)Ni(d,e,c.params[e]);gh(this.b,this.a,d.toString(),c.method,c.body,c.headers,function(c){var d=c.target,e=Tg(d);c=D(e)?e:null;for(var l=(d.a&&4==Pg(d)?d.a.getAllResponseHeaders():"").split("\n"),m={},n=0;n<l.length;n++){var p=l[n].indexOf(":");0<p&&(m[l[n].substr(0,p).toLowerCase()]=l[n].substr(p+1).trim())}d=new mh(Qg(d),e,m,Sg(d));a&&(a.call(b,c,d),a=null)});this.b=null};
Ti.prototype.toString=function(){return"HTTPRequest:"+this.a};function Kh(a){this.a=v(a)?a:lh()}Kh.prototype.request=function(a){return new Ti(a,this.a)};function qi(a,b){this.a=a;this.b=!!b}qi.prototype.request=function(a){var b={path:a.path,method:a.method,headers:a.headers,params:a.params,body:a.body};this.b&&(b.callback=function(a,e){var f=c;f.b&&(f.b(a,rh(e)),f.b=null);f.a={Jc:a,qa:e};b.callback=null});a=this.a.request(b);var c=new Vi(a);return c};function Vi(a){this.d=a||null}Vi.prototype.execute=function(a){this.d?(this.d.execute(function(b,c){a(b,rh(c))}),this.d=null):this.a?(a(this.a.Jc,rh(this.a.qa)),this.a=null):this.b=a};
function Jh(a){if(a){if(a instanceof Kh)return a;if(ga(a))return new qi({request:function(b){a(b)}},!0);if("request"in a)return new qi(a);throw new V(a+" is not a valid HTTP Client");}return null};function Wi(a,b,c){Ah.call(this,a,b,c)}G(Wi,yi);Wi.prototype.c=R("ydn.db.sync.entry.GcsJson");Wi.prototype.la=function(a){var b=this.a,c=this;Eh(this,function(d){var e={method:"GET",path:"storage/v1beta2/b/"+b.i+"/o/"+encodeURIComponent(c.getName())};d&&(e.headers=yh(d));gapi.client.request(e).execute(function(b,d){c.e=new zh(c.key,rh(d).Da());b?(P(c.c,c+": readServer updated"),c.d=b):(P(c.c,c+": readServer request fail "+d),c.e=null,c.d=null);a.call(c,200)},e)})};function Xi(a,b,c){zi.call(this,a,b,c);this.g.key="name";if(c.metaData)for(var d in c.metaData)this.g[d]=c.metaData[d]}G(Xi,zi);Xi.prototype.c=R("ydn.db.sync.GcsJson");Xi.prototype.t=function(){!this.f&&gapi&&(this.f=new qi(gapi.client));return Xi.k.t.call(this)};Xi.prototype.B=function(a,b){return new Wi(this,a,b)};
Xi.prototype.za=function(){O(this.c,"starting prefetch");var a=new I;Ne(this.storage.a,this.a,null,null,!0,1,0,!1).o(function(b){var c={bucket:this.i};(b=b[0])&&(c.marker=b);var d=this;if(!u.Gc||u.Gc.client)throw Error("gapi lib not loaded");gapi.client.load("storage","v1beta2",function(){var b=gapi.client.storage.objects.list({bucket:d.i});this.Ka&&(c.prefix=this.Ka);b.execute(function(b,c){if(b&&!b.error){var e=b.items||[];0<e.length?Dh(d,null,e).Q(function(){a.n(!0)}):a.n(!1)}else e=d+": "+c,M(d.c,
e),a.l(Error(e))})})},function(b){a.l(b)},this);return a};function Yi(a,b,c){zi.call(this,a,b,c);if(this.b)throw new V("meta store name must not specified for gcs-meta sync store");if(this.u)throw new V("meta data name must not specified for gcs-meta sync store");this.G=!0;this.g.key="name";if(c.metaData)throw new V("metData must not specified for gcs-meta sync store");this.oa="full"}G(Yi,zi);t=Yi.prototype;t.c=R("ydn.db.sync.GcsMeta");t.t=function(){!this.f&&gapi&&(this.f=new qi(gapi.client));return Yi.k.t.call(this)};
t.B=function(a,b){return new Wi(this,a,b)};
t.za=function(){O(this.c,"starting prefetch");var a=new I;if(!u.gapi||!u.gapi.client)throw Error("gapi lib not loaded");var b=this;gapi.client.load("storage","v1beta2",function(){function c(e){e&&(d.pageToken=e);gapi.client.storage.objects.list(d).execute(function(e,g){if(e&&!e.error){var h=e.items||[];if(e.nextPageToken)P(b.c,"receiving "+h.length+" meta records, continuing next"),Dh(b,h),c(e.nextPageToken);else if(0<h.length)Dh(b,h).Q(function(){P(b.c,"receiving "+h.length+" meta records, prefetching dane.");
a.n(!0)});else{var l=!!d.pageToken;P(b.c,"prefetching done");a.n(l)}}else l=b+": "+g,M(b.c,l),a.l(Error(l))})}var d={bucket:b.i};this.Ka&&(d.prefix=this.Ka);c()});return a};t.ac=function(a,b){if(0==a.length)b([]);else{var c=this.a,d=Ka(a,function(a){return new K(c,a)});Me(this.storage.a,d).o(function(d){for(var f=[],g=0;g<a.length;g++)f[g]=new wh(a[g],d[g],this.g,c);b(f)},function(a){M(this.c,this+" error loading meta data "+a);b([])},this)}};function Zi(a,b,c){Ih.call(this,a,b,c)}G(Zi,Ih);Zi.prototype.Wb=function(a){return this.d+this.h+this.a+this.tb+a};Zi.prototype.c=R("ydn.db.sync.Json");
Zi.prototype.Zb=function(a){function b(a,b){var c=new sh(e);d.t().request(c).execute(function(c){if(200==c.status){var e=(c.response instanceof Object?c.response:Rd(c.responseText)).items;c=Ka(e,function(a){return a.id});for(var e=Ka(e,function(a){return a.updated}),h=[],p=[],q=[],r=0,y=0;r<=a.length&&y<c.length;){var A=a[r].Ra(),B=c[y];if(r==a.length)p.push(B),y++;else{var E=xb(A,B);0==E?((B=a[r].va())&&e[y]&&B!=e[y]&&(new Date(e[y])>B?q.push(A):M(d.c,'record "'+A+'" in database is more recent than server '+
B+" vs "+e[y])),r++,y++):1==E?(h.push(A),r++):(p.push(B),y++)}}Mh(d,k(),b,p,q,h)}else M(d.c,"Invalid response status "+c.status)})}var c=new db,d=this,e=this.d+this.h+this.a;a.U(function(a){eb(c,a);this.ac(a,function(c){b(c,a)})},this)};function $i(a,b,c){Ih.call(this,a,b,c)}G($i,Rh);function aj(a,b,c){Ah.call(this,a,b,c)}G(aj,mi);function bj(a,b,c){ni.call(this,a,b,c);a=c.Options;this.hc=a.domain;this.ob=a.siteName;if(a=Cd(b,"sites$parent"))xd(a,function(a){for(var b=a.link||[],c=0;c<b.length;c++)if("http://schemas.google.com/sites/2008#parent"==b[c].rel)return b[c].href;return a.id.$t.replace(/\w+$/,"0")}),N(this.c,"index sites$parent in "+b.getName()+" has set a generator.");if(a=Cd(b,"alternate"))xd(a,function(a){a=a.link||[];for(var b=0;b<a.length;b++)if("alternate"==a[b].rel)return a[b].href}),N(this.c,"index alternate in "+
b.getName()+" has set a generator.")}G(bj,ni);t=bj.prototype;t.B=function(a,b){return new aj(this,a,b)};t.W=function(){var a=bj.k.W.call(this);return a=a.concat(["domain","siteName"])};t.V=function(){return"https://sites.google.com/feeds/content/"+this.hc+"/"+this.ob+"/"};t.uc=function(a){return"GET"!=a};
function cj(a,b,c,d){var e={alt:"json",kind:a.i};"sites$parent"==c?(c=d.match(/\w+$/)[0],e.parent=c):"alternate"==c&&(c=d.replace(/https:\/\/sites.google.com\/a\/[^\/]+\/[^\/]+/,""),e.path=c);var f={},g=a.V();hd(b,function(c,l,m){id(b,c);if(l=c[0])l=Ub(l,"updated","$t"),l=(new Date(1+ +new Date(l))).toISOString(),e["updated-min"]=l;l=new sh(g,"GET",e,f);a.t().request(l).execute(function(b,e){if(200==oh(e)){if(!b){var f=ph(e);z(f)&&(b=JSON.parse(f))}var g=(f=(b.feed||b).entry)?w(f)?f:[f]:[];0<g.length?
Dh(a,g).Q(function(){m(g)}):m(c)}else 302==oh(e)?m(c):(f=a+": Invalid response status "+oh(e)+" for querying pageName: "+d,M(a.c,f),m(Error(f),!0))})},a)}t.Rb=function(a,b,c){if(Oh(this))hd(a,function(d,e,f){id(a,d);Ph(this,function(a){!0===a?Le(this.storage.a,this.a,b,L.only(c),!1,0).o(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(a){f(a,!0)},this)},this);else return"alternate"==b||"alternate"==b?cj(this,a,b,c):bj.k.Rb.call(this,a,b,c)};yd.prototype.b=null;
Z.prototype.jc=function(a,b){var c=b.format;if("gdata-sites"==c)a.b=new bj(this,a,b);else if("gdata"==c)a.b=new ni(this,a,b);else if("gdata-json"==c)a.b=new pi(this,a,b);else if("odata"==c)a.b=new $i(this,a,b);else if("s3"==c)a.b=new vi(this,a,b);else if("gcs"==c)a.b=new zi(this,a,b);else if("gcs-json"==c)a.b=new Xi(this,a,b);else if("gcs-meta"==c)a.b=new Yi(this,a,b);else if("atom"==c)a.b=new Rh(this,a,b);else if("json"==c)a.b=new Zi(this,a,b);else if("rest"==c)a.b=new Ih(this,a,b);else throw new fd("Sync format: "+
c);Pd(a,function(b,c){var f=b.Sb();if(!window.navigator||!v(window.navigator.onLine)||window.navigator.onLine)if("add"==f)f=c[1],a.b.add(b,f);else if("count"==f)c[1]||c[2]||a.b.count(b);else if("put"==f){var f=c[1],g=c[2];a.b.put(b,f,g)}else if("rm:iter"==f)g=c[1],Qh(a.b,b,g);else if("values:iter:index"==f){var f=c[1],g=c[2],h=c[3],l=c[4],m=c[5];!h&&!m&&g&&null!=g.lower&&null!=g.upper&&0==xb(g.lower,g.upper)&&a.b.Rb(b,f,g.lower)}else if("keys"==f)g=c[1],l=c[2],h=c[3],m=c[4],a.b.keys(b,null,g,l,h,
m,!1);else if("keys:iter:index"==f)f=c[1],g=c[2],l=c[3],h=c[4],m=c[5],a.b.keys(b,f,g,l,h,m,c[6]);else if("values"==f)g=c[1],l=c[2],h=c[3],m=c[4],g||m?g&&g.lower&&z(g.lower)&&g.lower==g.upper||!g&&m&&1==l&&h&&xi(a.b,b):a.b.O(b,l,h);else if(""!=f)if("get"==f)g=c[1],a.b.get(b,g);else if("values:array"==f)Nh(a.b,b,c[1]);else throw Error(f);})};function dj(a,b,c){Z.call(this,a,b,c)}G(dj,Z);pa("ydn.db.Storage",dj);uh.prototype.getStatus=uh.prototype.h;uh.prototype.getClientValue=uh.prototype.f;uh.prototype.getServerValue=uh.prototype.R;function ej(){this.a=oa()}var fj=new ej;ej.prototype.get=s("a");function gj(a){this.e=a||"";this.f=fj}gj.prototype.a=!0;gj.prototype.b=!1;function hj(a){a=new Date(a.g);return ij(a.getFullYear()-2E3)+ij(a.getMonth()+1)+ij(a.getDate())+" "+ij(a.getHours())+":"+ij(a.getMinutes())+":"+ij(a.getSeconds())+"."+ij(Math.floor(a.getMilliseconds()/10))}function ij(a){return 10>a?"0"+a:String(a)}function jj(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function kj(a){gj.call(this,a)}G(kj,gj);kj.prototype.b=!0;
kj.prototype.d=function(a){var b;switch(a.f.value){case Nc.value:b="dbg-sh";break;case Oc.value:b="dbg-sev";break;case Pc.value:b="dbg-w";break;case Qc.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.e," ");this.a&&c.push("[",hj(a),"] ");c.push("[",Ba(jj(a,this.f.get())),"s] ");c.push("[",ua(a.d),"] ");c.push('<span class="',b,'">',ta(Ba(ua(a.e))));this.b&&a.b&&c.push("<br>",ta(Ba(a.a||"")));c.push("</span><br>");return c.join("")};function lj(a){gj.call(this,a)}G(lj,gj);
lj.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",hj(a),"] ");b.push("[",jj(a,this.f.get()),"s] ");b.push("[",a.d,"] ");b.push(a.e,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function mj(){this.f=na(this.g,this);this.a=new lj;this.a.a=!1;this.b=this.a.b=!1;this.d="";this.e={}}mj.prototype.g=function(a){if(!this.e[a.d]){var b=this.a.d(a),c=nj;if(c)switch(a.f){case Nc:oj(c,"info",b);break;case Oc:oj(c,"error",b);break;case Pc:oj(c,"warn",b);break;default:oj(c,"debug",b)}else window.opera?window.opera.postError(b):this.d+=b}};var nj=window.console;function oj(a,b,c){if(a[b])a[b](c);else a.log(c)};function pj(a){this.f=na(this.g,this);this.b=new kj;this.d=this.b.a=!1;this.a=a;this.e=this.a.ownerDocument||this.a.document;a=(a=this.a)?new bi(9==a.nodeType?a:a.ownerDocument||a.document):Vh||(Vh=new bi);var b=null;if(rc)a=b=a.a.createStyleSheet(),rc?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{var c=ci(a,"head")[0];c||(b=ci(a,"body")[0],c=a.b("head"),b.parentNode.insertBefore(c,b));var d=b=a.b("style");rc?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.a.className+=" logdiv"}
pj.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.e.createElement("div");c.className="logmsg";c.innerHTML=this.b.d(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};pj.prototype.clear=function(){this.a.innerHTML=""};var qj=null,rj=null;R("ydn.debug");pa("ydn.debug.log",function(a,b,c){if(C(b))b=new Mc("log",b);else if(z(b)){b=b.toUpperCase();if(!Wc){Wc={};for(var d=0,e;e=Vc[d];d++)Wc[e.value]=e,Wc[e.name]=e}b=Wc[b]||null}else b=Sc;R(a||"ydn").b=b;v(c)?rj||(a=rj=new pj(c),!0!=a.d&&(c=bd(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.d=!0),bd().b=Pc):qj||rj||(a=qj=new mj,!0!=a.b&&(c=bd(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.b=!0),bd().b=Pc)});function sj(a,b){zb.call(this);this.e=b;this.a=[];if(a>this.e)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.a.push(this.b())}G(sj,zb);sj.prototype.pb=function(a){this.a.length<this.e?this.a.push(a):this.d(a)};sj.prototype.b=function(){return{}};sj.prototype.d=function(a){if(D(a))if(ga(a.ba))a.ba();else for(var b in a)delete a[b]};sj.prototype.w=function(){sj.k.w.call(this);for(var a=this.a;a.length;)this.d(a.pop());delete this.a};function tj(){this.a=[];this.d=new cc;this.e=new cc;this.g=1;this.f=new sj(0,4E3);this.f.b=function(){return new uj};this.h=new sj(0,50);this.h.b=function(){return new vj};var a=this;this.b=new sj(0,2E3);this.b.b=function(){return String(a.g++)};this.b.d=k()}R("goog.debug.Trace");function vj(){this.time=this.count=0}vj.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function uj(){}
function wj(a,b,c){var d=[];-1==b?d.push("    "):d.push(xj(a.b-b));d.push(" ",yj(a.b-0));0==a.a?d.push(" Start        "):1==a.a?(d.push(" Done "),d.push(xj(a.f-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.e&&d.push("[VarAlloc ",a.e,"] ");return d.join("")}uj.prototype.toString=function(){return null==this.type?this.d:"["+this.type+"] "+this.d};
tj.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.a.length;d++){var e=this.a[d];1==e.a&&c.pop();a.push(" ",wj(e,b,c.join("")));b=e.b;a.push("\n");0==e.a&&c.push("|  ")}if(0!=this.d.s()){var f=oa();a.push(" Unstopped timers:\n");bc(this.d,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",yj(b.startTime),")\n")})}b=this.e.F();for(d=0;d<b.length;d++)c=this.e.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",0,
"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function xj(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function yj(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new tj;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function zj(a){a.g||(a.g=new rg);return a.g}Se.prototype.$=function(a,b,c,d){if("ready"==a)hg(zj(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!(0<=H(e,a)))throw new V('Invalid event type "'+a+'"');};if(x(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);cg(zj(this),a,b,c,d)}};Se.prototype.removeEventListener=function(a,b,c,d){jg(zj(this),a,b,c,d)};Se.prototype.I=function(a){sg(zj(this),a)};Se.prototype.addEventListener=Se.prototype.$;Se.prototype.removeEventListener=Se.prototype.removeEventListener;

//# sourceMappingURL=ydn.db-isw-sync-e-dev.js.map
            })();