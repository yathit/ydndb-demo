(function(){function da(){return function(){}}function k(a){return function(){return this[a]}}function ea(a){return function(){return a}}var r,s=this;function fa(a){a=a.split(".");for(var b=s,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return void 0!==a}function v(a){return"array"==ga(a)}function w(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function ha(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ia(a){return"function"==ga(a)}function B(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a){return a[ka]||(a[ka]=++la)}
var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(null,arguments)}function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var qa=Date.now||function(){return+new Date};
function ra(a,b){var c=a.split("."),d=s;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function D(a,b){function c(){}c.prototype=b.prototype;a.F=b.prototype;a.prototype=new c};function sa(a){Error.captureStackTrace?Error.captureStackTrace(this,sa):this.stack=Error().stack||"";a&&(this.message=String(a))}D(sa,Error);sa.prototype.name="CustomError";function ta(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function ua(a){return/^[\s\xa0]*$/.test(a)}function va(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function wa(a){if(!xa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ya,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Aa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ba,"&quot;"));return a}
var ya=/&/g,za=/</g,Aa=/>/g,Ba=/\"/g,xa=/[&<>\"]/;function Ca(a){return va(a.replace(/  /g," &#160;"),void 0)}function Da(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ea={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Fa={"'":"\\'"};
function Ga(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Ea[d])){if(!(31<e&&127>e))if(d in Fa)d=Fa[d];else if(d in Ea)d=Fa[d]=Ea[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Fa[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Ha(a,b){b.unshift(a);sa.call(this,ta.apply(null,b));b.shift()}D(Ha,sa);Ha.prototype.name="AssertionError";function Ia(a,b){throw new Ha("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ja=Array.prototype,F=Ja.indexOf?function(a,b,c){return Ja.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ka=Ja.forEach?function(a,b,c){Ja.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},La=Ja.map?function(a,b,c){return Ja.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ma=Ja.some?function(a,b,c){return Ja.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Na=Ja.every?function(a,b,c){return Ja.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Oa(a,b){var c=Pa(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}
function Pa(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Qa(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ra(a,b){var c=F(a,b),d;(d=0<=c)&&Ja.splice.call(a,c,1);return d}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ta(a,b,c,d){Ja.splice.apply(a,Ua(arguments,1))}
function Ua(a,b,c){return 2>=arguments.length?Ja.slice.call(a,b):Ja.slice.call(a,b,c)}function Va(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Wa,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Xa(a,b){return a>b?1:a<b?-1:0}function Wa(a,b){return a===b}function Ya(a,b){var c;c=Za||Xa;for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,h;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}c=f?d:~d;0>c&&Ta(a,-(c+1),0,b)};function $a(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ab(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var bb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<bb.length;f++)c=bb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var eb="StopIteration"in s?s.StopIteration:Error("StopIteration");function fb(){}fb.prototype.a=function(){throw eb;};fb.prototype.Ga=function(){return this};function gb(a){if(a instanceof fb)return a;if("function"==typeof a.Ga)return a.Ga(!1);if(w(a)){var b=0,c=new fb;c.a=function(){for(;;){if(b>=a.length)throw eb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function hb(a,b,c){if(w(a))try{Ka(a,b,c)}catch(d){if(d!==eb)throw d;}else{a=gb(a);try{for(;;)b.call(c,a.a(),void 0,a)}catch(e){if(e!==eb)throw e;}}}function ib(a){if(w(a))return Sa(a);a=gb(a);var b=[];hb(a,function(a){b.push(a)});return b};function jb(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)lb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof jb)e=a.Ja(),d=a.gb();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)lb(this,e[c],d[c])}}r=jb.prototype;r.G=0;r.hb=0;r.gb=function(){mb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
r.Ja=function(){mb(this);return this.a.concat()};r.clear=function(){this.b={};this.hb=this.G=this.a.length=0};function mb(a){if(a.G!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.G!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}r.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.b,a)?this.b[a]:b};
function lb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.G++,a.a.push(b),a.hb++);a.b[b]=c}r.wa=function(){return new jb(this)};r.Ga=function(a){mb(this);var b=0,c=this.a,d=this.b,e=this.hb,f=this,g=new fb;g.a=function(){for(;;){if(e!=f.hb)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw eb;var g=c[b++];return a?g:d[g]}};return g};var nb,ob,pb,qb,rb;function sb(){return s.navigator?s.navigator.userAgent:null}rb=qb=pb=ob=nb=!1;var tb;if(tb=sb()){var ub=s.navigator;nb=0==tb.indexOf("Opera");ob=!nb&&-1!=tb.indexOf("MSIE");qb=(pb=!nb&&-1!=tb.indexOf("WebKit"))&&-1!=tb.indexOf("Mobile");rb=!nb&&!pb&&"Gecko"==ub.product}var vb=nb,wb=ob,xb=rb,Ab=pb,Bb=qb;function Cb(){var a=s.document;return a?a.documentMode:void 0}var Db;
a:{var Eb="",Fb;if(vb&&s.opera)var Gb=s.opera.version,Eb="function"==typeof Gb?Gb():Gb;else if(xb?Fb=/rv\:([^\);]+)(\)|;)/:wb?Fb=/MSIE\s+([^\);]+)(\)|;)/:Ab&&(Fb=/WebKit\/(\S+)/),Fb)var Hb=Fb.exec(sb()),Eb=Hb?Hb[1]:"";if(wb){var Ib=Cb();if(Ib>parseFloat(Eb)){Db=String(Ib);break a}}Db=Eb}var Jb={};
function Kb(a){var b;if(!(b=Jb[a])){b=0;for(var c=String(Db).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(g)||["","",""],p=n.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=Jb[a]=0<=b}return b}var Lb=s.document,Mb=Lb&&wb?Cb()||("CSS1Compat"==Lb.compatMode?parseInt(Db,10):5):void 0;function Nb(a){return Ob(a||arguments.callee.caller,[])}
function Ob(a,b){var c=[];if(0<=F(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Pb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Pb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Ob(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Pb(a){if(Qb[a])return Qb[a];a=String(a);if(!Qb[a]){var b=/function ([^\(]+)/.exec(a);Qb[a]=b?b[1]:"[Anonymous]"}return Qb[a]}var Qb={};function Rb(a,b,c,d,e){"number"==typeof e||Sb++;this.g=d||qa();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}Rb.prototype.b=null;Rb.prototype.a=null;var Sb=0;function Tb(a){this.e=a}Tb.prototype.c=null;Tb.prototype.b=null;Tb.prototype.d=null;Tb.prototype.a=null;function Ub(a,b){this.name=a;this.value=b}Ub.prototype.toString=k("name");var Vb=new Ub("SHOUT",1200),Wb=new Ub("SEVERE",1E3),Xb=new Ub("WARNING",900),Yb=new Ub("INFO",800),Zb=new Ub("CONFIG",700),$b=new Ub("FINE",500),ac=new Ub("FINER",400),bc=new Ub("FINEST",300),cc=[new Ub("OFF",Infinity),Vb,Wb,Xb,Yb,Zb,$b,ac,bc,new Ub("ALL",0)],dc=null;Tb.prototype.getName=k("e");
function ec(a){if(a.b)return a.b;if(a.c)return ec(a.c);Ia("Root logger has no level set.");return null}Tb.prototype.log=function(a,b,c){if(a.value>=ec(this).value)for(a=this.g(a,b,c),b="log:"+a.d,s.console&&(s.console.timeStamp?s.console.timeStamp(b):s.console.markTimeline&&s.console.markTimeline(b)),s.msWriteProfilerMark&&s.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
Tb.prototype.g=function(a,b,c){var d=new Rb(a,String(b),this.e);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=fa("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var l,n,m=!1;try{l=c.lineNumber||c.Sc||"Not available"}catch(p){l="Not available",m=!0}try{n=c.fileName||c.filename||c.sourceURL||s.$googDebugFname||h}catch(q){n="Not available",m=!0}g=!m&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+wa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+wa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+wa(Nb(f)+"-> ")}catch(t){e="Exception trying to expose exception! You win, we lose. "+t}d.a=e}return d};function fc(a,b){a.log(Wb,b,void 0)}function H(a,b){a.log(Xb,b,void 0)}function gc(a,b){a.log($b,b,void 0)}
function I(a,b){a.log(ac,b,void 0)}function J(a,b){a.log(bc,b,void 0)}var hc={},ic=null;function jc(){ic||(ic=new Tb(""),hc[""]=ic,ic.b=Zb)}function kc(){jc();return ic}function L(a){jc();var b;if(!(b=hc[a])){b=new Tb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=L(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;hc[a]=b}return b};function lc(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function M(a,b){this.e=[];this.A=b||null}r=M.prototype;r.Ia=!1;r.Ka=!1;r.Db=!1;r.mc=!1;r.cc=!1;r.nc=0;r.Xb=function(a,b){this.Db=!1;mc(this,a,b)};function mc(a,b,c){a.Ia=!0;a.g=c;a.Ka=!b;nc(a)}function oc(a){if(a.Ia){if(!a.cc)throw new pc;a.cc=!1}}r.C=function(a){oc(this);mc(this,!0,a)};r.B=function(a){oc(this);mc(this,!1,a)};r.fa=function(a,b){return this.X(a,null,b)};r.Tb=function(a,b){return this.X(null,a,b)};r.Ha=function(a,b){return this.X(a,a,b)};
r.X=function(a,b,c){this.e.push([a,b,c]);this.Ia&&nc(this);return this};function qc(a){return Ma(a.e,function(a){return ia(a[1])})}
function nc(a){a.j&&a.Ia&&qc(a)&&(s.clearTimeout(a.j),delete a.j);a.t&&(a.t.nc--,delete a.t);for(var b=a.g,c=!1,d=!1;a.e.length&&!a.Db;){var e=a.e.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ka?g:f)try{var h=f.call(e||a.A,b);u(h)&&(a.Ka=a.Ka&&(h==b||h instanceof Error),a.g=b=h);b instanceof M&&(d=!0,a.Db=!0)}catch(l){b=l,a.Ka=!0,qc(a)||(c=!0)}}a.g=b;d&&(b.X(oa(a.Xb,a,!0),oa(a.Xb,a,!1)),b.mc=!0);c&&(a.j=s.setTimeout(lc(b),0))}
function rc(a){Error.captureStackTrace?Error.captureStackTrace(this,rc):this.stack=Error().stack||"";a&&(this.message=String(a))}D(rc,Error);function pc(){rc.call(this)}D(pc,rc);pc.prototype.message="Deferred has already fired";pc.prototype.name="AlreadyCalledError";var sc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},tc=s.IDBRequest&&"LOADING"in s.IDBRequest?s.IDBTransaction:s.webkitIDBRequest&&"LOADING"in s.webkitIDBRequest&&1===s.webkitIDBTransaction.READ_WRITE?s.webkitIDBTransaction:sc,uc=tc.READ_ONLY,N=tc.READ_WRITE,vc=tc.VERSION_CHANGE,wc=s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.moz_indexedDB||s.msIndexedDB;function xc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var yc={};
function zc(a){a=[a];for(var b=new Ac,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(yc);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),Bc(b,e);else if(e instanceof Date)c+=2,b.write(c),Bc(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===yc)b.write(0);else return"";c=0}return b.trim().toString()}function Cc(a){for(var b=[],c=b,d=[],e,f,g=new Dc(a);null!=Ec(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)Ec(g);else break}while(1);1===a?c.push(Fc(g)):2===a?c.push(new Date(Fc(g))):3===a?c.push(Gc(g)):0===a&&(c=d.pop())}return b[0]}
function Bc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Fc(a){var b=Ec(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=Ec(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(Ec(a)|0):Ec(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Gc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=Ec(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Dc(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function Ec(a){return a.a=a.index<a.c?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function Ac(){this.a=[];this.b=void 0}
Ac.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};Ac.prototype.trim=function(){for(var a=this.a.length;"00"===this.a[--a];);this.a.length=++a;return this};Ac.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Hc(a,b){var c=zc(a),d=zc(b);return c>d?1:c==d?0:-1};var O=wc&&wc.cmp?oa(wc.cmp,wc):Hc;function P(a){sa.call(this,a);this.name="ydn.error.ArgumentException"}D(P,sa);function Ic(a){sa.call(this,a);this.name="ydn.error.NotImplementedException"}D(Ic,sa);function Jc(a){sa.call(this,a);this.name="ydn.error.InvalidOperationException"}D(Jc,sa);function Kc(a){Error.captureStackTrace?Error.captureStackTrace(this,Kc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(Kc,Error);Kc.prototype.name="ydn.error.InternalError";
function Lc(a){Error.captureStackTrace?Error.captureStackTrace(this,Mc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}D(Lc,Error);Lc.prototype.name="ydn.error.ConstraintError";L("ydn.db.Cursor");function Q(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ia(Object.freeze)&&Object.freeze(this)}Q.prototype.lower=void 0;Q.prototype.upper=void 0;Q.prototype.toJSON=function(){return Nc(this)};function Oc(a){return Pc(a)}Q.only=function(a){return new Q(a,a,!1,!1)};Q.bound=function(a,b,c,d){return new Q(a,b,c,d)};Q.upperBound=function(a,b){return new Q(void 0,a,void 0,!!b)};Q.lowerBound=function(a,b){return new Q(a,void 0,!!b,void 0)};
function Qc(a){var b;if(v(a))b=Sa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else throw new P;return Q.bound(a,b,!1,!0)}function Nc(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function Pc(a){return null!=a?null!=a.upper&&null!=a.lower?Rc.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Rc.upperBound(a.upper,a.upperOpen):null!=a.lower?Rc.lowerBound(a.lower,a.lowerOpen):null:null}
function Sc(a){if(a instanceof Q)return"";if(null!=a){if(B(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=F(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
function Tc(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==O(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Uc(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Uc(c.upper,b)))}else d.push(a+" = ?"),e.push(Uc(c.lower,b))}
function Vc(a,b,c,d){var e,f,g,h;if("^"==a)return Qc(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new P("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(u(c))throw new P("invalid op2: "+c);return Q.bound(f,e,h,g)}var Rc=s.IDBKeyRange||s.webkitIDBKeyRange||Q;function R(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name");this.d=a;this.c=b;this.g=g;this.e=!!this.c;if(u(d)&&!ha(d))throw new P("reverse value must be a boolean, but "+typeof d+" found");if(u(e)&&!ha(e))throw new P("unique value must be a boolean, but "+typeof e+" found");if(u(f)&&!ha(f))throw new P("key_only value must be a boolean, but "+typeof f+" found");this.a=u(f)?f:!!x(this.c);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.m=a;if(d=Sc(c))throw new P("Invalid key range: "+
d);this.b=Pc(c);this.j=Wc}R.prototype.a=!0;function Xc(a,b,c){if(3<arguments.length)throw new P("too many argument");R.call(this,a,void 0,b,c,void 0,!0)}D(Xc,R);function Yc(a,b,c,d,e){if(!x(b))throw new P("index name must be string");R.call(this,a,b,c,d,e,!0)}D(Yc,R);function Zc(a,b,c){if(3<arguments.length)throw new P("too many argument");R.call(this,a,void 0,b,c,void 0,!1)}D(Zc,R);function $c(a,b,c,d,e){if(!x(b))throw new P("index name must be string");R.call(this,a,b,c,d,e,!1)}D($c,R);var Wc="init";
r=R.prototype;r.Dc=L("ydn.db.Iterator");r.h=k("d");r.zc=k("c");r.Bc=function(){return this.b?this.b instanceof Rc?this.b:Rc.bound(this.b.lower,this.b.upper,this.b.lowerOpen,this.b.upperOpen):null};r.Cc=k("a");r.tc=k("e");r.wa=function(){return new R(this.d,this.c,this.b,this.La(),this.sb(),this.a,this.g)};r.unique=function(a){return new R(this.d,this.c,this.b,this.La(),a,this.a,this.g)};r.toJSON=function(){return{store:this.d,index:this.c,keyRange:this.b?Nc(this.b):null,direction:this.m}};
r.toString=function(){var a=u(this.g)?":"+this.g.join(","):u(this.c)?":"+this.c:"",b;if(b=this.b){var c=b.lowerOpen?"(":"[";null!=b.lower&&(c+=b.lower+", ");null!=b.upper&&(c+=b.upper);b=c+=b.upperOpen?")":"]"}else b="";a+=b;this.j!=Wc&&(a+=this.j+"{"+this.t,this.e&&(a+=", "+this.w),a+="}");b=this.e?"Index":"";b+=this.a?"Key":"Value";return b+"Iterator:"+this.d+a};r.Fc=function(){new R(this.d,this.c,this.b,this.La(),this.sb(),this.a,this.g);throw Error("not possible");};
r.Gc=function(){return new R(this.d,this.c,this.b,!this.La(),this.sb(),this.a,this.g)};r.La=function(){return"prev"===this.m||"prevunique"===this.m};r.sb=function(){return"nextunique"===this.m||"prevunique"===this.m};r.sc=k("j");r.load=function(a){a.init(this.d,this.g||this.c,this.b,this.m,this.a);this.j="busy";var b=this;a.mb=function(a,d,e){b.t=d;b.w=e;b.j=a?"rest":"done"};a.wb(this.t,this.w)};r.Ac=k("t");r.p=k("w");
r.Ec=function(a,b,c){a=a||Wc;"busy"==this.j?H(this.Dc,this+": resetting state to "+a+" ignore during iteration"):(this.t=b,this.w=c,this.j=a)};r.stores=function(){var a=[this.d];if(this.A)for(var b=0;b<this.A.length;b++)0<=F(a,this.A[b].a)||a.push(this.A[b].a);return a};function ad(a){Error.captureStackTrace?Error.captureStackTrace(this,ad):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}D(ad,Error);ad.prototype.name="ConstraintError";function bd(a){Error.captureStackTrace?Error.captureStackTrace(this,bd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}D(bd,Error);
function cd(a){Error.captureStackTrace?Error.captureStackTrace(this,cd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}D(cd,Error);cd.prototype.name="ydn.db.VersionError";function dd(a){Error.captureStackTrace?Error.captureStackTrace(this,dd):this.stack=Error().stack||"";a&&(this.message=String(a))}D(dd,Error);dd.prototype.name="ydn.db.InternalError";
function ed(a){Error.captureStackTrace?Error.captureStackTrace(this,ed):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}D(ed,Error);function fd(a){Error.captureStackTrace?Error.captureStackTrace(this,fd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}D(fd,Error);function gd(a){Error.captureStackTrace?Error.captureStackTrace(this,gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
D(gd,Error);gd.prototype.name="NotFoundError";function hd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,hd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}D(hd,Error);function id(a,b){Error.captureStackTrace?Error.captureStackTrace(this,id):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}D(id,Error);
function jd(a){Error.captureStackTrace?Error.captureStackTrace(this,jd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}D(jd,Error);function kd(a,b,c){var d;if(B(a))d=a.store,b=a.id,null!=a.parent&&(c=new kd(a.parent));else if(u(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new kd(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!u(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}r=kd.prototype;r.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
r.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};r.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};r.h=k("a");r.Hc=k("id");r.Ic=k("parent");function ld(a){return y(a)||x(a)||v(a)&&Na(a,ld)||a instanceof Date}function md(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function nd(a,b){this.na=a;this.a=b}nd.prototype.f=L("ydn.db.crud.req.RequestExecutor");nd.prototype.na="";nd.prototype.toString=ea("RequestExecutor");ra("ydn.db.con.IStorage.prototype.transaction",da().prototype.ta);function od(a,b,c,d){if("transaction"in a)this.m=a,this.e=this.j=null;else if("objectStore"in a){if(this.m=null,this.j=a.db,this.e=a,!this.e.db.objectStoreNames.contains(b))throw new pd('store "'+b+'" not in transaction.');}else throw new pd("storage instance require.");this.t=b;this.w=c;this.A=d;this.c=[];this.b=0;this.g=!1}od.prototype.a=L("ydn.db.con.IdbCursorStream");od.prototype.g=!1;od.prototype.c=[];
function qd(a,b){a.b++;b.onsuccess=function(b){if(b=b.target.result){if(ia(a.A)){var d=b.value;a.A(b.primaryKey,null!=a.w?d[a.w]:d)}else H(a.a,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.c.length)b["continue"](a.c.shift());else a.b--,0==a.b&&a.ga&&a.ga()}};b.onerror=function(){H(a.a,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.b--;0==a.b&&a.ga&&a.ga()}}function td(a,b){0==a.c.length&&0==a.b?b():a.ga=b}
function ud(a){if(!a.g){var b=function(b,c){a.e=null;"complete"!==b&&H(a.a,c.name+":"+c.message);J(a.a,a+" transaction "+b)},c=function(b){var c=a.c.shift();J(a.a,a+" transaction started for "+c);b=b.objectStore(a.t);qd(a,b.openCursor(c))};if(a.e)J(a.a,a+" using existing tx."),c(a.e);else if(a.j)J(a.a,a+" creating tx from IDBDatabase."),a.d=a.j.transaction([a.t],uc),a.d.oncomplete=function(a){b("complete",a)},a.d.onerror=function(a){b("error",a)},a.d.onabort=function(a){b("abort",a)};else if(a.m)J(a.a,
a+" creating tx from ydn.db.con.IStorage."),a.g=!0,a.m.ta(function(b){a.g=!1;c(b)},[a.t],uc,b);else throw new vd("no way to create a transaction provided.");}};function wd(a,b,c){if(a&&a instanceof S)this.Ua=a,this.la=null;else if(a&&a.db)if(this.Ua=null,a.db)this.la=new od(a,this.a,this.b,oa(this.ga,this));else throw new P("Invalid IndexedDB Transaction.");else throw new P("ydn.db.Streamer: First argument requires storage or transaction instance required.");if(!x(b))throw new P("a store name required.");this.a=b;if(u(c)&&!x(c))throw new P("index name must be a string.");this.b=c;this.la=null;this.ca=[];this.qa=[];this.Ma=!1}L("ydn.db.Streamer");r=wd.prototype;
r.Ua=null;r.l=null;r.Qb=null;r.qa=[];r.ca=[];r.la=null;r.yc=function(a){this.Qb=a};function xd(a){var b=0<a.ca.length;if(b&&!a.Ma&&ia(a.Qb)){var c=function(){xd(a)},d=a.qa.shift(),e=a.ca.shift(),b=0<a.ca.length,c=a.Qb(d,e,b?c:null);b&&!c&&xd(a)}}r.Ma=!1;r.Lc=function(a){if(this.la){this.Ma=!0;var b=this;td(this.la,function(){a(b.qa,b.ca);b.qa=[];b.ca=[];b.Ma=!1})}else a(this.qa,this.ca),this.qa=[],this.ca=[]};r.ga=function(a,b){this.qa.push(a);this.ca.push(b);xd(this)};
r.push=function(a,b){if(this.Ma)throw new yd("push not allowed after a collection is started");if(2<=arguments.length)this.ga(a,b);else{if(!this.la){if(!this.Ua)throw new yd("Database is not setup.");var c=this.Ua.m();if(c)if("indexeddb"===c)this.la=new od(this.Ua,this.a,this.b,oa(this.ga,this));else throw new zd(c);else throw new yd("Database is not connected.");}c=this.la;c.c.push(a);ud(c)}};r.h=k("a");r.toString=function(){return"Streamer:"+this.a+(this.b||"")};function Ad(){0!=Bd&&ja(this)}var Bd=0;function Cd(a,b,c,d){Ad.call(this);this.a=c;this.Pa=c.getName();this.e=void 0;this.b=!1;this.o=null;this.d=a;this.Nb=b;this.G=0;this.Aa=this.ha=!1;this.t=d||4;this.ka=this.H=this.D=void 0;this.j=function(){throw new Kc;};this.w=function(){throw new Kc;};this.mb=da()}D(Cd,Ad);r=Cd.prototype;
r.init=function(a,b,c,d,e){if(u(b)){a=this.a;var f,g=b;if(v(b)){a:{for(f=0;f<a.a.length;f++)if(!Dd(a.a[f].keyPath,b)){f=a.a[f];break a}f=null}g=b.join(", ")}else f=Ed(a,b);if(!f)throw new P('require index "'+g+'" not found in store "'+a.getName()+'"');this.e=f.getName()}this.b=x(this.e);this.o=c||null;this.G=0;this.Aa=this.ha=!1;this.s="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.W=d;this.Na=e;this.ka=this.H=this.D=void 0};r.W="";r.o=null;r.unique=!1;r.s=!1;r.Na=!0;
r.J=L("ydn.db.core.req.AbstractCursor");r.Rb=function(a){this.w(a);Fd(this);this.ha=!0};r.V=function(a,b,c){null==a&&(I(this.J,this+" finished."),this.ha=!0);this.D=a;this.H=b;this.ka=c;this.G++;this.ha?(J(this.J,this+" DONE."),this.j(),Fd(this)):(J(this.J,this+" new cursor position {"+(null!=this.H?this.D+", "+this.H:this.D)+"}"),this.j(this.D))};r.toString=function(){return"Cursor:"+this.Pa+(u(this.e)?":"+this.e:"")+"["+(this.d?"":"~")+this.Nb+"]"};
function Fd(a){null!=a.H?a.H=md(a.H):a.H=void 0;null!=a.D?a.D=md(a.D):a.D=void 0;a.mb(a.Aa,a.D,a.H)}function Gd(a){a.Aa=!0;J(a.J,a+": exit");Fd(a)}r.Oc=k("D");r.p=function(){return this.b?this.H:this.D};r.N=function(){return this.Na?this.p():this.ka};r.Xa=da();r.Da=da();r.advance=da();function Hd(a,b,c){J(a.J,a+" restarting");a.ha=!1;a.Aa=!1;a.wb(c,b)};L("ydn.db.algo.AbstractSolver");function Id(a,b,c,d){Cd.call(this,a,b,c,d);this.c=null}D(Id,Cd);r=Id.prototype;r.J=L("ydn.db.core.req.IDBCursor");r.bb=function(a){(a=a.target.result)?this.V(a.key,this.b?a.primaryKey:void 0,a.value):this.V()};
r.wb=function(a,b){function c(a,b,c){p.c=m;p.c.onsuccess=oa(p.bb,p);p.V(a,p.b?b:void 0,c);m=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");J(this.J,d);var e=this.o,d=this.d.objectStore(this.Pa),f=x(this.e)?d.index(this.e):null;if(u(a))var g=f?!u(b):!0,h=e?e.lower:void 0,l=e?e.upper:void 0,n=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=Oc(this.s?new Q(h,a,n,g):new Q(a,l,g,e));var m;m=this.Na?f?null!=this.W?f.openKeyCursor(e,this.W):null!=e?f.openKeyCursor(e):f.openKeyCursor():
null!=this.W?d.openCursor(e,this.W):null!=e?d.openCursor(e):d.openCursor():f?null!=this.W?f.openCursor(e,this.W):null!=e?f.openCursor(e):f.openCursor():null!=this.W?d.openCursor(e,this.W):null!=e?d.openCursor(e):d.openCursor();var p=this;m.onerror=function(a){var b=m.error;a.preventDefault();p.Rb(b)};null!=a?m.onsuccess=function(d){if(d=d.target.result){var e=wc.cmp(d.key,a),f=p.s?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=b)if(wc.cmp(d.primaryKey,b)==
f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.c=m,p.c.onsuccess=oa(p.bb,p))};r.ib=function(){return!!this.c};r.update=function(a){var b=this.c.result;if(b){var c=new M;a=b.update(a);a.onsuccess=function(a){c.C(a.target.result)};a.onerror=function(a){a.preventDefault();c.B(a)};return c}throw new fd("cursor gone");};
r.clear=function(){var a=this.c.result;if(a){var b=new M,a=a["delete"]();a.onsuccess=function(){b.C(1)};a.onerror=function(a){a.preventDefault();b.B(a)};return b}throw new fd("cursor gone");};r.advance=function(a){var b=this.c.result;if(1==a)b["continue"]();else b.advance(a)};
r.Xa=function(a){var b=this.c.result,c=wc.cmp(a,b.primaryKey);if(1!=c)throw new Kc('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"');var d=this;this.c.onsuccess=function(e){if(b=e.target.result)if(c=wc.cmp(b.primaryKey,a),0==c||1==c&&!d.s||-1==c&&d.s)d.c.onsuccess=oa(d.bb,d),d.V(b.key,d.b?b.primaryKey:void 0,b.value);else b["continue"]();else d.c.onsuccess=oa(d.bb,d),d.V()};b["continue"]()};r.Da=function(a){var b=this.c.result;if(null!=a)b["continue"](a);else b["continue"]()};
r.toString=function(){return"IDB"+Id.F.toString.call(this)};function pd(a){Error.captureStackTrace?Error.captureStackTrace(this,pd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}D(pd,Error);function Jd(a){Error.captureStackTrace?Error.captureStackTrace(this,Jd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}D(pd,Error);Jd.prototype.name="ydn.error.NotSupportedException";
function zd(a){Error.captureStackTrace?Error.captureStackTrace(this,zd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}D(zd,Error);function vd(a){Error.captureStackTrace?Error.captureStackTrace(this,vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(vd,Error);vd.prototype.name="ydn.InternalError";
function Mc(a){Error.captureStackTrace?Error.captureStackTrace(this,Mc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}D(Mc,Error);Mc.prototype.name="ydn.error.ConstraintError";function Kd(a){Error.captureStackTrace?Error.captureStackTrace(this,Kd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}D(pd,Error);
function yd(a){Error.captureStackTrace?Error.captureStackTrace(this,yd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}D(yd,Error);L("ydn");function Ld(a){return!x(a)||ua(a)?{}:JSON.parse(a)}function Md(a){var b;try{b=T(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function T(a){return JSON.stringify(a)};function Nd(a,b){nd.call(this,a,b)}D(Nd,nd);r=Nd.prototype;r.f=L("ydn.db.crud.req.IndexedDb");r.ab=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?U(a,d):c(e)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}}var d=[];0==b.length?U(a,[]):c(0)};
r.Bb=function(a,b,c,d){var e=a.a.objectStore(b);J(this.f,V(a)+" addObject: "+b+" "+d);var f;f=u(d)?e.add(c,d):e.add(c);f.onsuccess=function(b){U(a,b.target.result)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}};
r.Mb=function(a,b,c,d){var e=a.a.objectStore(b);J(this.f,V(a)+' putObject to store "'+b+'" '+(u(d)?" key: "+d:""));var f;f=u(d)?e.put(c,d):e.put(c);f.onsuccess=function(b){U(a,b.target.result)};f.onerror=function(d){"DataError"==d.name&&(d=T(c),d=new bd(b+": "+d.substring(0,70)));d.preventDefault();U(a,f.error,!0)}};
r.Cb=function(a,b,c,d){function e(m){var q;q=null!=d?n.add(c[m],d[m]):n.add(c[m]);q.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?U(a,f,l):(b=m+10,b<c.length&&e(b))};q.onerror=function(d){g++;var n=q.error;H(h.f,V(a)+' add request to "'+b+'" cause '+n.name+' for object "'+Md(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;l=!0;d.preventDefault();g==c.length?U(a,f,l):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=this,l=!1,n=a.a.objectStore(b);J(this.f,V(a)+" addObjects: "+b+" "+
c.length+" objects");if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else U(a,[])};
r.pb=function(a,b,c,d){function e(m){if(null==c[m])if(J(l.f,"empty object at "+m+" of "+c.length),g++,g==c.length)U(a,f,h);else{var q=m+10;q<c.length&&e(q)}var t;t=null!=d?n.put(c[m],d[m]):n.put(c[m]);t.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?U(a,f,h):(b=m+10,b<c.length&&e(b))};t.onerror=function(d){g++;var n=t.error;J(l.f,V(a)+' put request to "'+b+'" cause '+n.name+' for object "'+Md(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;h=!0;d.preventDefault();g==c.length?
U(a,f,h):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=!1,l=this,n=a.a.objectStore(b);J(this.f,V(a)+" put "+c.length+' objects to store "'+b+'"');if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else U(a,[])};
r.ob=function(a,b,c){function d(l){var m=c[l],p=m.h(),q=a.a.objectStore(p),t;t=null===q.keyPath?q.put(b[l],m.id):q.put(b[l]);t.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?U(a,e,g):(c=l+10,c<b.length&&d(c))};t.onerror=function(c){f++;H(h.f,"request result "+c.name+' error when put keys to "'+p+'" for object "'+Md(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=t.error;g=!0;c.preventDefault();f==b.length?U(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;J(this.f,V(a)+
" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else U(a,e,g)};
r.Lb=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",m),d=!1,t;-1==b?(d=!0,t=e.substring(m)):(t=e.substring(m,b),m=b+1);for(var b=t.split(f),K=0;K<p.length;K++){var aa=b[K];q[K]&&(q[K]==Od?aa=Da(aa,'"'):q[K]==Pd?aa=parseInt(aa,10):q[K]==Qd&&(aa=parseFloat(aa)));a[p[K]]=aa}var ca=l.put(a);ca.onsuccess=function(a){n.push(a.target.result);d?c(n):g()};ca.onerror=function(a){"DataError"==a.name&&(a=new bd(h+": "+t.substring(0,70)));a.preventDefault();c(ca.error,!0)}}var h=W(this.a,d),l=a.objectStore(d),
n=[],m=e.indexOf("\n"),p=e.substr(0,m).split(f),q=[];for(a=0;a<p.length;a++){var t=Ed(h,p[a]);t?q[a]=t.type:p[a]==h.keyPath&&(q[a]=h.type)}m++;J(this.f,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
r.qb=function(a,b,c){var d=a.a.objectStore(b);J(this.f,V(a)+" clearById: "+b+" "+c);var e=d.openCursor(Rc.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){U(a,1)};c.onerror=function(){U(a,c.error,!0)}}else U(a,0)};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};
r.rb=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?U(a,g,!0):U(a,d);else{b[h].h()!=e&&(e=b[h].h(),f=a.a.objectStore(e));var l=f["delete"](b[h].id);l.onsuccess=function(){d++;c(h)};l.onerror=function(a){a.preventDefault();g[h]=l.error;c(h)}}}var d=0,e,f;J(this.f,V(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
r.Qa=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);J(this.f,V(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){U(a,e)};h.onerror=function(){U(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};r.Eb=function(a,b,c){var d=a.a.objectStore(b);J(this.f,V(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){U(a,void 0)};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};
r.Ob=function(a,b,c,d){var e=a.a.objectStore(b).index(c);J(this.f,V(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?U(a,f,!0):U(a,h)};g.onerror=function(b){b.preventDefault();U(a,g.error,!0)}};
r.Za=function(a,b){var c=b.length,d=0;J(this.f,V(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&U(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&U(a,f.error,!0)}}};r.fb=function(a,b,c){var d=this;J(this.f,V(a)+b+":"+c);var e=a.a.objectStore(b).get(c);e.onsuccess=function(b){J(d.f,V(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");U(a,b.target.result)};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};
r.Ib=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)U(a,e);else{var n=b+10;n<h&&d(n)}var m;m=g.get(c[b]);m.onsuccess=function(c){f++;e[b]=c.target.result;f==h?U(a,e):(c=b+10,c<h&&d(c))};m.onerror=function(b){f++;b.preventDefault();U(a,m.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;J(this.f,V(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else U(a,[])};
r.Jb=function(a,b){function c(f){var h=b[f],l=a.a.objectStore(h.h()).get(h.id);l.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?U(a,d):(h=f+10,h<b.length&&c(h))};l.onerror=function(b){e++;b.preventDefault();U(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;J(this.f,V(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else U(a,[])};
r.Fb=function(a,b,c,d,e){if(d&&e)throw new Kd("unique count not available in IndexedDB");e=a.a.objectStore(b);b=V(a)+" "+b+(d?":"+d:"")+(c?":"+T(c):"");J(this.f,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){U(a,b.target.result)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}};
r.ua=function(a,b,c,d,e,f,g,h,l,n){var m=[],p=a.a.objectStore(c),q=f?l?"prevunique":"prev":l?"nextunique":"next";c=V(a)+" "+b+" "+c+(d?":"+d:"")+(e?T(e):"");f&&(c+=" reverse");l&&(c+=" unique");if(n&&u(n[0])){l=d?!u(n[1]):!0;var t=n[0],A=e?e.lower:void 0,C=e?e.upper:void 0,E=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=Oc(f?new Q(A,t,E,l):new Q(t,C,l,e));c+=" starting from "+T(n[0]);u(n[1])&&(c+=", "+T(n[1]))}J(this.f,c);var G;G=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,q):d?p.index(d).openCursor(e,
q):p.openCursor(e,q);var K=!1;G.onsuccess=function(c){if(c=c.target.result){if(!K){if(0<h){K=!0;c.advance(h);return}if(n&&d&&u(n[0]))if(u(n[1])){var e=wc.cmp(c.key,n[0]),l=f?-1:1;if(0==e){e=wc.cmp(c.primaryKey,n[1]);if(0==e){K=!0;c["continue"]();return}if(e==l)K=!0;else{c["continue"]();return}}else K=!0}else K=!0;else K=!0}1==b?m.push(c.key):2==b?m.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,m.push(l)):4==b?m.push(c.value):m.push([c.key,
c.primaryKey,c.value]);if(m.length<g)c["continue"]();else n&&(n[0]=md(c.key),n[1]=md(c.primaryKey)),U(a,m)}else n&&(n[0]=void 0,n[1]=void 0),U(a,m)};G.onerror=function(b){b.preventDefault();U(a,G.error,!0)}};function Rd(a,b){nd.call(this,a,b)}D(Rd,Nd);Rd.prototype.f=L("ydn.db.core.req.IndexedDb");Rd.prototype.b=function(a,b,c,d){c=W(this.a,c);return new Id(a,b,c,d)};var Sd=!wb||wb&&9<=Mb,Td=wb&&!Kb("9");!Ab||Kb("528");xb&&Kb("1.9b")||wb&&Kb("8")||vb&&Kb("9.5")||Ab&&Kb("528");xb&&!Kb("8")||wb&&Kb("9");function Ud(a,b){this.type=a;this.a=this.target=b}Ud.prototype.b=!1;Ud.prototype.d=!0;Ud.prototype.preventDefault=function(){this.d=!1};function Vd(a){Vd[" "](a);return a}Vd[" "]=da();function Wd(a,b){a&&this.init(a,b)}D(Wd,Ud);r=Wd.prototype;r.target=null;r.clientX=0;r.clientY=0;r.Yb=null;r.init=function(a,b){var c=this.type=a.type;Ud.call(this,c);this.target=a.target||a.srcElement;this.a=b;if((c=a.relatedTarget)&&xb)try{Vd(c.nodeName)}catch(d){}this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.Yb=a;a.defaultPrevented&&this.preventDefault();delete this.b};
r.preventDefault=function(){Wd.F.preventDefault.call(this);var a=this.Yb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Td)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Xd="closure_listenable_"+(1E6*Math.random()|0),Yd=0;function Zd(a,b,c,d,e,f){this.Y=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.ya=f;this.key=++Yd;this.ba=this.va=!1};var $d={},ae={},be={},ce={};function de(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)de(a,b[f],c,d,e);else c=ee(c),a&&a[Xd]?fe(a,b,c,!1,d,e):ge(a,b,c,!1,d,e)}
function ge(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=ae;b in g||(g[b]={G:0,aa:0});g=g[b];e in g||(g[e]={G:0,aa:0},g.G++);var g=g[e],h=ja(a),l;g.aa++;if(g[h]){l=g[h];for(var n=0;n<l.length;n++)if(g=l[n],g.Y==c&&g.ya==f){if(g.ba)break;d||(l[n].va=!1);return}}else l=g[h]=[],g.G++;n=he();g=new Zd(c,n,a,b,e,f);g.va=d;n.src=a;n.Y=g;l.push(g);be[h]||(be[h]=[]);be[h].push(g);a.addEventListener?a.addEventListener(b,n,e):a.attachEvent(b in ce?ce[b]:ce[b]="on"+b,n);$d[g.key]=g}
function he(){var a=ie,b=Sd?function(c){return a.call(b.src,b.Y,c)}:function(c){c=a.call(b.src,b.Y,c);if(!c)return c};return b}function je(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)je(a,b[f],c,d,e);else c=ee(c),a&&a[Xd]?fe(a,b,c,!0,d,e):ge(a,b,c,!0,d,e)}
function ke(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)ke(a,b[f],c,d,e);else if(c=ee(c),a&&a[Xd])b in a.j&&(a=a.j[b],c=le(a,c,d,e),-1<c&&(e=a[c],delete $d[e.key],e.ba=!0,Ja.splice.call(a,c,1)));else{d=!!d;a:{f=ae;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ja(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].Y==c&&a[f].capture==d&&a[f].ya==e){me(a[f]);break}}}
function me(a){if(!y(a)&&a&&!a.ba){var b=a.src;if(b&&b[Xd])ne(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in ce?ce[c]:ce[c]="on"+c,d);b=ja(b);be[b]&&(d=be[b],Ra(d,a),0==d.length&&delete be[b]);a.ba=!0;a.Y=null;a.a=null;a.src=null;a.ya=null;if(d=ae[c][e][b])d.$b=!0,oe(c,e,b,d);delete $d[a.key]}}}
function oe(a,b,c,d){if(!d.lb&&d.$b){for(var e=0,f=0;e<d.length;e++)d[e].ba||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.$b=!1;0==f&&(delete ae[a][b][c],ae[a][b].G--,0==ae[a][b].G&&(delete ae[a][b],ae[a].G--),0==ae[a].G&&delete ae[a])}}function pe(a,b,c,d,e){var f=1;b=ja(b);if(a[b]){var g=--a.aa,h=a[b];h.lb?h.lb++:h.lb=1;try{for(var l=h.length,n=0;n<l;n++){var m=h[n];m&&!m.ba&&(f&=!1!==qe(m,e))}}finally{a.aa=Math.max(g,a.aa),h.lb--,oe(c,d,b,h)}}return Boolean(f)}
function qe(a,b){var c=a.Y,d=a.ya||a.src;a.va&&me(a);return c.call(d,b)}
function ie(a,b){if(a.ba)return!0;var c=a.type,d=ae;if(!(c in d))return!0;var d=d[c],e,f;if(!Sd){e=b||fa("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new Wd;l.init(e,this);e=!0;try{if(g){for(var m=[],p=l.a;p;p=p.parentNode)m.push(p);f=d[!0];f.aa=f.G;for(var q=m.length-1;!l.b&&0<=q&&f.aa;q--)l.a=m[q],e&=pe(f,m[q],c,!0,l);if(h)for(f=d[!1],
f.aa=f.G,q=0;!l.b&&q<m.length&&f.aa;q++)l.a=m[q],e&=pe(f,m[q],c,!1,l)}else e=qe(a,l)}finally{m&&(m.length=0)}return e}c=new Wd(b,this);return e=qe(a,c)}var re="__closure_events_fn_"+(1E9*Math.random()>>>0);function ee(a){return ia(a)?a:a[re]||(a[re]=function(b){return a.handleEvent(b)})};function se(){Ad.call(this);this.j={};this.Aa=this}D(se,Ad);se.prototype[Xd]=!0;se.prototype.Gb=function(a,b,c,d){de(this,a,b,c,d)};se.prototype.removeEventListener=function(a,b,c,d){ke(this,a,b,c,d)};se.prototype.dispatchEvent=function(a){var b=this.Aa,c=a.type||a;if(x(a))a=new Ud(a,b);else if(a instanceof Ud)a.target=a.target||b;else{var d=a;a=new Ud(c,b);cb(a,d)}d=!0;a.b||(b=a.a=b,d=te(b,c,!0,a)&&d,a.b||(d=te(b,c,!1,a)&&d));return d};
function fe(a,b,c,d,e,f){var g=a.j[b]||(a.j[b]=[]),h=le(g,c,e,f);-1<h?(a=g[h],d||(a.va=!1)):(a=new Zd(c,null,a,b,!!e,f),a.va=d,g.push(a))}function ne(a,b){var c=b.type;c in a.j&&Ra(a.j[c],b)&&(delete $d[b.key],b.ba=!0)}function te(a,b,c,d){if(!(b in a.j))return!0;var e=!0;b=Sa(a.j[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.ba&&g.capture==c){var h=g.Y,l=g.ya||g.src;g.va&&ne(a,g);e=!1!==h.call(l,d)&&e}}return e&&!1!=d.d}
function le(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.Y==b&&f.capture==!!c&&f.ya==d)return e}return-1};function ue(a,b,c){if(ia(a))c&&(a=oa(a,c));else if(a&&"function"==typeof a.handleEvent)a=oa(a.handleEvent,a);else throw Error("Invalid listener argument");2147483647<b||s.setTimeout(a,b||0)};function ve(){this.a=!1}ve.prototype.a=!1;function we(a,b,c,d){Cd.call(this,a,b,c,d);this.ka=this.H=this.D=void 0;this.Kb=this.A=this.g=this.c=null;this.m=new ve}D(we,Cd);r=we.prototype;r.J=L("ydn.db.core.req.SimpleCursor");r.ib=function(){return!!this.d};r.update=function(){throw new Ic;};r.advance=function(a){function b(b){d++;if(!b||d>=a)return xe(c,b)}var c=this,d=this.c?-1:0;this.s?ye(this.g,b,this.c):ze(this.g,b,this.c)};
r.Da=function(a){if(null!=a){var b=this,c=new X(a),d=function(c){b.c=c;if(!c)return xe(b,c);var d=O(c.value.key,a);if(b.s){if(1!=d)return xe(b,c)}else if(-1!=d)return xe(b,c)};this.s?ye(this.g,d,c):ze(this.g,d,c)}else this.advance(1)};function Ae(a){ue(function(){a.m.a?(a.m.a=!1,this.V(this.D,this.H,this.ka),Ae(this)):(this.Kb(),this.Kb=null)},0,a)}
function xe(a,b){if(a.c=b){var c=b.value;if(a.o)if(a.s||null==a.o.upper)a.s&&null!=a.o.lower&&(d=O(c.key,a.o.lower),-1==d||0==d&&a.o.lowerOpen)&&(a.c=null);else{var d=O(c.key,a.o.upper);if(1==d||0==d&&a.o.upperOpen)a.c=null}if(a.c){if(a.unique&&null!=a.D&&null!=c.key&&0==O(a.D,c.key))return;a.D=c.key;a.H=a.b?c.p():a.D;4==a.t&&(a.Na?a.ka=a.H:a.ka=Be(a.A,a.H))}}a.c||(a.D=void 0,a.H=void 0,a.ka=void 0);return a.m.a=!0}
r.wb=function(a,b){var c=null;this.o&&(this.s?null!=this.o.upper&&(c=new X(this.o.upper)):null!=this.o.lower&&(c=new X(this.o.lower)));null!=a&&(c=this.b?new X(a,b):new X(a));this.Kb=Ce(this.d,function(d){function e(c){var d=c.value,e=d.key;if(c&&null!=e)if(null!=a)if(null!=b){if(d=d.p(),null!=d&&0==O(a,e)&&0==O(b,d))return}else{if(0==O(a,e))return}else if(this.o&&(!this.s&&this.o.lowerOpen&&null!=this.o.lower&&(d=O(e,this.o.lower),0==d)||this.s&&this.o.upperOpen&&null!=this.o.upper&&(d=O(e,this.o.upper),
0==d)))return;return xe(this,c)}this.A=De(d,this.Pa);this.g=Ee(this.A,this.e);this.s?ye(this.g,oa(e,this),c):ze(this.g,oa(e,this),c);Ae(this)},this)};r.clear=function(){throw new Ic;};r.Xa=function(){throw new Ic;};r.toString=function(){return"Simple"+we.F.toString.call(this)};function Fe(a,b){nd.call(this,a,b)}D(Fe,nd);r=Fe.prototype;r.f=L("ydn.db.crud.req.SimpleStore");r.ob=function(a,b,c){Ie(this,a,null,b,c,!0,!1)};
function Ie(a,b,c,d,e,f,g){J(a.f,V(b)+" "+(f?"put":"add")+"Object"+(g?"":"s "+d.length+" objects"));var h=Ce(b.a,function(a){var n;if(g)n=De(a,c),a=Je(n,e,d,!f),null!=a?U(b,a):(a=Md(a),a=new ad(a),U(b,a,!0));else{for(var m=c,p=[],q=!1,t=e||{},A=0;A<d.length;A++){var C;c?C=t[A]:(m=e[A],C=m.id,m=m.h());n&&n.getName()==m||(n=De(a,m));C=Je(n,C,d[A],!f);null!=C?p.push(C):(q=!0,p.push(new ad))}U(b,p,q)}h();h=null},a)}r.Bb=function(a,b,c,d){Ie(this,a,b,c,d,!1,!0)};
r.Mb=function(a,b,c,d){Ie(this,a,b,c,d,!0,!0)};r.Cb=function(a,b,c,d){Ie(this,a,b,c,d,!1,!1)};r.Lb=function(){throw new Ic("putData");};r.pb=function(a,b,c,d){Ie(this,a,b,c,d,!0,!1)};r.fb=function(a,b,c){var d=Ce(a.a,function(e){e=Be(De(e,b),c);U(a,e);d();d=null},this)};function Ke(a,b,c,d){var e=Ce(b.a,function(a){for(var g=[],h=c,l,n=0;n<d.length;n++){var m=d[n];m instanceof kd&&(h=m,m=h.id,h=h.h());l&&l.getName()==h||(l=De(a,h));m=Be(l,m);g[n]=m}U(b,g,!1);e();e=null},a)}
r.Ib=function(a,b,c){Ke(this,a,b,c)};r.Jb=function(a,b){Ke(this,a,null,b)};r.qb=function(a,b,c){var d=V(a)+" removeById "+b+" "+c;J(this.f,d);var e=this,f=Ce(a.a,function(g){g=Le(De(g,b),c);I(e.f,"success "+d+(0==g?" [not found]":""));U(a,g);f();f=null},this)};r.rb=function(a,b){J(this.f,V(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=Ce(a.a,function(f){for(var g=0;g<b.length;g++){var h=b[g].h(),l=b[g].id;c&&c.getName()==h||(c=De(f,h));d+=Le(c,l)}U(a,d);e();e=null},this)};
r.Eb=function(a,b,c){this.Qa(a,b,c)};r.Qa=function(a,b,c){var d=V(a)+" removeByKeyRange "+(c?T(c):"");J(this.f,d);var e=this,f=Ce(a.a,function(g){g=Me(De(g,b),c);I(e.f,d+" deleted "+g+" records.");U(a,g);f();f=null},this)};r.Ob=function(a,b,c,d){var e=V(a)+" removeByIndexKeyRange "+(d?T(d):"");J(this.f,e);var f=Ce(a.a,function(e){e=De(e,b);for(var h=e.Ja(c,d),l=h.length,n=0;n<l;n++)Le(e,h[n]);U(a,l);f();f=null},this)};
r.Za=function(a,b){var c=V(a)+" clearByStores";J(this.f,c);var d=Ce(a.a,function(e){for(var f=0;f<b.length;f++)De(e,b[f]).clear();I(this.f,"success "+c);U(a,b.length);d();d=null},this)};r.ab=function(a,b){var c=Ce(a.a,function(d){for(var e=[],f=0;f<b.length;f++){var g=De(d,b[f]);e.push(Ne(g))}U(a,e);c();c=null},this)};
r.Fb=function(a,b,c,d){var e=V(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");J(this.f,e);var f=Ce(a.a,function(g){g=Ne(De(g,b),d,c);I(this.f,"success "+e);U(a,g);f();f=null},this)};r.ua=function(a,b,c,d,e,f,g,h,l,n){var m=V(a)+" "+c+" "+(e?Md(e):"");J(this.f,m);var p=Ce(a.a,function(q){q=Oe(De(q,c),b,d,e,f,g,h,l,n);I(this.f,m+" "+q.length+" records found.");U(a,q);p();p=null},this)};function Pe(a,b){nd.call(this,a,b)}D(Pe,Fe);Pe.prototype.b=function(a,b,c,d){c=W(this.a,c);return new we(a,b,c,d)};function Qe(a,b,c,d){Cd.call(this,a,b,c,d);this.A=null;this.c=this.g=void 0}D(Qe,Cd);r=Qe.prototype;r.J=L("ydn.db.core.req.WebsqlCursor");r.p=k("c");r.init=function(a,b,c,d,e){Qe.F.init.call(this,a,b,c,d,e);this.A=x(b)?Ed(this.a,b):null};r.N=k("m");function Re(a,b){a.g=void 0;a.c=void 0;a.m=void 0;if(u(b))if(B(b)){var c=Se(b[a.a.d],a.a.type);a.c=c;if(a.b){var d=Ed(a.a,a.e);a.g=Se(b[a.e],d.type)}else a.g=c;a.m=a.Na?c:Te(b,a.a)}else a.m=b}
function Ue(a,b,c){Ed(a.a,a.e);var d=[],e=a.e,f=a.o,g=a.g;if(null!=f){var h=f.lower,l=f.upper,n=f.lowerOpen,f=f.upperOpen;a.s?l=null!=l&&-1==O(l,g)?l:g:h=null!=h&&1==O(h,g)?h:g;f=null!=h&&null!=l?Q.bound(h,l,!!n,!!f):null!=h?Rc.lowerBound(h,!!n):Rc.upperBound(l,!!f)}else f=a.s?Rc.upperBound(g):Rc.lowerBound(g);e=Ve(a.a,d,a.t,e,f,a.s,a.unique);c=a.s?Rc.upperBound(c,!1):Rc.lowerBound(c,!1);c=Ve(a.a,d,a.t,a.a.d,c,a.s,a.unique);e.q=e.q?e.q+(" AND "+c.q):c.q;c="SELECT "+e.select+" FROM "+e.xa+(e.q?" WHERE "+
e.q:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.ia;c+=" LIMIT 1";J(a.J,a+": continuePrimary:  SQL: "+c+" : "+T(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?Re(a,d.rows.item(0)):Re(a);b.call(a,a.g,a.c,a.m);b=null},function(c,d){H(a.J,"get error: "+d.message);a.Rb(d);Re(a);b.call(a,a.c,a.g,a.m);b=null;return!1})}
function We(a,b,c,d,e,f){var g=!d;d=[];a.b&&null!=f&&null!=c?c=Xe(a.a,a.t,d,a.A.getName(),a.o,c,g,f,a.s,a.unique):null!=c?(f=a.A?a.A.getName():null,c=Ye(a.a,a.t,d,f,a.o,a.s,a.unique,c,g)):(c=Ze(a.a,d,a.t,a.b?a.A.c:a.a.d,a.o,a.s,a.unique),a.b&&(c+=", "+a.a.c+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);J(a.J,a+": continue:  SQL: "+c+" : "+T(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?Re(a,d.rows.item(0)):Re(a);b.call(a,a.g,a.c,a.m);b=null},function(c,d){H(a.J,"get error: "+d.message);a.Rb(d);
Re(a);b.call(a,a.c,a.g,a.m);b=null;return!1})}r.ib=function(){return!!this.d};r.update=function(a){if(!this.ib())throw new fd;var b=new M,c=this.p();a=$e(this.a,a,c);var d="REPLACE INTO "+af(this.a)+" ("+a.Wb.join(", ")+") VALUES ("+a.dc.join(", ")+") ON CONFLICT FAIL";J(this.J,this+': clear "'+d+'" : '+T(a.O));this.d.executeSql(d,a.O,function(){b.C(c)},function(a,c){b.B(c);return!1});return b};
r.advance=function(a){var b=this.g,c=this.c,d=!0;null==this.g||this.b&&null==this.c||(a-=1,d=!1);We(this,function(a,d,g){var h=null!=b&&null!=a&&0==O(b,a);if(this.b){var l=null!=d&&null!=c&&0==O(d,c);if(h&&l)throw new Kc("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new Kc("current: "+b+" next: "+a);this.V(a,d,g)},this.g,d,a,this.c)};r.Da=function(a){null!=a?We(this,this.V,a,!0):this.advance(1)};r.wb=function(a,b){We(this,this.V,a,!1,0,b)};
r.clear=function(){if(!this.ib())throw new fd;var a=new M,b=this.a.d,b="DELETE FROM "+af(this.a)+" WHERE "+b+" = ?",c=[this.p()];J(this.J,this+': clear "'+b+'" : '+T(c));this.d.executeSql(b,c,function(b,c){a.C(c.rowsAffected)},function(b,c){a.B(c);return!1});return a};r.Xa=function(a){var b=O(a,this.c);if(0==b||1==b&&this.s||-1==b&&!this.s)throw new yd(this+" to continuePrimaryKey  from "+this.c+" to "+a+" on "+this.W+" direction is wrong");Ue(this,this.V,a)};
r.toString=function(){return"WebSql"+Qe.F.toString.call(this)};function bf(a,b){nd.call(this,a,b)}D(bf,nd);r=bf.prototype;r.f=L("ydn.db.crud.req.WebSql");function Te(a,b){var c=a._default_?Ld(a._default_):{};if(null!=b.keyPath){var d=Se(a[b.keyPath],b.type);null!=d&&cf(b,c,d)}for(d=0;d<b.a.length;d++){var e=b.a[d],f=e.c;"_default_"==f||e.e||e.multiEntry||e.type!=df||(f=Se(a[f],e.type),u(f)&&ef(e,c,f))}return c}r.Bb=function(a,b,c,d){ff(this,a,!0,!0,b,[c],[d])};r.Lb=function(){throw"not impl";};r.Mb=function(a,b,c,d){ff(this,a,!1,!0,b,[c],[d])};
r.Cb=function(a,b,c,d){ff(this,a,!0,!1,b,c,d)};
function ff(a,b,c,d,e,f,g){function h(c,e){if(null==f[c])if(J(a.f,"empty object at "+c+" of "+f.length),p++,p==f.length)I(a.f,q+" success "+q),U(b,m,t);else{var E=c+2;E<f.length&&h(E,e)}var G;G=u(g)?$e(l,f[c],g[c]):$e(l,f[c]);E=n+af(l)+" ("+G.Wb.join(", ")+") VALUES ("+G.dc.join(", ")+");";J(a.f,V(b)+" SQL: "+E+" PARAMS: "+G.O+" REQ: "+c+" of "+f.length);e.executeSql(E,G.O,function(g,q){function E(c,d){var f="ydn.db.me:"+l.getName()+":"+c.getName(),f=n+Ga(f)+" ("+l.c+", "+c.b+") VALUES (?, ?)",g=
[Uc(ba,l.type),Uc(d,c.type)];J(a.f,V(b)+" multiEntry "+f+" "+g);e.executeSql(f,g,da(),function(b,c){H(a.f,"multiEntry index insert error: "+c.message);return!1})}p++;var ba=u(G.key)?G.key:q.insertId;1>q.rowsAffected&&(t=!0,ba=new ad(ba+" no-op"));for(var db=0,sd=l.a.length;db<sd;db++){var kb=l.index(db);if(kb.multiEntry)for(var zb=xc(f[c],kb.keyPath),Ah=(zb?zb.length:0)||0,He=0;He<Ah;He++)E(kb,zb[He])}d?U(b,ba):(m[c]=ba,p==f.length?U(b,m,t):(db=c+2,db<f.length&&h(db,g)))},function(e,g){p++;t=!0;6==
g.code?g.name="ConstraintError":H(a.f,"error: "+g.message+" "+q);if(d)U(b,g,!0);else if(m[c]=g,p==f.length)J(a.f,"success "+q),U(b,m,t);else{var l=c+2;l<f.length&&h(l,e)}return!1})}var l=W(a.a,e),n=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";c=b.a;var m=[],p=0,q=V(b)+" inserting "+f.length+" objects.",t=!1;if(0<f.length)for(e=0;2>e&&e<f.length;e++)h(e,c);else I(a.f,"success"),U(b,[])}r.pb=function(a,b,c,d){ff(this,a,!1,!1,b,c,d)};
r.ob=function(a,b,c){if(0==c.length)U(a,[]);else{for(var d=[],e=0,f=0,g=this,h=function(h,l){var m=[];J(g.f,"put "+l.length+" objects to "+h);for(var n=gf(W(g.a,h)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].id);n=hf(a);n.X(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&U(a,d)},function(){e++;e==f&&U(a,d,!0)});ff(g,n,!1,!1,h,m,p)},l="",n=[],m=[],p=0;p<c.length;p++){var q=c[p].h(),t=c[p].id;q!=l?(f++,0<n.length&&h(l,n),n=[p],m=[t],l=q):(n.push(p),m.push(t))}0<
n.length&&h(l,n)}};r.fb=function(a,b,c){var d=a.a,e=W(this.a,b),f=this;b=e.c;c=[Uc(c,e.type)];b="SELECT * FROM "+af(e)+" WHERE "+b+" = ?";var g=V(a)+" SQL: "+b+" PARAMS: "+c;J(this.f,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=Te(d,e),U(a,d)):(I(f.f,"success no result: "+g),U(a,void 0))}else I(f.f,"success no result: "+g),U(a,void 0)},function(b,c){H(f.f,"error: "+g+" "+c.message);U(a,c,!0);return!1})};
r.Ib=function(a,b,c){function d(b,e){var p=l.c,q=[Uc(c[b],l.type)],t="SELECT * FROM "+af(l)+" WHERE "+p+" = ?";J(f.f,"SQL: "+t+" PARAMS: "+q);e.executeSql(t,q,function(e,f){h++;if(0<f.rows.length){var m=f.rows.item(0);null!=m&&(g[b]=Te(m,l))}else g[b]=void 0;h==c.length?U(a,g):(m=b+10,m<c.length&&d(m,e))},function(e,l){h++;H(f.f,"error: "+t+" "+l.message);if(h==c.length)U(a,g);else{var m=b+10;m<c.length&&d(m,e)}return!1})}var e=a.a,f=this,g=[],h=0,l=W(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,
e);else I(f.f,"success"),U(a,[])};
r.Jb=function(a,b){function c(d,h){var m=b[d],p=W(e.a,m.h()),q=v(m.id)?m.id.join("^|"):m.id instanceof Date?+m.id:m.id,m=p.c,q=[Uc(q,p.type)],t="SELECT * FROM "+af(p)+" WHERE "+m+" = ?";J(e.f,"SQL: "+t+" PARAMS: "+q);h.executeSql(t,q,function(h,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=Te(n,p))}else f[d]=void 0;g==b.length?(J(e.f,"success "+t),U(a,f)):(n=d+10,n<b.length&&c(n,h))},function(b,c){U(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,
d);else J(this.f,"success"),U(a,[])};
r.Za=function(a,b){function c(d,g){function h(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Ga(a);J(e.f,"SQL: "+a);g.executeSql(a,[])}var l=W(e.a,b[d]),n="DELETE FROM  "+af(l);J(e.f,"SQL: "+n+" PARAMS: []");g.executeSql(n,[],function(g){d==b.length-1?(J(e.f,"success "+n),U(a,b.length)):c(d+1,g)},function(b,c){U(a,c,!0);return!1});for(var m=0,p=l.a.length;m<p;m++){var q=l.index(m);q.multiEntry&&h(q)}}var d=a.a,e=this;0<b.length?c(0,d):(J(this.f,"success"),U(a,0))};
r.rb=function(a,b){function c(h){if(h>=b.length)U(a,f,g);else{var l=W(e.a,b[h].h()),n=Uc(b[h].id,l.type),m=" WHERE "+l.c+" = ?",p="DELETE FROM "+af(l)+m,q=V(a)+" SQL: "+p+" PARAMS: "+[n];d.executeSql(p,[n],function(){f++;c(h)},function(a,b){H(e.f,"error: "+q+b.message);g=!0;c(h);return!1});h++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Ga(b)+m;J(e.f,V(a)+NaN+b);d.executeSql(b,[n])},t=0,A=l.a.length;t<A;t++){var C=l.index(t);C.multiEntry&&p(C)}}}var d=a.a,e=
this,f=0,g=!1;J(this.f,V(a)+" removeByKeys: "+b.length+" keys");c(0)};r.qb=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Ga(b)+l;J(h.f,V(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=W(this.a,b),g=Uc(c,f.type),h=this,l=" WHERE "+f.c+" = ?";b="DELETE FROM "+af(f)+l;J(this.f,V(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){U(a,c.rowsAffected)},function(b,c){U(a,c,!0);return!1});b=0;for(c=f.a.length;b<c;b++){var n=f.index(b);n.multiEntry&&d(n)}};
r.Eb=function(a,b,c){jf(this,a,b,void 0,c)};r.Qa=function(a,b,c){jf(this,a,b,void 0,c)};r.Ob=function(a,b,c,d){jf(this,a,b,c,d)};
function jf(a,b,c,d,e){function f(c){c="ydn.db.me:"+h.getName()+":"+c.getName();c="DELETE FROM  "+Ga(c)+m;J(a.f,V(b)+NaN+c);g.executeSql(c,n)}var g=b.a,h=W(a.a,c);c="DELETE FROM "+af(h);var l=[],n=[],m="";null!=e&&(u(d)?(d=Ed(h,d),Tc(d.b,d.type,e,n,l)):Tc(h.c,h.type,e,n,l),m=" WHERE "+n.join(" AND "));c+=m;var p=V(b)+" SQL: "+c+" PARAMS: "+l;J(a.f,p);g.executeSql(c,l,function(c,d){J(a.f,"success "+p);U(b,d.rowsAffected)},function(c,d){H(a.f,"error: "+p+d.message);U(b,d,!0);return!1});e=0;for(d=h.a.length;e<
d;e++)c=h.index(e),c.multiEntry&&f(c)}r.ab=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Ga(b[g]);J(e.f,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?U(a,f):c(g)},function(b,c){U(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(J(this.f,"success"),U(a,0)):c(0)};
r.Fb=function(a,b,c,d,e){var f=[];b=Ze(W(this.a,b),f,6,d,c,!1,e);J(this.f,V(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d;a:{if(d=c.rows.item(0))for(var e in d)if(d.hasOwnProperty(e)){d=d[e];break a}d=void 0}U(a,d)},function(b,c){U(a,c,!0);return!1})};
r.ua=function(a,b,c,d,e,f,g,h,l,n){var m=this,p=[],q=W(this.a,c),t=q.d,A=q.type,C=A,E=null!=d&&d!==t?Ed(q,d):null,G=d||t;E&&(C=E.type);c=[];if(n&&u(n[0])){var K=n[0];E&&u(n[1])?(d=n[1],e=Xe(q,b,c,E.getName(),e,K,!0,d,f,l)):e=Ye(q,b,c,d,e,f,l,K,!0)}else e=Ze(q,c,b,G,e,f,l);y(g)&&(e+=" LIMIT "+g);y(h)&&(e+=" OFFSET "+h);var aa=V(a)+" SQL: "+e+" ;params= "+T(c);J(this.f,aa);a.a.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=Se(f[t],A):1==b?p[g]=Se(f[G],
C):3==b?p[g]=[Se(f[G],C),Se(f[t],A)]:null!=f&&(p[g]=Te(f,q));I(m.f,"success "+aa);n&&f&&(n[0]=Se(f[G],C),n[1]=Se(f[t],A));U(a,p)},function(b,c){H(m.f,"error: "+aa+c.message);U(a,c,!0);return!1})};function kf(a,b){nd.call(this,a,b)}D(kf,bf);kf.prototype.f=L("ydn.db.core.req.WebSql");kf.prototype.b=function(a,b,c,d){c=W(this.a,c);return new Qe(a,b,c,d)};function lf(a,b,c){M.call(this,0,c);this.b=a;this.d=[];this.c=[];this.w=[];this.a=null;this.da="";this.m=0}D(lf,M);r=lf.prototype;r.da="";r.Ta=L("ydn.db.Request");function mf(a,b,c){a.a=b;a.da=c;I(a.Ta,a+" BEGIN");if(b){for(c=0;c<a.c.length;c++)a.c[c][0].call(a.c[c][1],b);a.c.length=0}I(a.Ta,a+" END")}function hf(a){var b=new lf(a.b);a.m++;mf(b,a.a,a.da+"C"+a.m);return b}r.oc=function(){return!!this.a};
r.Jc=function(){if(this.a)if(I(this.Ta,this+" aborting"),ia(this.a.abort))this.a.abort();else if(ia(this.a.executeSql))this.a.executeSql("ABORT",[],da(),ea(!0));else throw new Jd;else throw new ed("No active transaction");};function U(a,b,c){var d=a.w.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){U(a,b,c)}):c?a.B(b):a.C(b)}function nf(a,b,c){a.w.push([b,c])}function Y(a,b,c){a.a?b.call(c,a.a):a.c.push([b,c])}r.Kc=function(a,b){this.d.push([a,b]);return this};
function of(a,b){for(var c=0;c<a.d.length;c++)a.d[c][0].call(a.d[c][1],b)}r.C=function(a){I(this.Ta,this+" SUCCESS");lf.F.C.call(this,a);pf(this)};r.B=function(a){I(this.Ta,this+" ERROR");lf.F.B.call(this,a);pf(this)};function pf(a){a.d.length=0;a.a=null;a.da=a.da}function V(a){var b="";a.da&&(b=a.a?"!":"",b+="["+a.da+"]");return a.b+b}function qf(a,b){var c=new lf(a);U(c,b);return c}r.uc=function(){return this};r.valueOf=k("da");r.toString=function(){return"Request:"+V(this)};
r.toJSON=function(){var a=(this.da||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.b?this.b.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};function rf(a){this.d=a;this.a=null;this.b=0}rf.prototype.e=L("ydn.db.tr.Mutex");rf.prototype.S=null;rf.prototype.R=null;rf.prototype.toString=function(){return"Mutex:"+("B"+this.d+"T"+this.b)+(this.a?"*":"")};function sf(a,b,c,d,e,f){this.l=a;this.c=0;this.m=d;this.g=c||"single";this.b=[];this.d=[];this.e=null;this.a=new rf(b);this.Ab=f||0;this.j=!1}r=sf.prototype;r.Ab=0;r.P=L("ydn.db.tr.Serial");r.Ya=function(){return this.a.b};
function tf(a,b,c){if("multi"==a.g)a:if(a=a.a,!a.S||!a.mode||c!=a.mode&&(a.mode!=N||c!=uc)||b.length>a.S.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.S.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.g)a:if(a=a.a,a.S&&a.mode&&c==a.mode&&a.S.length==b.length){for(c=0;c<b.length;c++)if(-1==a.S.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.g?!0:!1;return b}r.type=function(){return this.l.m()};
function uf(a){var b=0<a.b.length?a.b[0].S:null,c=0<a.b.length?a.b[0].mode:null;return null!=b&&null!=c?tf(a,b,c):!1}function vf(a,b,c,d,e){J(a.P,"push tx queue["+a.b.length+"]");a.b.push({eb:b,S:c,mode:d,R:e})}
r.pa=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new P("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new P("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.m&&!(0<=F(this.m,e[f])))throw new P('store name "'+f+e[f]+'" in scope of '+this);}}else throw new P("store names must be an array");var g=u(c)?c:uc,h=this;if(this.a.a||(!this.l.a||!this.l.a.Va())&&this.j)vf(this,a,b,g,d);else{var l=this.M();d&&this.d.push(d);
if(this.Ab&&this.Ya()>=this.Ab)throw new Jc("Exceed maximum number of transactions of "+this.Ab);this.j=!0;this.l.ta(function(c){var d=h.a;d.a=c;d.c=!1;d.S=b;d.mode=g;d.b++;d.R=null;l=h.M();gc(h.P,l+" BEGIN "+T(b)+" "+g);a(h);for(a=null;uf(h);)c=h.b.shift(),c.R&&h.d.push(c.R),J(h.P,"pop tx queue"+(h.b.length+1)+" reusing T"+h.Ya()),c.eb()},e,g,function(a,b){gc(h.P,l+" "+a);var c=h.a;c.a?(c.a=null,c.S=null,c.mode=null,ia(c.R)&&c.R(a,b),c.R=null):H(c.e,c+" has no TX to be unlocked for "+a);for(c=0;c<
h.d.length;c++)(0,h.d[c])(a,b);h.d.length=0;(c=h.b.shift())&&h.pa(c.eb,c.S,c.mode,c.R);h.c=0})}};r.M=function(){return"B"+this.a.d+"T"+this.a.b};r.request=function(a,b,c,d){var e=new lf(a);a=c||uc;var f=this;this.a.a&&!this.a.c&&tf(this,b,a)?(b=this.a.a,this.c++,mf(e,b,this.M()+"R"+this.c),d&&this.d.push(d)):f.pa(function(){var a=f.a.a;f.c++;mf(e,a,f.M()+"R"+f.c)},b,a,d);return e};
r.ea=function(a,b,c,d,e){d=d||uc;var f=this,g;if(f.a.a&&!f.a.c&&tf(this,c,d)){var h=f.a.a;f.c++;g=f.M()+"R"+f.c;I(f.P,g+" BEGIN");b(h,g,function(b,c){f.e=h;c?(I(f.P,g+" ERROR"),a.B(b)):(I(f.P,g+" SUCCESS"),a.C(b));f.e=null});I(f.P,g+" END");b=null}else f.pa(function(){var c=f.a.a;f.c++;g=f.M()+"R"+f.c;I(f.P,g+" BEGIN");b(c,g,function(b,d){f.e=c;d?(I(f.P,g+" ERROR"),a.B(b)):(I(f.P,g+" SUCCESS"),a.C(b));f.e=null});I(f.P,g+" END");b=null},c,d,e)};r.getName=function(){return this.l.getName()};
r.toString=function(){return"Serial:"+this.M()+(this.e?"*":"")};function wf(a,b){sf.call(this,a,b)}D(wf,sf);wf.prototype.P=L("ydn.db.tr.AtomicSerial");wf.prototype.request=function(a,b,c){var d,e,f,g=wf.F.request.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new jd;U(g,c,!0)}});nf(g,function(a,b,c){f=b;e=a;d=c});return g};
wf.prototype.ea=function(a,b,c,d,e){var f,g,h=new M;h.X(function(a){g=!1;f=a},function(a){g=!0;f=a});wf.F.ea.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.B(c);else if(!0===g)a.B(f);else if(!1===g)a.C(f);else{var d=new jd;a.B(d)}e&&(e(b,c),e=void 0)})};wf.prototype.toString=function(){return"Atomic"+wf.F.toString.call(this)};function xf(a,b,c,d){this.l=a;this.b=b;this.a=c;this.d=d;this.c=null}xf.prototype.i=L("ydn.db.tr.DbOperator");xf.prototype.e=function(){return this.a.Ya()};function Z(a){a.c||(a.c=a.l.ac());return a.c}xf.prototype.toString=function(){return"TxStorage:"+this.l.getName()};function yf(a,b,c,d){xf.call(this,a,b,c,d)}D(yf,xf);r=yf.prototype;r.i=L("ydn.db.crud.DbOperator");
r.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(v(a)){if(u(c)||u(b))throw new P("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!zf(this.b,f[l]))throw new P('store name "'+f[l]+'" at '+l+" not found.");I(this.i,"countStores: "+T(f));e=this.a.request("count",f);Y(e,function(){Z(this).ab(e,f)},this)}else if(x(a)){l=W(this.b,a);if(!l)throw new P('store name "'+a+'" not found.');if(u(d)&&!ha(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,B(c)){var n=Sc(c);if(n)throw new P("invalid key range: "+Md(c)+" "+n);h=Pc(c)}else{if(null!=c)throw new P("invalid key range: "+Md(c)+" of type "+typeof c);h=null}else if(B(b)||null==b)if(B(b)){if(n=Sc(b))throw new P("invalid key range: "+Md(b)+" "+n);h=Pc(b)}else{if(null!=b)throw new P("key range must be  an object but found "+Md(b)+" of type "+typeof b);h=null}else throw new P('invalid second argument for count "'+Md(c)+'" of type '+typeof b);I(this.i,"countKeyRange: "+a+" "+(g?g:"")+T(h));e=
this.a.request("count",f);Af(l,e,arguments);Y(e,function(){Z(this).Fb(e,f[0],h,g,!!d)},this)}else throw new P("Invalid store name or store names.");else H(this.i,"count method requires store name(s)"),l=Bf(this.b),e=this.a.request("count",l),nf(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),Y(e,function(){Z(this).ab(e,f)},this);return e};
r.get=function(a,b){var c;if(a instanceof kd){var d=a,e=d.h(),f=W(this.b,e);if(!f){if(this.b.U())return qf("get",void 0);throw new P("Store: "+e+" not found.");}var g=d.id;I(this.i,"getByKey: "+e+":"+g);c=this.a.request("get",[e]);Af(f,c,arguments);Y(c,function(){Z(this).fb(c,e,g)},this)}else if(x(a)&&u(b)){var h=a,f=W(this.b,h);if(!f){if(this.b.U())return qf("get",void 0);throw new P('Store name "'+h+'" not found.');}var l=b;I(this.i,"getById: "+h+":"+l);c=this.a.request("get",[h]);Af(f,c,arguments);
Y(c,function(){Z(this).fb(c,h,l)},this)}else throw new P("get require valid input arguments.");return c};
r.keys=function(a,b,c,d,e,f){var g,h,l=null,n=!1,m=W(this.b,a);if(!x(a))throw new P("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.b.U()){if(!m)throw new P('store name "'+a+'" not found.');if(x(b)&&!Ed(m,b))throw new P('index "'+b+'" not found in store "'+a+'".');}if(this.b.U()&&!m)return qf("keys",[]);var p;if(x(b)){if(m=Sc(c))throw new P("invalid key range: "+c+" "+m);l=Pc(c);if(y(d))g=d;else{if(u(d))throw new P("limit must be a number");g=100}if(y(e))h=e;else{if(u(e))throw new P("offset must be a number");
h=0}if(u(f))if(ha)n=f;else throw new P("reverse must be a boolean");I(this.i,"keysByIndexKeyRange: "+a);p=this.a.request("keys:iter:index",[a]);Y(p,function(){Z(this).ua(p,2,a,b,l,n,g,h,!1)},this)}else{if(B(b)){if(m=Sc(b))throw new P("invalid key range: "+Md(b)+" "+m);l=Pc(b)}else{if(null!=b)throw new TypeError("invalid key range: "+Md(b)+" of type "+typeof b);l=null}if(y(c))g=c;else{if(u(c))throw new P("limit must be a number");g=100}if(y(d))h=d;else{if(u(d))throw new P("offset must be a number");
h=0}if(u(e))if(ha(e))n=e;else throw new P("reverse must be a boolean");I(this.i,"keysByKeyRange: "+a);p=this.a.request("keys",[a]);Y(p,function(){Z(this).ua(p,2,a,null,l,n,g,h,!1)},this)}return p};
r.O=function(a,b,c,d,e,f){var g,h,l,n=!1;if(x(a)){var m=a,p=W(this.b,m);if(!p){if(this.b.U())return qf("get",[]);throw new gd(m);}if(v(b)){if(u(c)||u(d))throw new P("too many input arguments");var q=b;I(this.i,"listByIds: "+m+" "+q.length+" ids");g=this.a.request("values:array",[m]);Af(p,g,arguments);Y(g,function(){Z(this).Ib(g,m,q)},this)}else if(x(b)){var t=b;if(!Cf(p,t))throw new P('index "'+t+'" not found in store "'+m+'"');var A=Sc(c);if(A)throw new P("invalid key range: "+c+" "+A);var C=Pc(c);
if(u(d))if(y(d))h=d;else throw new P("limit must be a number.");else h=100;if(u(e))if(y(e))l=e;else throw new P("offset must be a number.");else l=0;if(ha(f))n=f;else if(u(f))throw new P("reverse must be a boolean, but "+f);I(this.i,"listByIndexKeyRange: "+m+":"+t);g=this.a.request("values:iter:index",[m]);Af(p,g,arguments);Y(g,function(){Z(this).ua(g,4,m,t,C,n,h,l,!1)},this)}else{C=null;if(B(b)){if(A=Sc(b))throw new P("invalid key range: "+b+" "+A);C=Pc(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+
Md(b)+'" of type '+typeof b);if(u(c))if(y(c))h=c;else throw new P("limit must be a number, but "+c+" is "+typeof c);else h=100;if(u(d))if(y(d))l=d;else throw new P("offset must be a number, but "+d+" is "+typeof d);else l=0;if(u(e))if(ha(e))n=e;else throw new P("reverse must be a boolean, but "+e+" is "+typeof e);I(this.i,(C?"listByKeyRange: ":"listByStore: ")+m);g=this.a.request("values",[m]);Af(p,g,arguments);Y(g,function(){Z(this).ua(g,4,m,null,C,n,h,l,!1)},this)}}else if(v(a))if(a[0]instanceof
kd){for(var p=[],E=a,A=0;A<E.length;A++){var G=E[A].h();if(!zf(this.b,G)){if(this.b.U())return p=[],p[E.length-1]=void 0,qf("get",p);throw new P("Store: "+G+" not found.");}0<=F(p,G)||p.push(G)}I(this.i,"listByKeys: "+T(p)+" "+E.length+" keys");g=this.a.request("values:keys",p);Y(g,function(){Z(this).Jb(g,E)},this)}else throw new P("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new P("first argument "+a+" is invalid.");return g};
r.xb=function(a,b,c){var d=x(a)?a:B(a)?a.name:void 0;if(!x(d))throw new P("store name "+d+" must be a string, but "+typeof d);var e=W(this.b,d);if(!e){if(!this.b.U())throw new P('store name "'+d+'" not found.');e=Df(B(a)?a:{name:d});I(this.i,"Adding object store: "+d);Ef(this.l,e)}else if(this.b.U()&&B(a)&&(a=Df(a),a=Ff(e,a)))throw new Jd(a);var f;if(!e)throw new P('store name "'+d+'" not found.');if(x(e.keyPath)&&u(c))throw new P("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.b&&!u(c))throw new P("out-of-line key must be provided.");if(v(b)){I(this.i,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Gf(e,b[a]);f=this.a.request("add:array",[d],N);Y(f,function(){Z(this).Cb(f,d,b,c)},this);e.oa&&f.fa(function(a){a=new Hf(If,this.l,e.getName(),a,b);this.l.dispatchEvent(a)},this)}else if(B(b))a="store: "+d+" key: "+Jf(e,b,c),I(this.i,"addObject: "+a),Gf(e,b),f=this.a.request("add",[d],N),Y(f,function(){Z(this).Bb(f,d,b,c)},this),e.oa&&f.fa(function(a){a=new Kf(If,
this.l,e.getName(),a,b);this.l.dispatchEvent(a)},this);else throw new P("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function Lf(a,b){var c=x(b)?b:B(b)?b.name:void 0;if(!x(c))throw new P("store name must be a string");var d=W(a.b,c);if(!d){if(!a.b.U())throw new gd(c);d=Df(B(b)?b:{name:c});I(a.i,"Adding object store: "+c);Ef(a.l,d)}else if(a.b.U()&&B(b)){var e=Df(b);if(e=Ff(d,e))throw new Jd(e);}if(!d)throw new gd(c);return d}
r.load=function(a,b,c){var d=c||",",e=Lf(this,a).getName();a=new M;var f=this;this.a.ea(a,function(a,c,l){Z(f).Lb(a,c,l,e,b,d)},[e],N);return a};
function Mf(a,b){var c=Nf(b);J(a.i,"query "+b);var d=a.a.request("search",c,uc);Y(d,function(){var a=Z(this);Of(b,function(c,g,h,l){var n=hf(d);a.ua(n,4,c,g,Pc(h),!1,100,0,!1);n.Ha(function(a){var c=null;a instanceof Array||(c=a,a=[]);for(var e=0;e<a.length;e++){var f;f=a[e];var g=f.id,g=x(g)?Cc(g):g,h=g[3];(f=1==this.type&&h!=this.value?null:new Pf(this,g[0],g[2],g[1],h,f.k,f.loc))&&b.d.push(f)}b.c--;a=0==b.c?!1:b.b[b.b.length-1].j===this.j?!0:null;!0===a?of(d,b):!1===a&&d.C(b.e());if(c)throw c;
},l)})},a);return d}
r.Ea=function(a,b,c){var d,e=this;if(a instanceof kd){var f=a,g=f.h(),h=W(this.b,g);if(!h)throw new P('store "'+g+'" not found.');if(h.keyPath){var l=Jf(h,b);if(null!=l){if(0!=O(l,f.id))throw new P("Inline key must be "+f+" but "+l+" found.");}else cf(h,b,f.id);return this.Ea(g,b)}return this.Ea(g,b,f.id)}if(v(a)){if(u(c))throw new P("too many arguments");var n=a;if(!u(b))throw new P("record values required");for(var m=b,f=[],g=0,h=n.length;g<h;g++){l=n[g].h();-1==F(f,l)&&f.push(l);var p=W(this.b,
l);if(!p)throw new P('store "'+l+'" not found.');p.keyPath&&cf(p,m[g],n[g].id)}I(this.i,"putByKeys: to "+T(f)+" "+m.length+" objects");for(g=0;g<m.length;g++)Gf(p,m[g]);d=this.a.request("put:keys",f,N);Af(p,d,arguments);Y(d,function(){Z(e).ob(d,m,n)},this)}else if(x(a)||B(a)){var p=Lf(this,a),q=p.getName();if(p.keyPath&&u(c))throw new P("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.b&&!u(c))throw new P("out-of-line key must be provided.");if(v(b)){var t=b,A=c;I(this.i,
"putObjects: "+q+" "+t.length+" objects");for(g=0;g<t.length;g++)Gf(p,t[g]);d=this.a.request("put:array",[q],N);Af(p,d,arguments);Y(d,function(){Z(this).pb(d,q,t,A)},this);p.oa&&d.fa(function(a){this.l.dispatchEvent(new Hf(Qf,this.l,q,a,t))},this)}else if(B(b)){var C=b,E=c;I(this.i,"putObject: "+q+" "+E);Gf(p,C);d=this.a.request("put",[q],N);Af(p,d,arguments);Y(d,function(){Z(e).Mb(d,q,C,E)},this);p.oa&&d.fa(function(a){this.l.dispatchEvent(new Kf(Qf,this.l,q,a,C))},this)}else throw new P("put record value must be Object or array of Objects");
}else throw new P("the first argument of put must be store name, store schema or array of keys.");return d};
function Rf(a,b,c){var d=a.d,e,f;if(x(b)){var g=W(a.b,b);if(g){if(!g.keyPath&&!g.b)throw new P('key required for store "'+b+'"');}else throw new gd(b);for(var h=0;h<c.length;h++)Gf(g,c[h]);e=[b]}else{f=b;e=[];for(var h=0,l=f.length;h<l;h++){var n=f[h].h(),g=W(a.b,n);-1==F(e,n)&&e.push(n);if(!g)throw new gd(n);Gf(g,c[h])}}var m;x(b)?(g=W(a.b,b),m=d.request("put:array",e,N),Y(m,function(){Z(this).pb(m,b,c,void 0)},a)):(m=d.request("put:keys",e,N),Y(m,function(){Z(this).ob(m,c,f)},a));return m}
function Sf(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].h();-1==F(c,f)&&c.push(f);if(!zf(a.b,f))throw new gd(f);}var g=a.d.request("rm:keys",c,N);Y(g,function(){Z(this).rb(g,b)},a);return g}function Tf(a,b,c){var d=a.d.request("rm:iter",[b],N);Y(d,function(){Z(this).Qa(d,b,c||null)},a);return d}
r.clear=function(a,b,c){if(u(c))throw new P("too many input arguments");var d;if(x(a)){c=W(this.b,a);if(!c)throw new P('store name "'+a+'" not found.');if(B(b)){var e=Pc(b);if(null===e)throw new P("clear method requires a valid non-null KeyRange object.");I(this.i,"clearByKeyRange: "+a+":"+T(e));d=this.a.request("clear",[a],N);Af(c,d,[a,e]);Y(d,function(){Z(this).Eb(d,a,e)},this)}else{if(u(b))throw new P("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);I(this.i,"clearByStore: "+a);d=this.a.request("clear",[a],N);Y(d,function(){Z(this).Za(d,[a])},this)}}else if(!u(a)||v(a)&&x(a[0])){var f=a||Bf(this.b);I(this.i,"clearByStores: "+T(f));d=this.a.request("clear",f,N);Y(d,function(){Z(this).Za(d,f)},this)}else throw new P('first argument "'+a+'" is invalid.');return d};
r.yb=function(a,b,c){var d;if(x(a)){var e=W(this.b,a);if(!e)throw new P('store name "'+a+'" not found.');if(u(c))if(x(b)){var f=Ed(e,b);if(!f)throw new P("index: "+b+" not found in "+a);if(B(c)||null===c){var g=Pc(c);I(this.i,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],N);Y(d,function(){Z(this).Ob(d,a,f.getName(),g)},this)}else throw new P("key range "+c+' is invalid type "'+typeof c+'".');}else throw new P('index name "'+b+'" must be a string, but '+typeof b+
" found.");else if(x(b)||y(b)||w(b)||b instanceof Date)I(this.i,"removeById: "+a+":"+b),d=this.a.request("rm",[a],N),Af(e,d,[a,b]),Y(d,function(){Z(this).qb(d,a,b)},this),e.oa&&d.fa(function(b){this.l.dispatchEvent(new Kf(Uf,this.l,a,b,void 0))},this);else if(B(b))g=Pc(b),I(this.i,"removeByKeyRange: "+a+":"+T(g)),d=this.a.request("rm:iter",[a],N),Af(e,d,[a,g]),Y(d,function(){Z(this).Qa(d,a,g)},this),e.oa&&d.fa(function(b){this.l.dispatchEvent(new Hf(Uf,this.l,a,b,void 0))},this);else throw new P('Invalid key or key range "'+
b+'" of type '+typeof b);}else if(a instanceof kd){var h=a.h(),e=W(this.b,h);d=this.a.request("rm",[h],N);Af(e,d,[h,a.id]);Y(d,function(){Z(this).qb(d,h,a.id)},this)}else if(v(a)){c=[];for(var e=0,l=a.length;e<l;e++){if(!(a[e]instanceof kd))throw new P("key list element at "+e+" of "+l+' must be yn.db.Key, but "'+Md(a[e])+'" ('+ga(a[e])+") is not ydn.db.Key.");var n=a[e].h();-1==F(c,n)&&c.push(n)}if(1>c.length)throw new P('at least one valid key required in key list "'+Md(a)+'"');d=this.a.request("rm:keys",
c,N);Y(d,function(){Z(this).rb(d,a)},this)}else throw new P('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Md(a)+'" ('+ga(a)+") found.");return d};r.toString=function(){return"DbOperator:"+this.l.getName()};function Vf(a,b,c,d){xf.call(this,a,b,c,d)}D(Vf,yf);r=Vf.prototype;r.i=L("ydn.db.core.DbOperator");r.get=function(a,b){if(a instanceof R){var c=a.h(),d=W(this.b,c);if(!d)throw new P('store "'+c+'" not found.');var e=a.c;if(u(e)&&!Cf(d,e))throw new P('index "'+e+'" not found in store "'+c+'".');I(this.i,"getByIterator:"+a);var f=this.a.request("get:iter",[c]);Y(f,function(){Wf(this,5,f,a,1)},this);return f}return Vf.F.get.call(this,a,b)};
r.keys=function(a,b,c,d,e){if(a instanceof R){var f=100;if(y(b)){if(f=b,1>f)throw new P("limit must be a positive value, but "+b);}else if(u(b))throw new P("limit must be a number,  but "+b);if(u(c))throw new P("offset must not be specified");I(this.i,"keysByIterator:"+a);var g=this.a.request("keys:iter",a.stores());Y(g,function(){a.e?Wf(this,1,g,a,f):Wf(this,2,g,a,f)},this);return g}return Vf.F.keys.call(this,a,b,c,d,e)};
r.count=function(a,b,c){if(a instanceof R){if(u(b)||u(c))throw new P("too many arguments.");I(this.i,"countIterator:"+a);var d=this.a.request("count",a.stores());Y(d,function(){Wf(this,6,d,a)},this);return d}return Vf.F.count.call(this,a,b,c)};
r.O=function(a,b,c,d,e,f){if(a instanceof R){var g;if(y(b)){if(g=b,1>g)throw new P("limit must be a positive value, but "+g);}else if(u(b))throw new P("limit must be a number, but "+b);if(u(c))throw new P("offset must not be specified");I(this.i,"listByIterator:"+a);var h=this.a.request("values:iter",a.stores());Y(h,function(){a.a?Wf(this,2,h,a,g):Wf(this,4,h,a,g)},this);return h}return Vf.F.O.call(this,a,b,c,d,e,f)};
r.hc=function(a,b){var c=new M;if(u(b)){if(!v(b))throw new TypeError("Iterator argument must be an array.");for(var d=0;d<b.length;d++)if(!(b[d]instanceof R))throw new TypeError("Iterator at "+d+" must be cursor range iterator.");}var e;e=b?b:a.Rc();for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=F(f,g[h])||f.push(g[h]);J(this.i,this+": scan for "+e.length+" iterators on "+f);var l=this;this.a.ea(c,function(b,c,d){function f(a){for(var b=0;b<ca.length;b++)Gd(ca[b]);Qa(ca);
I(l.i,h+" error");d(a,!0)}function g(b,c){if(C)throw new vd;ba++;var f=ba===E,m=G[b],n=e[m],q=ca[m],m=q.p(),q=q.N();K[b]=c;aa[b]=n.e?n.a?m:q:n.a?c:q;if(f){var t;t=a(K,aa);f=[];n=[];m=[];q=[];if(v(t))for(var z=0;z<t.length;z++)!0===t[z]?m[z]=1:!1===t[z]?q[z]=!0:n[z]=t[z];else if(null===t)f=[];else if(u(t))if(B(t)){f=["advance","continue","continuePrimary","restart"];for(z in t)if(!(0<=F(f,z)))throw new Jc('Unknown attribute "'+z+'" in cursor advancement object');f=t.continuePrimary||[];n=t["continue"]||
[];m=t.advance||[];q=t.restart||[]}else throw new Kd("scan callback output");else for(f=[],z=0;z<e.length;z++)u(G[z])&&(m[z]=1);for(z=ba=t=0;z<e.length;z++)null!=f[z]||u(n[z])||null!=q[z]||null!=m[z]||ba++;for(z=0;z<e.length;z++)if(null!=f[z]||u(n[z])||null!=q[z]||null!=m[z]){var rd=G[z];if(!u(rd))throw new Kd(z+" is not an iterator.");var rd=e[rd],yb=ca[z];if(null==K[z]){var Ge=z+"/"+e.length;if(null!=m[z])throw new yd(yb+" "+Ge+" must not advance "+m[z]+" steps");if(u(n[z]))throw new yd(yb+" "+
Ge+" must not continue to key "+n[z]);if(null!=f[z])throw new yd(yb+" "+Ge+" must not continue to primary key "+f[z]);}K[z]=void 0;aa[z]=void 0;if(null!=q[z])Hd(yb);else if(u(n[z]))yb.Da(n[z]);else if(null!=f[z])yb.Xa(f[z]);else if(null!=m[z])yb.advance(1);else throw new vd(rd+": has no action");t++}if(0==t){for(z=0;z<ca.length;z++)Gd(ca[z]);C=!0;Qa(ca);I(l.i,"success "+h);d(void 0)}}}var h=c+" "+l+" scanning";J(l.i,h);var C=!1,E,G=[],K=[],aa=[],ca=[],ba=0;(function(){for(var a=0,d=0;d<e.length;d++){var h=
e[d],p=Z(l).b(b,c,h.h());h.load(p);p.w=f;p.j=pa(g,a);ca[d]=p;G[a]=d;a++}E=e.length})()},f,uc);return c};
r.gc=function(a,b,c,d){if(!(b instanceof R))throw new P("Second argument must be cursor range iterator.");if(!W(this.b,b.h()))throw new P('Store "'+b.h()+'" not found.');c=c||uc;var e=this,f=this.a.request("open",b.stores(),c);I(this.i,"open:"+c+" "+b);Y(f,function(c){var h=V(f);I(e.i,h+" iterating "+b);var l=Z(e).b(c,h,b.h());b.load(l);l.w=function(a){U(f,a,!0)};l.j=function(b){null!=b?(b=a.call(d,l),!0===b?Hd(l):B(b)?!0===b.restart?Hd(l,b["continue"],b.continuePrimary):null!=b["continue"]?l.Da(b["continue"]):
null!=b.continuePrimary?l.Xa(b.continuePrimary):(Gd(l),U(f,void 0)):l.advance(1)):(Gd(l),U(f,void 0))}},this);return f};r.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new P('Store "'+e+'" not found.');e=new M;J(this.i,"map:"+a);this.a.ea(e,function(d,e,f){J(c.i,e+" iterating "+a);var n=Z(c).b(d,e,a.h());a.load(n);n.w=function(a){f(a,!1)};n.j=function(c){null!=c?(c=a.e?a.a?c:n.p():a.a?c:n.N(),b(c),n.advance(1)):(f(void 0),b=null)}},d,uc);return e};
r.reduce=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new P('Store "'+f+'" not found.');f=new M;var h=B(c)?Ld(T(c)):c;I(this.i,"reduce:"+a);this.a.ea(f,function(c,e,f){var g=Z(d).b(c,e,a.h());a.load(g);g.w=function(a){f(a,!0)};var q=0;g.j=function(c){null!=c?(c=a.e?a.a?c:g.p():a.a?c:g.N(),h=b(h,c,q++),g.advance(1)):f(h)}},e,uc);return f};
function Wf(a,b,c,d,e){var f=[],g=c.a,h=V(c),l=h+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);I(a.i,l);var n=Z(a).b(g,h,d.h());d.load(n);n.w=function(a){Gd(n);U(c,a,!0)};var m=0,p=!1;n.j=function(g){p||(J(a.i,l+" starting"),p=!0);if(null!=g){var h=d.e?n.p():g;m++;1==b?f.push(g):2==b?f.push(n.p()):3==b?f.push([g,n.p()]):6!=b&&f.push(d.a?h:n.N());5==b?(Gd(n),U(c,f[0])):6==b||!u(e)||m<e?n.Da():(I(a.i,"success:"+l+" "+f.length+" records"),Gd(n),U(c,f))}else I(a.i,"success:"+l+" "+f.length+" records"),
Gd(n),U(c,5==b?f[0]:6==b?m:f)}};M.prototype.done=M.prototype.fa;M.prototype.fail=M.prototype.Tb;M.prototype.then=M.prototype.X;M.prototype.always=M.prototype.Ha;se.prototype.addEventListener=se.prototype.Gb;var If="created",Uf="deleted",Qf="updated";function Xf(a,b){Ud.call(this,a,b)}D(Xf,Ud);Xf.prototype.h=k("c");function Yf(a,b,c,d,e){Ud.call(this,a,b);this.version=c;this.ic=d;this.bc=e}D(Yf,Xf);r=Yf.prototype;r.name="ReadyEvent";r.version=NaN;r.ic=NaN;r.bc=null;r.Pc=k("version");r.qc=k("ic");r.pc=k("bc");function Zf(a,b,c){Ud.call(this,c||"error",a);this.error=b}D(Zf,Xf);Zf.prototype.name="ErrorEvent";Zf.prototype.error=null;Zf.prototype.e=k("error");function $f(a,b){Zf.call(this,a,b,"fail")}
D($f,Zf);$f.prototype.name="FailEvent";function Kf(a,b,c,d,e){Ud.call(this,a,b);this.c=c;this.key=d;this.value=e}D(Kf,Xf);Kf.prototype.name="RecordEvent";Kf.prototype.e=k("key");Kf.prototype.N=k("value");function Hf(a,b,c,d,e){Ud.call(this,a,b);this.c=c;this.keys=d;this.O=e}D(Hf,Xf);Hf.prototype.name="StoreEvent";Hf.prototype.Ja=k("keys");Hf.prototype.gb=k("O");function ag(a,b,c,d,e,f){u(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new P("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!u(a)&&u(e)&&(a=e);this.keyPath=a;this.e=w(this.keyPath);this.name=e;this.type=bg(b);if(u(b)){if(!u(this.type))throw new P("type invalid in index: "+this.name);if(v(this.keyPath))throw new P('composite key for store "'+this.name+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;
this.g=x(this.type)?this.type:Od;this.c=x(e)?e:v(a)?this.keyPath.join(","):a;this.b=Ga(this.c);this.a=this.e||this.multiEntry?null:this.keyPath.split(".");this.d=f||null}function cg(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=xc(b,a.keyPath[d]);c[d]=f}return c}return xc(b,a.keyPath)}}function ef(a,b,c){for(var d=0;d<a.a.length;d++)d==a.a.length-1?b[a.a[d]]=c:B(b[a.a[d]])||(b[a.a[d]]={})}var df="DATE",Pd="INTEGER",Qd="NUMERIC",Od="TEXT";
function Uc(a,b){if(b==df){if(a instanceof Date)return+a}else return null!=b?a:zc(a)}function Se(a,b){return b==df?new Date(a):u(b)?a:Cc(a)}var dg=["BLOB",df,Pd,Qd,Od];function bg(a){if(x(a))return a=F(dg,a),dg[a]}ag.prototype.getName=k("name");ag.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
ag.prototype.wa=function(){var a=v(this.keyPath)?Sa(this.keyPath):this.keyPath;return new ag(a,this.type,this.unique,this.multiEntry,this.name,this.d)};function Dd(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Va(a,b)?null:"expect: "+a+", but: "+b:eg(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
ag.prototype.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Sa(this.keyPath):this.keyPath,c=this.type;u(a.type)||"TEXT"!=c||(c=void 0);return new ag(b,c,this.unique,this.multiEntry,a.name)};function fg(a,b,c,d,e,f,g){this.name=a;if(!x(this.name))throw new P("store name must be a string");this.keyPath=u(b)?b:null;this.j=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.j)throw new P("keyPath must be a string or array");this.b=c;var h;if(null!=d){h=bg(d);if(!u(h))throw new P('type "'+d+'" for primary key in store "'+this.name+'" is invalid.');if(this.j)throw new P('composite key for store "'+this.name+'" must not specified type');}this.type=null!=h?h:this.b?Pd:void 0;this.e=
x(this.keyPath)?this.keyPath.split("."):[];this.a=e||[];this.oa=!!f;this.jc=!!g;this.m=x(this.type)?this.type:Od;this.d=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.c=Ga(this.d);this.g=[]}r=fg.prototype;r.oa=!1;r.jc=!1;r.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:a}};
function Df(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==F(b,c))throw new P('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==F(f,g))throw new P("Unknown field: "+g+" in "+T(e));e=new ag(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);u(e.keyPath)&&
e.keyPath===a.keyPath||b.push(e)}return new fg(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Ze(a,b,c,d,e,f,g){a=Ve(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.xa;a.q&&(b+=" WHERE "+a.q);a.group&&(b+=" GROUP BY "+a.group);a.ia&&(b+=" ORDER BY "+a.ia);return b}
function Ve(a,b,c,d,e,f,g){var h={select:"",xa:"",q:"",group:"",ia:""},l=a.d,n=a.c,m=null;d!==l&&x(d)&&(m=Ed(a,d));var p=!!m,q=Ga(d||l),t=p?m.type:a.type,A=p&&m.multiEntry;h.xa=af(a);6===c?h.select="COUNT("+n+")":3===c||1===c||2===c?(h.select=n,null!=d&&d!=l&&(h.select+=", "+q)):h.select="*";d=g?"DISTINCT ":"";l=[];A?(A=Ga("ydn.db.me:"+a.getName()+":"+m.getName()),h.select=6===c?"COUNT("+d+A+"."+q+")":3===c||1===c||2===c?"DISTINCT "+af(a)+"."+n+", "+A+"."+q:"DISTINCT "+af(a)+".*",h.xa=A+" INNER JOIN "+
af(a)+" USING ("+n+")",null!=e&&(Tc(A+"."+q,t,e,l,b),0<l.length&&(h.q=h.q?h.q+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(Tc(q,t,e,l,b),0<l.length&&(h.q=h.q?h.q+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!m.unique&&g&&(h.group=q);a=f?"DESC":"ASC";h.ia=q+" "+a;p&&(h.ia+=", "+n+" "+a);return h}
function Ye(a,b,c,d,e,f,g,h,l){var n,m,p,q;null!=e?(n=e.lower,m=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=m?(e=O(h,m),-1==e?(m=h,q=l):0==e&&(q=l||q)):(m=h,q=l):null!=n?(e=O(h,n),1==e?(n=h,p=l):0==e&&(p=l||p)):(n=h,p=l)):f?(m=h,q=l):(n=h,p=l);e=new Q(n,m,!!p,!!q);d=d?Ed(a,d):null;b=Ve(a,c,b,d?d.c:a.d,e,f,g);b="SELECT "+b.select+" FROM "+b.xa+(b.q?" WHERE "+b.q:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.ia;d&&(b+=", "+a.c+(f?"DESC":"ASC"));return b}
function Xe(a,b,c,d,e,f,g,h,l,n){var m=Ed(a,d),p=m.c;d=m.b;var q=a.c,t=l?" <":" >",t=g?t+" ":t+"= ";g=Uc(f,m.type);h=Uc(h,a.type);m="";e?(a=Ve(a,c,b,p,e,l,n),a.q+=" AND ",m=d+t+"?",c.push(g)):(e=l?Q.upperBound(f,!0):Q.lowerBound(f,!0),a=Ve(a,c,b,p,e,l,n),m=a.q,a.q="");a.q+="("+m+" OR ("+d+" = ? AND "+q+t+"?))";c.push(g);c.push(h);return"SELECT "+a.select+" FROM "+a.xa+" WHERE "+a.q+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.ia}r.wa=function(){return Df(this.toJSON())};
r.index=function(a){return this.a[a]||null};function Ed(a,b){return Oa(a.a,function(a){return a.name==b})}function Cf(a,b){return b===a.keyPath?!0:Ma(a.a,function(a){return a.name==b})}function af(a){return Ga(a.name)}
r.hint=function(a){if(!a)return this;var b=this.b,c=v(this.keyPath)?Sa(this.keyPath):this.keyPath,d=this.type,e=La(this.a,function(a){return a.wa()});u(a.type)||"TEXT"!=d||(d=void 0);v(a.keyPath)&&x(c)&&c==a.keyPath.join(",")&&(c=Sa(a.keyPath));for(var f=0,g=a.a.length;f<g;f++)if(a.a[f].e)for(var h=a.a[f].getName(),l=e.length-1;0<=l;l--)if(0<=h.indexOf(e[l].getName())){e[l]=a.a[f].wa();break}for(f=0;f<e.length;f++)(g=Ed(a,e[f].getName()))&&(e[f]=e[f].hint(g));return new fg(a.name,c,b,d,e)};
r.getName=k("name");function gf(a){return!!a.keyPath}function Jf(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.j){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(xc(b,a.keyPath[d]));return c}if(a.keyPath)return ab(b,a.e)}function cf(a,b,c){for(var d=0;d<a.e.length;d++){var e=a.e[d];if(d==a.e.length-1){b[e]=c;break}u(b[e])||(b[e]={});b=b[e]}}
function $e(a,b,c){var d=[],e=[];c=u(c)?c:Jf(a,b);u(c)&&(e.push(a.c),d.push(Uc(c,a.type)));for(var f=0;f<a.a.length;f++){var g=a.a[f];if(!g.multiEntry&&g.name!==a.keyPath&&"_default_"!=g.name){var h=cg(g,b);null!=h&&(d.push(Uc(h,g.type)),e.push(g.b))}}a.jc||(d.push(T(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Wb:e,dc:a,O:d,key:c}}
function Ff(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Dd(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(u(a.b)&&u(b.b)&&a.b!=b.b)return"autoIncrement, expect:  "+a.b+", but: "+b.b;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(u(a.type)&&u(b.type)&&(w(a.type)?!Va(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=
Ed(b,a.a[c].name),e;e=a.a[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Dd(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:u(e.type)&&u(d.type)&&(w(e.type)?!Va(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+
e.name;if(0<e.length)return'index "'+a.a[c].name+'" '+e}return""}function Gf(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.d){var f=d.d(e),g=typeof f;if("string"==g||"number"==g||"array"==g||"undefined"==g||f instanceof Date){for(g=0;g<d.a.length-1;g++)B(e[d.a[g]])||(e[d.a[g]]={});e[d.a[d.a.length-1]]=f}}}}function gg(a,b){a.g.push(b)}function Af(a,b,c){for(var d=0;d<a.g.length;d++)if(void 0!==d)a.g[d](b,c)};function hg(a,b,c){if(!a||ua(a))throw new P("store_name must be provided for primary full text index");if(!b||ua(b))throw new P("index_name must be provided for primary full text index");this.b=a;this.a=b;this.c=c||1}hg.prototype.h=k("b");function ig(a,b,c,d){this.name=a;this.b=b;this.c=c||"";if(-1==["","en","fr"].indexOf(this.c))throw new P('Unsupported lang "'+c+" for full text search index "+a);this.d=d||null;this.a=null}ig.prototype.getName=k("name");ig.prototype.count=function(){return this.b.length};ig.prototype.index=function(a){return this.b[a]};function jg(a,b,c){return Oa(a.b,function(a){return a.h()==b&&a.a==c})}
function kg(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==F(b,c))throw new P("Unknown field: "+c+" in "+T(a));if(!v(a.sources))throw new P("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==F(b,c))throw new P("Unknown field: "+c+" in "+Md(a));return new hg(a.storeName,a.keyPath,a.weight)});return new ig(a.name,
b,a.lang)};function lg(a,b){var c,d,e=b;if(B(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==F(c,f))throw new P("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!v(g))throw new P("stores must be array");for(f=0;f<g.length;f++){var h=Df(g[f]);if(-1!=Pa(e,function(a){return a.name==h.name}))throw new P('duplicate store name "'+h.name+'".');e.push(h)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(u(c)){if(!y(c)||0>c)throw new P("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(u(b)&&(!v(b)||0<b.length&&!(b[0]instanceof fg)))throw new P("stores");this.version=c;this.za=!u(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=kg(d.fullTextCatalogs[f]),c[f]=e,W(this,e.getName())||(g=[new ag("k",Od),new ag("v",Od)],e=new fg(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.a=c}r=lg.prototype;
r.toJSON=function(){var a=La(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;u(this.version)&&(b.version=this.version);return b};r.za=!1;r.U=ea(!1);function Bf(a){return La(a.stores,function(a){return a.name})}r.ra=function(a){return this.stores[a]||null};r.count=function(){return this.stores.length};function W(a,b){return Oa(a.stores,function(a){return a.name==b})}function zf(a,b){return Ma(a.stores,function(a){return a.name==b})}
function mg(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=W(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=Ff(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""}function ng(a,b){return Oa(a.a,function(a){return a.getName()==b})};function og(a,b){lg.call(this,a,b)}D(og,lg);og.prototype.U=ea(!0);function pg(a,b){a.stores.push(b)};function eg(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Oa(b,function(b){return eg(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&eg(a[0],b);if(w(b))return 1==b.length&&eg(b[0],a);if(B(a)&&B(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=eg(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=eg(a[e],b[e]),!f))return!1;return!0}return a===b}return!1};function qg(){};function rg(){}D(rg,qg);rg.prototype.clear=function(){var a=ib(this.Ga(!0)),b=this;Ka(a,function(a){b.I.removeAttribute(sg(a));tg(b)})};function ug(a,b){if(wb&&!(wb&&9<=Mb)){vg||(vg=new jb);this.I=vg.get(a);this.I||(b?this.I=document.getElementById(b):(this.I=document.createElement("userdata"),this.I.addBehavior("#default#userData"),document.body.appendChild(this.I)),lb(vg,a,this.I));this.Pb=a;try{this.I.load(this.Pb)}catch(c){this.I=null}}}D(ug,rg);var wg={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},vg=null;r=ug.prototype;r.I=null;r.Pb=null;
function sg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return wg[a]})}r.get=function(a){a=this.I.getAttribute(sg(a));if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};
r.Ga=function(a){var b=0,c=this.I.XMLDocument.documentElement.attributes,d=new fb;d.a=function(){if(b>=c.length)throw eb;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};r.clear=function(){for(var a=this.I.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);tg(this)};
function tg(a){try{a.I.save(a.Pb)}catch(b){throw"Storage mechanism: Quota exceeded";}};function xg(a,b,c){a=["ydn.db",a];u(b)&&(a.push(b),u(c)&&(a.push(c),u(void 0)&&a.push(zc(void 0))));return a.join("^|")};function yg(a){this.Q=a||zg}function zg(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}r=yg.prototype;r.K=null;r.Q=null;r.$=null;r.Z=null;
function Ag(a,b){if(null==a.K)a.K=new Bg(b),a.$=a.K,a.Z=a.K;else{var c=null;Cg(a,function(a){var e=null;0<this.Q(a.value,b)?(e=a.left,null==a.left&&(c=new Bg(b,a),a.left=c,a==this.$&&(this.$=c))):0>this.Q(a.value,b)&&(e=a.right,null==a.right&&(c=new Bg(b,a),a.right=c,a==this.Z&&(this.Z=c)));return e});c&&(Cg(a,function(a){a.count++;return a.parent},c.parent),Dg(a,c.parent))}}
function Eg(a,b){Cg(a,function(a){var d=null;0<this.Q(a.value,b)?d=a.left:0>this.Q(a.value,b)?d=a.right:Fg(this,a);return d})}r.clear=function(){this.Z=this.$=this.K=null};r.contains=function(a){var b=!1;Cg(this,function(c){var d=null;0<this.Q(c.value,a)?d=c.left:0>this.Q(c.value,a)?d=c.right:b=!0;return d});return b};r.gb=function(){var a=[];Gg(this,function(b){a.push(b)});return a};
function Gg(a,b){if(a.K){var c,d=c=Hg(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Cg(a,b,c){for(c=c?c:a.K;c&&null!=c;)c=b.call(a,c)}
function Dg(a,b){Cg(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Ig(this,a.left),Jg(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Jg(this,a.right),Ig(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Ig(a,b){Kg(b)?(b.parent.left=b.right,b.right.parent=b.parent):Lg(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.K=b.right,a.K.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Jg(a,b){Kg(b)?(b.parent.left=b.left,b.left.parent=b.parent):Lg(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.K=b.left,a.K.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Fg(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Mg(a,b.left);Cg(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Z&&(a.Z=d)}else{d=Hg(a,b.right);Cg(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.$&&(a.$=d)}d.count=b.count;Kg(b)?b.parent.left=d:Lg(b)?b.parent.right=d:a.K=d;Dg(a,c?c:d)}else Cg(a,function(a){a.count--;return a.parent},b.parent),Kg(b)?(b.parent.left=null,b==a.$&&(a.$=b.parent),Dg(a,b.parent)):Lg(b)?(b.parent.right=null,b==a.Z&&(a.Z=b.parent),Dg(a,b.parent)):a.clear()}function Hg(a,b){if(!b)return a.$;var c=b;Cg(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Mg(a,b){if(!b)return a.Z;var c=b;Cg(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Bg(a,b){this.value=a;this.parent=b?b:null;this.count=1}Bg.prototype.left=null;Bg.prototype.right=null;Bg.prototype.height=1;function Lg(a){return!!a.parent&&a.parent.right==a}function Kg(a){return!!a.parent&&a.parent.left==a};function Ng(a){this.Q=a||zg}D(Ng,yg);function ze(a,b,c){if(a.K){var d;if(c instanceof Bg)d=c;else if(c){if(Cg(a,function(a){var b=null;0<this.Q(a.value,c)?(b=a.left,d=a):0>this.Q(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Hg(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function ye(a,b,c){if(a.K){var d;if(c instanceof Bg)d=c;else if(c){if(Cg(a,oa(function(a){var b=null;0<this.Q(a.value,c)?b=a.left:(0>this.Q(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Mg(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function X(a,b){this.key=a;this.a=b}X.prototype.p=k("a");X.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function Og(a,b){var c=O(a.key,b.key);return 0===c?null!=a.a?null!=b.a?O(a.a,b.a):1:null!=b.a?-1:0:c};function Pg(a,b,c){this.g=a;this.b=b;this.c=c;this.a={};a=this.c.keyPath;this.d=v(a)?a.join(","):a||"_ROWID_";this.a[this.d]=null;this.e=xg(this.g,this.c.getName(),this.d)+"^|"}
function Ee(a,b){var c=b||a.d;if(!a.a[c]){a.a[c]=new Ng(Og);for(var d=a.b.length,e=0;e<d;e++){var f=a.b.key(e);if(null!==f&&0==f.lastIndexOf(a.e,0)){var g=Cc(f.substr(a.e.length));if(c==a.d)Ag(a.a[c],new X(g));else{var h=a.b.getItem(f);if(null!==h)if(f=Ed(a.c,c),h=Ld(h),h=cg(f,h),f.multiEntry){if(v(h))for(f=0;f<h.length;f++)Ag(a.a[c],new X(h[f],g))}else Ag(a.a[c],new X(h,g))}}}}return a.a[c]}
function Qg(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.d)Eg(e,new X(b));else{var f=Ed(a.c,d),f=xc(c,f.keyPath);Eg(e,new X(b,f))}}}function Rg(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function Je(a,b,c,d){if(null==b&&(a.c.keyPath&&(b=Jf(a.c,c)),a.c.b&&null==b)){b=a.e+zc(void 0);var e=Ld(a.b.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.b.setItem(b,T(e));b=e.key_count}d&&(d=null!==a.b.getItem(a.e+zc(b)));if(d)return null;a.b.setItem(a.e+zc(b),T(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.d)Ag(e,new X(d));else{var g=Ed(a.c,f),g=xc(c,g.keyPath);null!=g&&Ag(e,new X(d,g))}return b}
function Le(a,b){var c=a.e+zc(b),d=a.b.getItem(c);if(null===d)return 0;a.b.removeItem(c);c=Ld(d);Qg(a,b,c);return 1}Pg.prototype.clear=function(){Rg(this);Me(this)};function Be(a,b){var c=a.b.getItem(a.e+zc(b)),d=void 0;if(null!==c)for(var d=Ld(c),c=0,e=a.c.a.length;c<e;c++){var f=a.c.index(c);if(f.type==df){var g=cg(f,d);g&&ef(f,d,new Date(g))}}return d}Pg.prototype.getName=function(){return this.c.getName()};
function Ne(a,b,c){b=b||a.d;a=Ee(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new X(c.lower)),null!=c.upper&&(e=new X(c.upper)),g=c.lowerOpen,h=c.upperOpen);ze(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=O(a.key,d.key))){if(null!=e&&(a=O(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function Me(a,b){var c=Ee(a,a.d),d=null,e=null,f=0,g=[],h=[],l=!1,n=!1;null!=b&&(null!=b.lower&&(d=new X(b.lower)),null!=b.upper&&(e=new X(b.upper)),l=b.lowerOpen,n=b.upperOpen);ze(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=Og(b,d))){if(null!=e){var c=Og(b,e);if(1===c||0===c&&n)return!0}var c=a.e+zc(b.key),q=a.b.getItem(c);null!==q&&(a.b.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(Ld(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Qg(a,g[c],h[c]);else Rg(a);return f}
function Oe(a,b,c,d,e,f,g,h,l){function n(c){if(c&&(C++,!(C<g))){var d=c.value;if(e){if(G&&null!=A&&0==Og(d,A))return;if(null!=t&&(c=O(d.key,t.key),-1==c||0==c&&E))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(E&&null!=t&&0==Og(d,t))return;if(null!=A&&(c=O(d.key,A.key),1==c||0==c&&G))return l&&(l[0]=void 0,l[1]=void 0),!0}c=d.key;if(!h||!q||null==p||0!=O(p,c)){d=q?d.p():c;if(2==b)m.push(d);else if(1==b)m.push(c);else if(3==b)m.push([c,d]);else if(4==b){var n=Be(a,d);m.push(n)}else m.push([c,d,Be(a,
d)]);l&&(l[0]=c,l[1]=d)}p=c;if(u(f)&&m.length>=f)return!0}}var m=[],p;c=c||a.d;var q=c!=a.d;c=Ee(a,c);var t=null,A=null;u(g)||(g=0);var C=-1,E=!1,G=!1;null!=d&&(null!=d.lower&&(t=q&&e?new X(d.lower,"\uffff"):new X(d.lower)),null!=d.upper&&(A=q&&!e?new X(d.upper,"\uffff"):new X(d.upper)),E=!!d.lowerOpen,G=!!d.upperOpen);if(l&&u(l[0])){e?G=!0:E=!0;d=l[0];var K=u(l[1])?l[1]:"\uffff";e?A=q?new X(d,K):new X(d):t=q?new X(d,K):new X(d)}e?ye(c,n,A):ze(c,n,t);return m}
Pg.prototype.Ja=function(a,b,c,d,e){return Oe(this,2,a,b,c,d,e)};Pg.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.c.getName()};function Sg(a,b){this.l=a;this.a=b}function Ce(a,b,c){ue(function(){b.call(c,this.l)},0,a);return function(){a.a("complete",null);a.a=null;a.l=null}};function Tg(){this.clear()}r=Tg.prototype;r.$a=function(){return this};r.setItem=function(a,b){u(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};r.getItem=function(a){return u(this.a[a])?this.a[a]:null};r.removeItem=function(a){delete this.a[a];Ra(this.keys,a.toString());this.length=this.keys.length};r.length=0;r.key=function(a){a=this.keys[a];return u(a)?this.a[a]:null};r.clear=function(){this.a={};this.keys=[];this.length=0};function Ug(a){this.d=a||new Tg;this.b=NaN}r=Ug.prototype;r.fc=L("ydn.db.con.SimpleStorage");r.ub=k("b");
r.Ca=function(a,b){function c(a,b){ue(function(){b?(I(d.fc,d+" opening fail"),e.B(b)):(I(d.fc,d+" version "+d.ub()+" open"),e.C(a))})}var d=this,e=new M;this.l=this.d.$a(a);this.na=a;this.a=b;this.c={};var f=xg(this.na);this.b=NaN;var g=Ld(this.l.getItem(f));u(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new lg(g),mg(this.a,g))if(!this.a.za&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new cd("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;
this.b=u(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var l=this.a.ra(h);if(this.a instanceof og)for(h=0;h<g.count();h++)l=g.ra(h),pg(this.a,l);h=this.a.toJSON();h.version=this.b||NaN;this.l.setItem(f,T(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)l=this.a.ra(h);this.b=g.version||NaN;c(this.b)}else g=b.toJSON(),this.b=1,g.version=this.b,this.l.setItem(f,T(g)),c(NaN);return e};r.Va=function(){return!!this.na};r.vb=da();r.Wa=da();r.sa=ea("memory");r.tb=da();
r.cb=function(a,b,c,d){a(new Sg(this,function(a,b){d(a,b)}))};r.T=function(a){ue(function(){var b=xg(this.na),b=this.l.getItem(b),b=new lg(b);a(b)},0,this)};function De(a,b){var c=W(a.a,b);if(c)a.c[b]||(a.c[b]=new Pg(a.na,a.l,c));else throw new Kc('store name "'+b+'" not found.');return a.c[b]}r.toString=function(){return"SimpleStorage:"+this.sa()+":"+(this.na+":"+this.b)};function Vg(){Ug.call(this,this)}D(Vg,Ug);Vg.prototype.$a=function(a){return new Wg(a)};Vg.prototype.sa=ea("userdata");function Wg(a){this.l=new ug(a);this.length=this.keys().length}r=Wg.prototype;r.length=0;r.clear=function(){this.l.clear();this.a=[]};r.keys=function(){this.a||(this.a=[],hb(this.l,function(a){this.a.push(a)},this));return this.a};r.key=function(a){return this.keys()[a]};r.setItem=function(a,b){this.a&&this.a.push(a);var c=this.l;c.I.setAttribute(sg(a),b);tg(c)};
r.getItem=function(a){a=this.l.get(a);return u(a)?a:null};r.removeItem=function(a){this.a=null;var b=this.l;b.I.removeAttribute(sg(a));tg(b)};function Xg(){Ug.call(this,this)}D(Xg,Ug);Xg.prototype.$a=function(){return window.localStorage};Xg.prototype.sa=ea("localstorage");function Yg(a){var b=new Xg,c=new og;b.Ca(a,c);b.T(function(a){for(var c=0;c<a.stores.length;c++)De(b,a.stores[c].name).clear()})}function Zg(){Ug.call(this,this)}D(Zg,Ug);Zg.prototype.$a=function(){return window.sessionStorage};Zg.prototype.sa=ea("sessionstorage");
function $g(a){var b=new Zg,c=new og;b.Ca(a,c);b.T(function(a){for(var c=0;c<a.stores.length;c++)De(b,a.stores[c].name).clear()})};function ah(a,b){u(a)&&5242880<a&&H(this.n,"storage size request ignored, use Quota Management API instead");this.u=null;this.Ra=b||NaN}r=ah.prototype;
r.Ca=function(a,b){function c(a,c,d){I(e.n,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)bh(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)zf(b,c[d])||(a.deleteObjectStore(c[d]),I(e.n,"store: "+c[d]+" deleted."))}function d(a,b){f.Ia?H(e.n,"database already set."):u(b)?(H(e.n,b?b.message:"Error received."),e.u=null,f.B(b)):(e.u=a,e.u.onabort=function(a){J(e.n,e+": abort");e.Wa(a.target.error)},e.u.onerror=function(a){J(e.n,e+
": error");e.Wa(a.target.error)},e.u.onversionchange=function(a){J(e.n,e+" closing connection for onversionchange to: "+a.version);e.u&&(e.u.onabort=null,e.u.onblocked=null,e.u.onerror=null,e.u.onversionchange=null,e.u.close(),e.u=null,e.vb(Error(a.type)))},f.C(parseFloat(g)))}var e=this,f=new M,g=void 0,h=b.version;I(e.n,"Opening database: "+a+" ver: "+(b.za?"auto":h));var l;l=u(h)?wc.open(a,h):wc.open(a);l.onsuccess=function(f){var h=f.target.result;u(g)||(g=h.version);I(e.n,"Database: "+h.name+
", ver: "+h.version+" opened.");if(b.za)e.T(function(f){if(b instanceof og)for(var g=0;g<f.stores.length;g++)zf(b,f.stores[g].getName())||pg(b,f.stores[g].wa());f=mg(b,f);if(0<f.length){I(e.n,"Schema change require for difference in "+f);var l=y(h.version)?h.version+1:1;if("IDBOpenDBRequest"in s){h.close();var n=wc.open(a,l);n.onupgradeneeded=function(a){a=a.target.result;I(e.n,"re-open for version "+a.version);c(a,n.transaction,!1)};n.onsuccess=function(a){d(a.target.result)};n.onerror=function(){I(e.n,
e+": fail.");d(null)}}else{var p=h.setVersion(l+"");p.a=function(a){H(e.n,"migrating from "+h.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=G;c(h,p.transaction,!0)};var G=function(){var b=wc.open(a);b.onsuccess=function(a){a=a.target.result;I(e.n,e+": OK.");d(a)};b.onerror=function(){I(e.n,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=G)}}else d(h)},void 0,h);else if(b.version>h.version){var l=h.setVersion(b.version);l.a=function(a){H(e.n,
"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(h,l.transaction,!0)}}else b.version==h.version?I(e.n,"database version "+h.version+" ready to go"):H(e.n,"connected database version "+h.version+" is higher than requested version."),e.T(function(a){a=mg(b,a);0<a.length?(I(e.n,a),d(null,new Mc("different schema: "+a))):d(h)},void 0,h)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;I(e.n,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};
l.onerror=function(c){fc(e.n,'open request to database "'+a+'" '+(u(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){fc(e.n,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};y(this.Ra)&&!isNaN(this.Ra)&&ue(function(){"done"!=l.readyState&&(fc(e.n,e+": database state is still "+l.readyState),d(null,new jd("connection timeout after "+e.Ra)))},this.Ra);return f};r.Ra=18E4;r.vb=da();r.Wa=da();r.sa=ea("indexeddb");
r.Va=function(){return!!this.u};r.n=L("ydn.db.con.IndexedDb");r.u=null;r.ub=function(){return this.u?parseFloat(this.u.version):void 0};
r.T=function(a,b,c){c=c||this.u;if(u(b)){if(null===b){if(0==c.objectStoreNames.length){a(new lg(c.version));return}throw new vd;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new lg(c.version));return}b=c.transaction(b,uc)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),l=[],n=0,m=h.indexNames.length;n<m;n++){var p=h.index(h.indexNames[n]);l[n]=new ag(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new fg(h.name,h.keyPath,h.autoIncrement,void 0,l)}b=new lg(c.version,f);a(b)};
function bh(a,b,c,d){function e(){var a={autoIncrement:!!d.b};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new fd("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.b);if("ConstraintError"==c.name)throw new Mc("creating store for "+d.getName());throw c;}}J(a.n,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=c.objectStore(d.getName()),
Dd(d.keyPath||"",c.keyPath||""))b.deleteObjectStore(d.getName()),H(a.n,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(ha(c.autoIncrement)&&ha(d.b)&&c.autoIncrement!=d.b)b.deleteObjectStore(d.getName()),H(a.n,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,l=0,n=0;n<d.a.length;n++){var m=d.a[n],p=!1;if(f.contains(m.name)){var q=c.index(m.name),t=null!=q.unique&&null!=m.unique&&q.unique!=m.unique,A=null!=q.multiEntry&&
null!=m.multiEntry&&q.multiEntry!=m.multiEntry,q=null!=q.keyPath&&null!=m.keyPath&&!!Dd(q.keyPath,m.keyPath);if(t||A||q)c.deleteIndex(m.name),p=!0,g--,l++}else p=!0;p&&(m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,p)):c.createIndex(m.name,m.keyPath),g++)}for(n=0;n<f.length;n++)Cf(d,f[n])||(c.deleteIndex(f[n]),h++);J(a.n,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted, "+l+" modified.")}else{c=e();for(n=0;n<d.a.length;n++)m=
d.a[n],J(a.n,"Creating index: "+m.name+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,p)):c.createIndex(m.name,m.keyPath);J(a.n,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
r.cb=function(a,b,c,d){var e=this.u;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};r.tb=function(){J(this.n,this+" closing connection");this.u.close()};r.toString=function(){return"IndexedDB:"+(this.u?this.u.name+":"+this.u.version:"")};function ch(a){this.a=u(a)?a:4194304}r=ch.prototype;
r.Ca=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.za?isNaN(f)?1:f+1:c.version;gc(e.r,a+": changing version from "+b.version+" to "+g);var h=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.T(function(b){h=!0;for(var d=0;d<c.count();d++){var f=W(b,c.ra(d).getName()),f=f?f.hint(c.ra(d)):null;dh(e,a,c.ra(d),function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.ra(d),zf(c,f.getName())||(c instanceof og?pg(c,f):(f="DROP TABLE "+af(f),I(e.r,f),a.executeSql(f,[],da(),function(a,
b){throw b;})))},a,b)},function(c){fc(e.r,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a);throw c;},function(){if(h){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");J(e.r,a+":"+b.version+" ready"+f);d(b)}else H(e.r,a+": changing version voided.")})}function d(a,b){u(b)?(e.L=null,g.B(b)):(e.L=a,g.C(parseFloat(f)))}var e=this,f=NaN,g=new M,h=null;try{h=s.openDatabase(a,"",a,this.a)}catch(l){if("SECURITY_ERR"==l.name)H(this.r,"SECURITY_ERR for opening "+
a),h=null,this.Hb=new id(l);else throw l;}if(h){var f=h.version,n="database "+a+(0==h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?(gc(e.r,"Existing "+n+" opened as requested."),d(h)):this.T(function(a){(a=mg(b,a,!0))?(0==h.version.length?gc(e.r,"New "+n+" created."):b.za?gc(e.r,"Existing "+n+" opened and schema change for "+a):gc(e.r,"Existing "+n+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(gc(e.r,"Existing "+n+" with same schema opened."),
d(h))},null,h)}else d(null,this.Hb);return g};r.sa=ea("websql");r.Hb=null;r.L=null;r.r=L("ydn.db.con.WebSql");r.vb=da();r.Wa=da();
function eh(a){var b=a.m,c="CREATE TABLE IF NOT EXISTS "+af(a)+" (",d=a.c,c=c+(d+" "+b+" PRIMARY KEY ");a.b&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.a.length;g<h;g++){var l=a.index(g),n="";if(l.multiEntry){var n="ydn.db.me:"+a.getName()+":"+l.getName(),m=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Ga(n)+" ("+d+" "+b+", "+l.b+" "+l.g+m+")";e.push(l)}else l.unique&&(n=" UNIQUE "),m=l.keyPath,"BLOB"!=l.type&&x(m)&&(m="CREATE "+n+" INDEX IF NOT EXISTS "+Ga(a.getName()+
"-"+l.getName())+" ON "+af(a)+" ("+Ga(m)+")",e.push(m)),m=l.b,-1==f.indexOf(m)&&(c+=", "+m+" "+l.g+n,f.push(m))}e.unshift(c+")");return e}r.ub=function(){return this.L?parseFloat(this.L.version):void 0};
r.T=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;J(f.r,"Parsing table schema from SQL: "+q);for(var t=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),A=void 0,C,q=[],E=!1,G=!1,K=0;K<t.length;K++){var aa=t[K].match(/\w+|"[^"]+"/g),ca=La(aa,function(a){return a.toUpperCase()}),ba=Da(aa[0],
'"'),aa=bg(ca[1]);if(-1!=ca.indexOf("PRIMARY")&&-1!=ca.indexOf("KEY")){C=aa;if(x(ba)&&!ua(ba)&&"_ROWID_"!=ba){var db=ba.split(","),A=ba;1<db.length&&(A=db,C=void 0)}-1!=ca.indexOf("AUTOINCREMENT")&&(E=!0)}else if("_ROWID_"!=ba)if("_default_"==ba)G=!0;else{var sd="UNIQUE"==ca[2];0==ba.lastIndexOf(e.tbl_name+"-",0)&&(ba=ba.substr(e.tbl_name.length+1));ca=new ag(ba,aa,sd);q.push(ca)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var kb=e.name.split(":");if(3<=kb.length){var zb=kb[1],A=new ag(kb[2],aa,sd,
!0),t=Pa(q,function(a){return a.getName()==kb[2]});0<=t?q[t]=A:q.push(A);t=Pa(h,function(a){return a.getName()===zb});0<=t?(K=h[t],h[t]=new fg(K.getName(),K.keyPath,E,C,q,void 0,!G)):h.push(new fg(zb,void 0,!1,void 0,[A]));J(f.r,'multi entry index "'+A.getName()+'" found in '+zb+(-1==t?"*":""))}else H(f.r,'Invalid multiEntry store name "'+e.name+'"')}else K=Pa(h,function(a){return a.getName()===e.name}),0<=K?(t=h[K].index(0),q.push(t),h[K]=new fg(e.name,A,E,C,q,void 0,!G)):(q=new fg(e.name,A,E,C,
q,void 0,!G),h.push(q))}}d=new lg(g,h);a(d)}}var f=this,g=(c=c||this.L)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.T(a,b,c)},function(a){fc(f.r,"opening tx: "+a.message);throw a;},e)};
function dh(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);throw new hd(e,"SQLError creating table: "+c.name+" "+e.message+' for executing "'+a);})}var g=0,h=eh(c),l="Create";if(e){e=Ff(c,e);if(0==e.length){J(a.r,"same table "+c.name+" exists.");d(!0);d=null;return}l="Modify";H(a.r,"table: "+c.name+" has changed by "+e+" additionallly TABLE ALTERATION is not implemented, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Ga(c.name))}J(a.r,l+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}r.Va=function(){return!!this.L};r.tb=da();r.cb=function(a,b,c,d){function e(a){J(h.r,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.L&&(a(null),d("abort",this.Hb));c==uc?this.L.readTransaction(g,e,f):c==vc?this.L.changeVersion(this.L.version,this.L.version+1+"",g,e,f):this.L.transaction(g,e,f)};
function fh(a){function b(){c.r.log(Yb,"all tables in "+a+" deleted.",void 0)}var c=new ch,d=new og;I(c.r,"deleting websql database: "+a);d=c.Ca(a,d);d.fa(function(){c.cb(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,g){if(g&&g.rows){for(var h=g.rows.length,l=0,n=0;n<h;n++){var m=g.rows.item(n);"__WebKitDatabaseInfoTable__"!=m.name&&"sqlite_sequence"!=m.name&&(l++,J(c.r,"deleting table: "+m.name),b.executeSql("DROP TABLE "+m.name))}I(c.r,l+' tables deleted from "'+
a+'"')}},function(a,b){throw b;})},[],N,b)});d.Tb(function(){H(c.r,"Connecting "+a+" failed.")})}r.toString=function(){return"WebSql:"+(this.L?":"+this.L.version:"")};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function S(a,b,c){se.call(this);c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==F(d,e))throw new P('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new P("mechanisms attribute must be an array but "+ga(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=F(gh,c.mechanisms[e])))throw new P('Invalid mechanism "'+c.mechanisms[e]+'"');}this.Pa=c.mechanisms||gh;this.ha=c.size;
this.mb=u(c.connectionTimeout)?c.connectionTimeout:3E4;this.ec=u(c.ec)?c.ec:!1;this.a=null;this.e=[];this.jb=!1;if(b instanceof lg)c=b;else if(B(b))for(c=c.autoSchema||!u(b.stores)?new og(b):new lg(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=W(c,b.stores[e].name);b.stores[e].Sync&&H(this.d,"Synchronization option for "+f.getName()+" ignored.")}else c=new og;this.c=c;u(a)&&this.t(a)}D(S,se);S.prototype.d=L("ydn.db.con.Storage");
S.prototype.Nb=function(a){if(u(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.T(b);else{var c=this;this.ta(function(a){c.a.T(b,a)},null,uc)}}return this.c?this.c.toJSON():null};function Ef(a,b){var c=b instanceof fg?b:Df(b),d=b.name,e=W(a.c,d);if(0==Ff(c,e).length)(new M).C(!1);else if(e=e?"update":"add",a.c instanceof og)pg(a.c,c),a.a?(a.a.tb(),a.a=null,hh(a)):(new M).C(!1);else throw new Mc("Cannot "+e+" store: "+d+". Not auto schema generation mode.");}
S.prototype.t=function(a){if(this.a)throw new Jc("Already connected with "+this.g);this.g=a;hh(this)};ra("ydn.db.con.Storage.prototype.setName",S.prototype.t);S.prototype.getName=k("g");var gh="indexeddb websql localstorage sessionstorage userdata memory".split(" ");function ih(a,b){return"indexeddb"==b?new ah(a.ha,a.mb):"websql"==b?new ch(a.ha):"localstorage"==b?new Xg:"sessionstorage"==b?new Zg:"memory"==b?new Ug:"userdata"==b?new Vg:null}
function hh(a){function b(b,e){b?(J(a.d,a+": ready."),a.Zb=NaN,d.Wa=function(b){a.dispatchEvent(new Zf(a,b))},d.vb=function(b){a.dispatchEvent(new $f(a,b));a.a=null},ue(function(){jh(a,e);kh(a)}),c.C(e)):(H(a.d,a+": database connection fail "+e.name),ue(function(){a.dispatchEvent(new $f(a,e));if(a.e){a.d.log(Yb,"Purging "+a.e.length+" transactions request.",void 0);for(var b;b=a.e.shift();)b.R&&b.R("error",e)}}),c.B(e))}for(var c=new M,d=null,e=a.Pa,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==
g&&wc){d=ih(a,g);break}else if("websql"==g&&ia(s.openDatabase)){d=ih(a,g);break}else if("localstorage"==g&&window.localStorage){d=ih(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=ih(a,g);break}else if("memory"==g){d=ih(a,g);break}else if("userdata"==g){d=ih(a,g);break}}null===d?(e=new Lc("No storage mechanism found."),b(!1,new Yf("ready",a,NaN,NaN,e))):(a.init(),d.Ca(a.g,a.c).X(function(a){this.a=d;b(!0,new Yf("ready",this,parseFloat(d.ub()),parseFloat(a),null))},function(a){H(this.d,
this+": opening fail");b(!1,a)},a))}S.prototype.m=function(){if(this.a)return this.a.sa()};ra("ydn.db.con.Storage.prototype.getType",S.prototype.m);function jh(a,b){ue(function(){this.dispatchEvent(b)},1,a)}S.prototype.init=da();S.prototype.A=function(){this.a&&(this.a.tb(),this.a=null,J(this.d,this+" closed"))};ra("ydn.db.con.Storage.prototype.close",S.prototype.A);r=S.prototype;r.Zb=NaN;
function kh(a){var b=a.e.shift();b&&(J(a.d,"pop tx queue["+(a.e.length+1)+"]"),a.ta(b.eb,b.xc,b.mode,b.R));a.Zb=qa()}function lh(a,b,c,d,e){J(a.d,"push tx queue["+a.e.length+"]");a.e.push({eb:b,xc:c,mode:d,R:e});100<a.e.length&&0==a.e.length%100&&H(a.d,"Transaction queue stack size is "+a.e.length+". It is too large, possibility due to incorrect usage.")}r.jb=!1;
r.ta=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new P("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new P("store name at "+f+" must be string but found "+typeof b[f]);}else throw new P("store names must be an array");else e=null;if(this.a&&this.a.Va()&&!this.jb){var g=this,h=u(c)?c:uc;h==vc&&(this.jb=!0);this.a.cb(function(b){a(b);a=null},e,h,function(a,b){ia(d)&&(d(a,b),d=void 0);h==vc&&(g.jb=!1);kh(g)})}else lh(this,
a,e,c,d)};r.Ub=function(a){H(this.d,"Full text indexer option for "+a.getName()+" ignored.")};r.Gb=function(a,b,c,d){if("ready"==a)je(this,a,b,c,d);else{var e="created error fail ready deleted updated".split(" "),f=function(a){if(!(0<=F(e,a)))throw new P('Invalid event type "'+a+'"');};if(w(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);S.F.Gb.call(this,a,b,c,d)}};r.toString=function(){return"Storage:"+this.a};function mh(a,b,c,d){this.d=a;this.e=b;this.a=Sa(c);this.b=d;this.c=[]}mh.prototype.d=null;function nh(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Kc("tx committed on ParallelTxExecutor");}mh.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+T(this.a)};function oh(a,b,c,d,e,f){this.l=a;this.e=b;this.a=this.Fa=0;this.nb=this.ja=null;this.c=d;this.d=e;this.b=c||"single";this.zb=f||0}r=oh.prototype;r.Fa=0;r.zb=0;r.ja=null;r.nb=null;r.ma=L("ydn.db.tr.Parallel");r.Ya=k("Fa");r.type=function(){return this.l.m()};
r.kc=function(a,b){var c;if("multi"==this.b)a:if(c=this.ja,!c.a||!c.b||b!=c.b&&(c.b!=N||b!=uc)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.b)a:if(c=this.ja,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.b?!0:!1;return c};
r.pa=function(a,b,c,d){function e(c){l.Fa++;n=new mh(c,l.Fa,b,h);g=l.M();gc(l.ma,g+" BEGIN "+T(b)+" "+h);l.ja=n;nh(l.ja,a,d)}function f(a,b){gc(l.ma,g+" "+a);if(n){for(var c=n,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}l.a=0}var g;this.c&&(b=this.c);this.d&&(c=this.d);var h=u(c)?c:uc,l=this,n;if(this.ja&&this.ja.d&&this.kc(b,h))nh(this.ja,a,d);else{if(this.zb&&this.Fa>=this.zb)throw new Jc("Exceed maximum number of transactions of "+this.zb);this.l.ta(e,b,h,f)}};
r.request=function(a,b,c,d){var e=new lf(a),f=this;this.pa(function(a){f.a++;mf(e,a,f.M()+"R"+f.a)},b,c||uc,d);return e};r.ea=function(a,b,c,d,e){var f=this,g;this.pa(function(c){f.a++;g=f.M()+"R"+f.a;I(f.ma,g+" BEGIN");b(c,g,function(b,d){f.nb=c;g=f.M()+"R"+f.a;d?(I(f.ma,g+" ERROR"),a.B(b)):(I(f.ma,g+" SUCCESS"),a.C(b));f.nb=null});b=null;I(f.ma,g+" END")},c,d,e)};r.M=function(){return"B"+this.e+"T"+this.Fa};r.toString=function(){return"Parallel:"+this.b+":"+this.M()+(this.nb?"*":"")};function ph(a,b){oh.call(this,a,b,"single")}D(ph,oh);r=ph.prototype;r.ma=L("ydn.db.tr.AtomicParallel");r.kc=ea(!1);r.request=function(a,b,c){var d,e,f,g=this,h=ph.F.request.call(this,a,b,c,function(a,b){h.a=null;I(g.ma,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new jd;U(h,c,!0)}});nf(h,function(a,b,c){f=b;e=a;d=c});return h};
r.ea=function(a,b,c,d,e){var f,g,h=new M;h.X(function(a){g=!1;f=a},function(a){g=!0;f=a});ph.F.ea.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.B(c);else if(!0===g)a.B(f);else if(!1===g)a.C(f);else{var d=new jd;a.B(d)}e&&(e(b,c),e=void 0)})};r.toString=function(){return"Atomic"+ph.F.toString.call(this)};function qh(a,b,c){S.call(this,a,b,c);this.Ba=0;a=!0;b="single";c&&(u(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=rh(this,b,a);this.w=rh(this,"atomic",!1);this.b=this.Oa(c,this.w)}D(qh,S);r=qh.prototype;r.Ba=0;r.lc=function(a,b,c,d,e){var f;"readonly"==d?f=uc:"readwrite"==d&&(f=N);a=rh(this,a,b,c,f,e);return this.Oa(a,this.w)};r.Oa=function(a,b){return new xf(this,this.c,a,b)};
function rh(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new sf(a,a.Ba++,b,d,0,f);if("atomic"==b)return new wf(a,a.Ba++);throw new P('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new oh(a,a.Ba++,b,d,e,f);if("atomic"==b)return new ph(a,a.Ba++);throw new P('Invalid requestType "'+b+'"');}
r.wc=function(a,b,c){if(3<arguments.length)throw new P("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.Ba++;var d=b||Bf(this.c),e=uc;if(c)if("readwrite"==c)e=N;else if("readonly"!=c)throw new P('Invalid transaction mode "'+c+'"');var f=rh(this,"all",!1,d,e,1),g=this.Oa(f,this.w),h=new lf("run"),l=this;f.pa(function(b){J(l.d,"executing run in transaction on "+f);mf(h,b,f.M()+"R0");a(g)},d,e,function(a){h.a=null;U(h,f.Ya(),"complete"!==a)});
return h};r.Qc=function(){return this.b?this.b.e():NaN};qh.prototype.branch=qh.prototype.lc;qh.prototype.run=qh.prototype.wc;qh.prototype.getTxNo=qh.prototype.Qc;xf.prototype.getTxNo=xf.prototype.e;function $(a,b,c){qh.call(this,a,b,c);a=this.c;for(b=0;b<a.a.length;b++){c=a.a[b];var d=W(a,c.getName());if(d){if(!Cf(d,"k"))throw new P('full text index store "'+d.getName()+'" must have "keyword" index');if(!Cf(d,"v"))throw new P('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new P('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new P('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=W(a,e.h());if(f)this.Ub(f,c);else throw new P('full text source store "'+e.h()+'" does not exist for full text index "'+c.getName()+'"');}}}D($,qh);r=$.prototype;r.init=function(){$.F.init.call(this)};r.Oa=function(a,b){return new yf(this,this.c,a,b)};
r.ac=function(){var a=this.m();if("indexeddb"==a)return new Nd(this.g,this.c);if("websql"==a)return new bf(this.g,this.c);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Fe(this.g,this.c);throw new dd("No executor for "+a);};r.xb=function(a,b,c){return this.b.xb(a,b,c)};r.count=function(a,b,c,d){return this.b.count(a,b,c,d)};r.get=function(a,b){return this.b.get(a,b)};r.keys=function(a,b,c,d,e,f){return this.b.keys(a,b,c,d,e,f)};
r.O=function(a,b,c,d,e,f){return this.b.O(a,b,c,d,e,f)};r.load=function(a,b,c){return this.b.load(a,b,c)};r.Ea=function(a,b,c){return this.b.Ea(a,b,c)};r.clear=function(a,b,c){return this.b.clear(a,b,c)};r.yb=function(a,b,c){return this.b.yb(a,b,c)};r.toString=function(){var a="Storage:"+this.getName();this.a&&this.a.Va()&&(a+=" ["+this.m()+"]");return a};function sh(a){this.a=a}sh.prototype.a=[];
sh.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=ab(a,Da(e,'"').split(".")),c.push(e);else if(f)c.push(Da(e,"'"));else if(x(e))if("true"===e)c.push(!0);else if("false"===e)c.push(!1);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=v(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=v(e)?0<=e.indexOf(f):!1,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
sh.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):void 0;return sh.prototype.b.apply(null,a)}};sh.prototype.toJSON=function(){return{Tokens:Ld(T(this.a))}};function th(a,b,c){$.call(this,a,b,c)}D(th,$);r=th.prototype;r.ac=function(){var a=this.m();if("indexeddb"==a)return new Rd(this.g,this.c);if("websql"==a)return new kf(this.g,this.c);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new Pe(this.g,this.c);throw new dd("No executor for "+a);};r.Oa=function(a,b){return new Vf(this,this.c,a,b)};r.Mc=function(a,b,c,d){return this.b.gc(a,b,c,d)};r.Nc=function(a,b){return this.b.hc(a,b)};
r.map=function(a,b){return this.b.map(a,b)};r.reduce=function(a,b,c){return this.b.reduce(a,b,c)};function uh(){this.a=qa()}var vh=new uh;uh.prototype.get=k("a");function wh(a){this.d=a||"";this.e=vh}wh.prototype.a=!0;wh.prototype.b=!1;function xh(a){a=new Date(a.g);return yh(a.getFullYear()-2E3)+yh(a.getMonth()+1)+yh(a.getDate())+" "+yh(a.getHours())+":"+yh(a.getMinutes())+":"+yh(a.getSeconds())+"."+yh(Math.floor(a.getMilliseconds()/10))}function yh(a){return 10>a?"0"+a:String(a)}function zh(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Bh(a){wh.call(this,a)}D(Bh,wh);Bh.prototype.b=!0;
Bh.prototype.c=function(a){var b;switch(a.e.value){case Vb.value:b="dbg-sh";break;case Wb.value:b="dbg-sev";break;case Xb.value:b="dbg-w";break;case Yb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.d," ");this.a&&c.push("[",xh(a),"] ");c.push("[",Ca(zh(a,this.e.get())),"s] ");c.push("[",wa(a.c),"] ");c.push('<span class="',b,'">',va(Ca(wa(a.d))));this.b&&a.b&&c.push("<br>",va(Ca(a.a||"")));c.push("</span><br>");return c.join("")};function Ch(a){wh.call(this,a)}D(Ch,wh);
Ch.prototype.c=function(a){var b=[];b.push(this.d," ");this.a&&b.push("[",xh(a),"] ");b.push("[",zh(a,this.e.get()),"s] ");b.push("[",a.c,"] ");b.push(a.d,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function Dh(){this.e=oa(this.g,this);this.a=new Ch;this.a.a=!1;this.b=this.a.b=!1;this.c="";this.d={}}Dh.prototype.g=function(a){if(!this.d[a.c]){var b=this.a.c(a),c=Eh;if(c)switch(a.e){case Vb:Fh(c,"info",b);break;case Wb:Fh(c,"error",b);break;case Xb:Fh(c,"warn",b);break;default:Fh(c,"debug",b)}else window.opera?window.opera.postError(b):this.c+=b}};var Eh=window.console;function Fh(a,b,c){if(a[b])a[b](c);else a.log(c)};var Gh,Hh=!wb||wb&&9<=Mb;!xb&&!wb||wb&&wb&&9<=Mb||xb&&Kb("1.9.1");wb&&Kb("9");function Ih(a,b){var c;c=a.className;c=x(c)&&c.match(/\S+/g)||[];for(var d=Ua(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=F(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function Jh(a,b){$a(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Kh?a.setAttribute(Kh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Kh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Lh(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||B(f)&&0<f.nodeType?d(f):Ka(Mh(f)?Sa(f):f,d)}}function Mh(a){if(a&&"number"==typeof a.length){if(B(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return!1}function Nh(a){this.a=a||s.document||document}
function Oh(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
Nh.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Hh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',wa(g.name),'"');if(g.type){f.push(' type="',wa(g.type),'"');var h={};cb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:v(g)?Ih.apply(null,[f].concat(g)):Jh(f,g));2<e.length&&Lh(d,f,e);return f};Nh.prototype.createElement=function(a){return this.a.createElement(a)};
Nh.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function Ph(a){this.e=oa(this.g,this);this.b=new Bh;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new Nh(9==a.nodeType?a:a.ownerDocument||a.document):Gh||(Gh=new Nh),c=null;wb?(a=c=b.a.createStyleSheet(),wb?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=Oh(b,"head")[0],a||(c=Oh(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),wb?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
Ph.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";c.innerHTML=this.b.c(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};Ph.prototype.clear=function(){this.a.innerHTML=""};var Qh=null,Rh=null;L("ydn.debug");ra("ydn.debug.log",function(a,b,c){if(y(b))b=new Ub("log",b);else if(x(b)){b=b.toUpperCase();if(!dc){dc={};for(var d=0,e;e=cc[d];d++)dc[e.value]=e,dc[e.name]=e}b=dc[b]||null}else b=$b;L(a||"ydn").b=b;u(c)?Rh||(a=Rh=new Ph(c),!0!=a.c&&(c=kc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),kc().b=Xb):Qh||Rh||(a=Qh=new Dh,!0!=a.b&&(c=kc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),kc().b=Xb)});S.prototype.getType=S.prototype.m;S.prototype.setName=S.prototype.t;S.prototype.getName=S.prototype.getName;S.prototype.getSchema=S.prototype.Nb;S.prototype.transaction=S.prototype.ta;S.prototype.close=S.prototype.A;ra("ydn.db.version","0.8.1");ra("ydn.db.cmp",O);ra("ydn.db.deleteDatabase",function(a,b){wc&&(!b||"indexeddb"==b)&&wc&&"deleteDatabase"in wc&&wc.deleteDatabase(a);!ia(s.openDatabase)||b&&"websql"!=b||fh(a);b&&"localstorage"!=b||Yg(a);b&&"sessionstorage"!=b||$g(a)});Yf.prototype.name=Yf.prototype.name;
Yf.prototype.getVersion=Yf.prototype.Pc;Yf.prototype.getOldVersion=Yf.prototype.qc;Yf.prototype.getOldSchema=Yf.prototype.pc;Zf.prototype.getError=Zf.prototype.e;lf.prototype.abort=lf.prototype.Jc;lf.prototype.canAbort=lf.prototype.oc;lf.prototype.progress=lf.prototype.Kc;lf.prototype.promise=lf.prototype.uc;th.prototype.scan=th.prototype.Nc;th.prototype.map=th.prototype.map;th.prototype.reduce=th.prototype.reduce;th.prototype.open=th.prototype.Mc;Vf.prototype.scan=Vf.prototype.hc;Vf.prototype.map=Vf.prototype.map;Vf.prototype.reduce=Vf.prototype.reduce;Vf.prototype.open=Vf.prototype.gc;Cd.prototype.getKey=Cd.prototype.Oc;Cd.prototype.getPrimaryKey=Cd.prototype.p;Cd.prototype.getValue=Cd.prototype.N;Cd.prototype.update=Cd.prototype.update;Cd.prototype.clear=Cd.prototype.clear;
ra("ydn.math.Expression",sh);sh.prototype.evaluate=sh.prototype.b;sh.prototype.compile=sh.prototype.c;sh.parseRpn=function(a){return new sh(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};sh.parseInfix=function(){throw new zd("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here.");};ra("ydn.db.Iterator",R);ra("ydn.db.KeyIterator",Xc);ra("ydn.db.ValueIterator",Zc);ra("ydn.db.IndexIterator",Yc);ra("ydn.db.IndexValueIterator",$c);R.prototype.getState=R.prototype.sc;
R.prototype.getKeyRange=R.prototype.Bc;R.prototype.getIndexName=R.prototype.zc;R.prototype.getStoreName=R.prototype.h;R.prototype.isReversed=R.prototype.La;R.prototype.isUnique=R.prototype.sb;R.prototype.isKeyIterator=R.prototype.Cc;R.prototype.isIndexIterator=R.prototype.tc;R.prototype.getPrimaryKey=R.prototype.p;R.prototype.getKey=R.prototype.Ac;R.prototype.resume=R.prototype.Fc;R.prototype.reset=R.prototype.Ec;R.prototype.reverse=R.prototype.Gc;
Xc.where=function(a,b,c,d,e){return new Xc(a,Vc(b,c,d,e))};Zc.where=function(a,b,c,d,e){return new Zc(a,Vc(b,c,d,e))};Yc.where=function(a,b,c,d,e,f){return new Yc(a,b,Vc(c,d,e,f))};$c.where=function(a,b,c,d,e,f){return new $c(a,b,Vc(c,d,e,f))};ra("ydn.db.Streamer",wd);wd.prototype.push=wd.prototype.push;wd.prototype.collect=wd.prototype.Lc;wd.prototype.setSink=wd.prototype.yc;$.prototype.branch=$.prototype.lc;$.prototype.add=$.prototype.xb;$.prototype.get=$.prototype.get;$.prototype.values=$.prototype.O;$.prototype.put=$.prototype.Ea;$.prototype.clear=$.prototype.clear;$.prototype.remove=$.prototype.yb;$.prototype.count=$.prototype.count;yf.prototype.add=yf.prototype.xb;yf.prototype.get=yf.prototype.get;yf.prototype.values=yf.prototype.O;yf.prototype.put=yf.prototype.Ea;yf.prototype.clear=yf.prototype.clear;yf.prototype.remove=yf.prototype.yb;yf.prototype.count=yf.prototype.count;
ra("ydn.db.Key",kd);kd.prototype.id=kd.prototype.Hc;kd.prototype.parent=kd.prototype.Ic;kd.prototype.storeName=kd.prototype.h;ra("ydn.db.KeyRange",Q);Q.upperBound=Q.upperBound;Q.lowerBound=Q.lowerBound;Q.bound=Q.bound;Q.only=Q.only;Q.starts=Qc;Xf.prototype.store_name=Xf.prototype.c;Xf.prototype.getStoreName=Xf.prototype.h;Kf.prototype.name=Kf.prototype.name;Kf.prototype.getKey=Kf.prototype.e;Kf.prototype.getValue=Kf.prototype.N;Hf.prototype.name=Hf.prototype.name;Hf.prototype.getKeys=Hf.prototype.Ja;
Hf.prototype.getValues=Hf.prototype.gb;ra("ydn.db.Storage",th);function Sh(a){this.b=a||[]}Sh.prototype.a=function(a){return-1==this.b.indexOf(a)?a:null};function Th(){}
Th.prototype.a=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,h;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,h=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f=f+"e":h.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f=f+"e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,h=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!h.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function Uh(a){this.b=a}
Uh.prototype.a=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a;a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,"$1")}(a);
a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.b&&(a=a.substring(0,this.b));return a=a.toUpperCase()};var Vh=new Uh(32),Wh=new Th,Xh=new Sh("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function Yh(){this.data=categ_letters_numbers_data;this.a=0}function Zh(a,b){for(var c=a.a,d=a.data[c],d=1,e=0;0<=c&&c<a.data.length;){d=a.data[c];if(d instanceof Array)if(b<d[0])d=-1;else if(b>d[1])d=1;else return a.a=c,!0;else{if(d==b)return a.a=c,!0;d=b<d?-1:1}if(0==e)e=d;else if(e!=d)break;c+=d;if(c>a.data.length||0>c)break}return!1}
function $h(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new Yh;if(y(d))d=Zh(g,d);else{for(var h=0,l=d.length;h<l;++h)if(!1===Zh(g,d[h])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};var ai,bi;bi=ai=!1;var ci=sb();ci&&(-1!=ci.indexOf("Firefox")?ai=!0:-1!=ci.indexOf("Camino")||-1!=ci.indexOf("iPhone")||-1!=ci.indexOf("iPod")||-1!=ci.indexOf("iPad")||-1!=ci.indexOf("Android")||-1!=ci.indexOf("Chrome")&&(bi=!0));var di=ai,ei=bi;function fi(a,b){this.g=b;this.value=a}fi.prototype.N=k("value");fi.prototype.b=ea(1);var gi=!Bb&&(ei||di);fi.prototype.Sb=k("value");fi.prototype.toString=function(){return"Entry:"+this.value};function hi(a,b,c,d,e,f){fi.call(this,d,e);this.e=a;this.c=b;this.d=c;this.kb=f||[]}D(hi,fi);r=hi.prototype;r.Sa=function(){return{k:this.g,v:this.value.toLowerCase(),id:this.Sb(),loc:this.kb}};r.Sb=function(){var a=[this.e,this.d,this.c,this.value];return gi?a:zc(a)};r.h=k("e");r.p=k("d");r.toString=function(){return["IndexEntry",this.e,this.d,this.value].join(":")};function ii(a,b,c,d,e){fi.call(this,b,c);this.j=d;this.a=e;this.type=a;this.Vb=1}D(ii,fi);ii.prototype.b=function(){return this.a*this.type*this.Vb};ii.prototype.Sb=function(){return this.value+"|"+this.j};function ji(a,b){hi.call(this,b.h(),b.c,b.p(),b.N(),b.g,[]);this.m=a;this.a=[b]}D(ji,hi);ji.prototype.count=function(){return this.a.length};function ki(a,b){for(var c=b.a[0],d=0;d<a.a.length;d++)if(a.a[d].c==c.c&&a.a[d].value==c.value)return;a.a.push(c)}ji.prototype.b=function(){for(var a=0,b=0;b<this.a.length;b++)var c=this.a[b],d=jg(this.m,c.h(),c.c),c=c.b(),a=a+c*d.c;return a};function Za(a,b){var c=a.b(),d=b.b();return c<=d?1:-1}
ji.prototype.Sa=function(){for(var a={value:this.value,primaryKey:this.d,storeName:this.e,score:this.b(),tokens:[]},b=0;b<this.a.length;b++)a.tokens[b]=this.a[b].Sa();return a};ji.prototype.toString=function(){return["RankEntry",this.e,this.d,this.value].join(":")+"["+this.a.length+"]"};function li(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function Pf(a,b,c,d,e,f,g){hi.call(this,b,c,d,e,f,g);this.a=a}D(Pf,hi);Pf.prototype.b=function(){var a,b=this.value;a=li(this.a.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=li(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,h;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(h=b[f],g==h){c++;delete b[f];break}a=2*c/d;b=Math.log(this.kb.length+1);c=this.a.b();return b*a*c};Pf.prototype.Sa=function(){return{keyPath:this.c,value:this.value,loc:this.kb.slice()}};
Pf.prototype.toString=function(){return["ResultEntry",this.e,this.d,this.value].join(":")};function mi(a,b){this.a=a;this.b=b;this.d=[];this.c=0}function Of(a,b){for(var c,d,e=a.a.getName(),f=0;f<a.b.length;f++){var g=a.b[f],h=g.type;0.4==h||0.6==h?(d="v",c=g.N().toLowerCase(),c=Qc(c)):(d="v",c=g.N().toLowerCase(),c=Q.only(c));b(e,d,c,g);a.c++;0.6==h&&(d="k",c=g.g,c=Q.only(c),b(e,d,c,g),a.c++)}}function Nf(a){for(var b=[a.a.getName()],c=0;c<a.a.count();c++){var d=a.a.index(c).h();-1==b.indexOf(d)&&b.push(d)}return b}
mi.prototype.e=function(){for(var a=[],b=[],c=0;c<this.d.length;c++){var d=this.d[c];if(0==d.a.type)-1==Pa(b,function(a){return a.p()==d.p()&&a.h()==d.h()})&&b.push(d);else{var e=new ji(this.a,d),f=Pa(a,function(a){return a.p()==e.p()&&a.h()==e.h()});if(0<=f){var g=a[f];Ja.splice.call(a,f,1);ki(g,e);e=g}Ya(a,e)}}for(f=0;f<b.length;f++)for(g=b[f],c=a.length-1;0<=c;--c){var h=a[c];if(g.p()==h.p()&&g.h()==h.h()){a.splice(f,1);break}}return a.map(function(a){return a.Sa()})};function ni(a){this.a=a;if("en"==a.c){a=a.d||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(Vh);else if("stemmer"==a[c])b.push(Wh);else if("stop"==a[c])b.push(Xh);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.b=a}function oi(a,b){for(var c=0;c<a.b.length;c++){var d=a.b[c].a(b);if(d)b=d;else return null}return b}ni.prototype.parse=function(a){var b=[];$h(a,function(c,d){b.push(a.substr(c,d))});return b};
function pi(a,b){var c=[],d=[];$h(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=oi(a,c[f]);for(var g=[],h=0,f=0;f<c.length;f++){var l=c[f],n=e[f],m="*"==b.charAt(d[f]+l.length),p=m?d[f]+l.length+1:d[f]+l.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),q="-"==b.charAt(p?d[f]-2:d[f]-1),t=0.8;m?t=0.4:p?t=1:q?t=0:null!=n&&(t=0.6);l=new ii(t,l,n,d[f],1/(f+2));g.push(l);h+=l.b()}for(f=0;f<g.length;++f)g[f].Vb=1/h;return g}
ni.prototype.c=function(a,b,c){var d=[],e=[];$h(a,function(b,c){d.push(a.substr(b,c));e.push(b)});for(var f=[],g=0;g<d.length;g++)f[g]=oi(this,d[g]);var h=b.h();b=b.a;for(var l=[],g=0;g<d.length;g++){var n=d[g],m=f[g];if(null!=m){var p=Oa(l,function(a){return a.N()==n});p||(p=new hi(h,b,c,n,m),l.push(p));p.kb.push(e[g])}}return l};function qi(a,b,c,d){for(var e=[],f=0;f<a.a.count();f++){var g=a.a.index(f);if(g.h()==b){var h=xc(d,g.a);x(h)&&(e=e.concat(a.c(h,g,c)))}}return e};$.prototype.Ub=function(a,b){var c=this;b.a=new ni(b);gg(a,function(d,e){function f(b){var e=a.getName();nf(d,function(a,f,g){if(f)g(a,f);else{of(d,a);var h=new kd(e,b);Sf(c.b,[h]).Ha(function(){g(a,f)})}})}function g(b){var e=a.getName();nf(d,function(a,f,g){f?g(a,f):(of(d,a),b&&(b=Oc(Q.bound([e,b.lower],[e,b.upper,"\uffff"]))),Tf(c.b,e,b).Ha(function(){g(a,f)}))})}function h(e){var f=a.getName();nf(d,function(a,g,h){of(d,a);if(g)h(a,g);else{var l=b.getName();v(a)||(a=[a]);for(var C=0;C<a.length;C++){var E=
a[C];ld(E)&&(E=qi(b.a,f,E,e[C]).map(function(a){return a.Sa()}),E=Rf(c.b,l,E),C==a.length-1&&E.Ha(function(){h(a,g)}))}}})}var l=d.b;"put"==l?h([e[1]]):"put:array"==l?h(e[1]):"add"==l?h([e[1]]):"add:array"==l?h(e[1]):"rm:iter"==l||"clear"==l?g(e[1]):"rm"==l&&f(e[1])})};
$.prototype.vc=function(a,b){var c=ng(this.c,a);if(!c)throw new P('full text index catalog "'+a+'" not found.');var c=c.a,d=pi(c,b),c=0==d.length?null:new mi(c.a,d);return c?Mf(this.b,c):(I(this.d,'query "'+b+'" contains only noise and search is ignored'),qf("search",null))};$.prototype.search=$.prototype.vc;mi.prototype.collect=mi.prototype.e;
var categ_letters_numbers_data=[[48,57],[65,90],[97,122],170,[178,179],181,[185,186],[188,190],[192,214],[216,246],[248,705],[710,721],[736,740],748
	,750,[880,884],[886,887],[890,893],902,[904,906],908,[910,929],[931,1013],[1015,1153],[1162,1319],[1329,1366],1369
	,[1377,1415],[1488,1514],[1520,1522],[1568,1610],[1632,1641],[1646,1647],[1649,1747],1749,[1765,1766],[1774,1788],1791
	,1808,[1810,1839],[1869,1957],1969,[1984,2026],[2036,2037],2042,[2048,2069],2074,2084,2088,[2112,2136],2208,[2210,2220]
	,[2308,2361],2365,2384,[2392,2401],[2406,2415],[2417,2423],[2425,2431],[2437,2444],[2447,2448],[2451,2472],[2474,2480]
	,2482,[2486,2489],2493,2510,[2524,2525],[2527,2529],[2534,2545],[2548,2553],[2565,2570],[2575,2576],[2579,2600]
	,[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],2654,[2662,2671],[2674,2676],[2693,2701],[2703,2705]
	,[2707,2728],[2730,2736],[2738,2739],[2741,2745],2749,2768,[2784,2785],[2790,2799],[2821,2828],[2831,2832],[2835,2856]
	,[2858,2864],[2866,2867],[2869,2873],2877,[2908,2909],[2911,2913],[2918,2927],[2929,2935],2947,[2949,2954],[2958,2960]
	,[2962,2965],[2969,2970],2972,[2974,2975],[2979,2980],[2984,2986],[2990,3001],3024,[3046,3058],[3077,3084],[3086,3088]
	,[3090,3112],[3114,3123],[3125,3129],3133,[3160,3161],[3168,3169],[3174,3183],[3192,3198],[3205,3212],[3214,3216]
	,[3218,3240],[3242,3251],[3253,3257],3261,3294,[3296,3297],[3302,3311],[3313,3314],[3333,3340],[3342,3344],[3346,3386]
	,3389,3406,[3424,3425],[3430,3445],[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632]
	,[3634,3635],[3648,3654],[3664,3673],[3713,3714],3716,[3719,3720],3722,3725,[3732,3735],[3737,3743],[3745,3747],3749
	,3751,[3754,3755],[3757,3760],[3762,3763],3773,[3776,3780],3782,[3792,3801],[3804,3807],3840,[3872,3891],[3904,3911]
	,[3913,3948],[3976,3980],[4096,4138],[4159,4169],[4176,4181],[4186,4189],4193,[4197,4198],[4206,4208],[4213,4225],4238
	,[4240,4249],[4256,4293],4295,4301,[4304,4346],[4348,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744]
	,[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954]
	,[4969,4988],[4992,5007],[5024,5108],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5870,5872],[5888,5900]
	,[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6000],[6016,6067],6103,6108,[6112,6121],[6128,6137],[6160,6169]
	,[6176,6263],[6272,6312],6314,[6320,6389],[6400,6428],[6470,6509],[6512,6516],[6528,6571],[6593,6599],[6608,6618]
	,[6656,6678],[6688,6740],[6784,6793],[6800,6809],6823,[6917,6963],[6981,6987],[6992,7001],[7043,7072],[7086,7141]
	,[7168,7203],[7232,7241],[7245,7293],[7401,7404],[7406,7409],[7413,7414],[7424,7615],[7680,7957],[7960,7965]
	,[7968,8005],[8008,8013],[8016,8023],8025,8027,8029,[8031,8061],[8064,8116],[8118,8124],8126,[8130,8132],[8134,8140]
	,[8144,8147],[8150,8155],[8160,8172],[8178,8180],[8182,8188],[8304,8305],[8308,8313],[8319,8329],[8336,8348],8450,8455
	,[8458,8467],8469,[8473,8477],8484,8486,8488,[8490,8493],[8495,8505],[8508,8511],[8517,8521],8526,[8528,8585]
	,[9312,9371],[9450,9471],[10102,10131],[11264,11310],[11312,11358],[11360,11492],[11499,11502],[11506,11507],11517
	,[11520,11557],11559,11565,[11568,11623],11631,[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710]
	,[11712,11718],[11720,11726],[11728,11734],[11736,11742],11823,[12293,12295],[12321,12329],[12337,12341],[12344,12348]
	,[12353,12438],[12445,12447],[12449,12538],[12540,12543],[12549,12589],[12593,12686],[12690,12693],[12704,12730]
	,[12784,12799],[12832,12841],[12872,12879],[12881,12895],[12928,12937],[12977,12991],13312,19893,19968,40908
	,[40960,42124],[42192,42237],[42240,42508],[42512,42539],[42560,42606],[42623,42647],[42656,42735],[42775,42783]
	,[42786,42888],[42891,42894],[42896,42899],[42912,42922],[43000,43009],[43011,43013],[43015,43018],[43020,43042]
	,[43056,43061],[43072,43123],[43138,43187],[43216,43225],[43250,43255],43259,[43264,43301],[43312,43334],[43360,43388]
	,[43396,43442],[43471,43481],[43520,43560],[43584,43586],[43588,43595],[43600,43609],[43616,43638],43642,[43648,43695]
	,43697,[43701,43702],[43705,43709],43712,43714,[43739,43741],[43744,43754],[43762,43764],[43777,43782],[43785,43790]
	,[43793,43798],[43808,43814],[43816,43822],[43968,44002],[44016,44025],44032,55203,[55216,55238],[55243,55291]
	,[63744,64109],[64112,64217],[64256,64262],[64275,64279],64285,[64287,64296],[64298,64310],[64312,64316],64318
	,[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140]
	,[65142,65276],[65296,65305],[65313,65338],[65345,65370],[65382,65470],[65474,65479],[65482,65487],[65490,65495]
	,[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786]
	,[65799,65843],[65856,65912],65930,[66176,66204],[66208,66256],[66304,66334],[66336,66339],[66352,66378],[66432,66461]
	,[66464,66499],[66504,66511],[66513,66517],[66560,66717],[66720,66729],[67584,67589],67592,[67594,67637],[67639,67640]
	,67644,[67647,67669],[67672,67679],[67840,67867],[67872,67897],[67968,68023],[68030,68031],68096,[68112,68115]
	,[68117,68119],[68121,68147],[68160,68167],[68192,68222],[68352,68405],[68416,68437],[68440,68466],[68472,68479]
	,[68608,68680],[69216,69246],[69635,69687],[69714,69743],[69763,69807],[69840,69864],[69872,69881],[69891,69926]
	,[69942,69951],[70019,70066],[70081,70084],[70096,70105],[71296,71338],[71360,71369],[73728,74606],[74752,74850]
	,[77824,78894],[92160,92728],[93952,94020],94032,[94099,94111],[110592,110593],[119648,119665],[119808,119892]
	,[119894,119964],[119966,119967],119970,[119973,119974],[119977,119980],[119982,119993],119995,[119997,120003]
	,[120005,120069],[120071,120074],[120077,120084],[120086,120092],[120094,120121],[120123,120126],[120128,120132],120134
	,[120138,120144],[120146,120485],[120488,120512],[120514,120538],[120540,120570],[120572,120596],[120598,120628]
	,[120630,120654],[120656,120686],[120688,120712],[120714,120744],[120746,120770],[120772,120779],[120782,120831]
	,[126464,126467],[126469,126495],[126497,126498],126500,126503,[126505,126514],[126516,126519],126521,126523,126530
	,126535,126537,126539,[126541,126543],[126545,126546],126548,126551,126553,126555,126557,126559,[126561,126562],126564
	,[126567,126570],[126572,126578],[126580,126583],[126585,126588],126590,[126592,126601],[126603,126619],[126625,126627]
	,[126629,126633],[126635,126651],[127232,127242],131072,173782,173824,177972,177984,178205,[194560,195101]];
;

                })();
                //# sourceMappingURL=/Users/kyawtun/db-work/ydn-db-fulltext/jsc/zry-ydn.db-dev-text.js.map
            